var wS=Object.defineProperty,SS=Object.defineProperties;var vS=Object.getOwnPropertyDescriptors;var dg=Object.getOwnPropertySymbols;var $S=Object.prototype.hasOwnProperty,TS=Object.prototype.propertyIsEnumerable;var pg=(bt,Ye,rt)=>Ye in bt?wS(bt,Ye,{enumerable:!0,configurable:!0,writable:!0,value:rt}):bt[Ye]=rt,mt=(bt,Ye)=>{for(var rt in Ye||(Ye={}))$S.call(Ye,rt)&&pg(bt,rt,Ye[rt]);if(dg)for(var rt of dg(Ye))TS.call(Ye,rt)&&pg(bt,rt,Ye[rt]);return bt},Ei=(bt,Ye)=>SS(bt,vS(Ye));(function(){"use strict";var bt="",Ye="",rt=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("k-markdown-input",{ref:"input",staticClass:"k-block-type-markdown-input",attrs:{blank:r.blank,buttons:r.buttons,"custom-highlights":r.customHighlights,disabled:r.disabled,font:r.font,highlights:r.highlights,kirbytext:r.kirbytext,"known-kirbytags":r.knownKirbytags,placeholder:r.placeholder,size:r.size,value:r.content.text,endpoints:r.endpoints,spellcheck:r.spellcheck,uploads:r.uploads},on:{input:function(i){return r.update({text:i})}}})},Og=[],PS="";function pr(r,e,t,i,n,s,l,o){var a=typeof r=="function"?r.options:r;e&&(a.render=e,a.staticRenderFns=t,a._compiled=!0),i&&(a.functional=!0),s&&(a._scopeId="data-v-"+s);var h;if(l?(h=function(c){c=c||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!c&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(c=__VUE_SSR_CONTEXT__),n&&n.call(this,c),c&&c._registeredComponents&&c._registeredComponents.add(l)},a._ssrRegister=h):n&&(h=o?function(){n.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:n),h)if(a.functional){a._injectStyles=h;var u=a.render;a.render=function(d,p){return h.call(p),u(d,p)}}else{var f=a.beforeCreate;a.beforeCreate=f?[].concat(f,h):[h]}return{exports:r,options:a}}const gg={computed:{blank(){return this.field("text",{}).blank},buttons(){return this.field("text",{}).buttons},customHighlights(){return this.field("text",{}).customHighlights},disabled(){return this.field("text",{}).disabled},endpoints(){return this.field("text",{}).endpoints},font(){return this.field("text",{}).font},highlights(){return this.field("text",{}).highlights},kirbytext(){return this.field("text",{}).kirbytext},knownKirbytags(){return this.field("text",{}).knownKirbytags},placeholder(){return this.field("text",{}).placeholder},size(){return this.field("text",{}).size},spellcheck(){return this.field("text",{}).spellcheck},uploads(){return this.field("text",{}).uploads}},methods:{focus(){this.$refs.input.focus()}}},lh={};var mg=pr(gg,rt,Og,!1,bg,null,null,null);function bg(r){for(let e in lh)this[e]=lh[e]}var kg=function(){return mg.exports}(),yg=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("k-field",r._b({staticClass:"k-markdown-field",attrs:{input:r.uid,counter:r.counterOptions}},"k-field",r.$props,!1),[t("k-input",r._g(r._b({ref:"input",attrs:{id:r._uid,type:"markdown",theme:"field"}},"k-input",r.$props,!1),r.$listeners))],1)},xg=[];const Qg={extends:"k-textarea-field",props:{autofocus:{type:Boolean,default:!1},blank:{type:Boolean,default:!1},buttons:{type:[Boolean,Array],default:!0},customHighlights:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},endpoints:Object,font:{type:String,default:"monospace"},highlights:{type:[Boolean,Array],default:!0},kirbytext:{type:Boolean,default:!0},knownKirbytags:{type:Array,default:()=>[]},placeholder:{type:String,default:""},size:{type:String,default:null},spellcheck:{type:Boolean,default:!0},uploads:{type:[Boolean,Object,Array],default:!0},value:String}},oh={};var wg=pr(Qg,yg,xg,!1,Sg,null,null,null);function Sg(r){for(let e in oh)this[e]=oh[e]}var ah=function(){return wg.exports}(),vg=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("nav",{staticClass:"k-toolbar k-markdown-toolbar"},[t("div",{staticClass:"k-toolbar-buttons k-markdown-toolbar-buttons"},[r._l(r.layout,function(i,n){var s=i.button,l=i.name,o=i.isActive,a=i.isDisabled;return[s.divider?[t("hr",{key:n,staticClass:"k-toolbar-divider",attrs:{"aria-orientation":"vertical"}})]:s.dropdown?[t("k-dropdown",{key:n},[t("k-button",{key:n,class:(a()?"is-disabled ":"")+"k-toolbar-button k-markdown-button",attrs:{icon:s.icon,tooltip:s.label,tabindex:"-1"},on:{click:function(h){r.$refs[n+"-dropdown"][0].toggle()}}}),t("k-dropdown-content",{ref:n+"-dropdown",refInFor:!0,on:{open:function(h){return r.setOpen(r.$refs[n+"-dropdown"][0])},close:function(h){return r.setOpen(null)}}},r._l(s.dropdown,function(h,u){return t("k-dropdown-item",{key:u,attrs:{icon:h.icon,current:r.active.includes(h.token)},on:{click:h.command}},[t("span",{domProps:{innerHTML:r._s(h.label)}})])}),1)],1)]:[t("k-button",{key:n,class:(a()?"is-disabled ":"")+(o()||l==="invisibles"&&r.invisibles?"is-active ":"")+"k-toolbar-button k-markdown-button"+(s.align==="right"?" k-markdown-toolbar-button-right":""),attrs:{icon:s.icon,tooltip:s.label,tabindex:"-1"},on:{click:s.command}})]]})],2)])},$g=[],CS="";const Tg={props:{id:String,buttons:Array,editor:Object,modals:Boolean,invisibles:Boolean,uploads:[Boolean,Object,Array],active:Array},data(){return{open:null}},computed:{layout(){let r=this.buttons.sort((e,t)=>e.name==="invisibles"?1:t.name==="invisibles"?-1:0);return r=r.map(e=>({button:e.button,name:e.name,isActive:e.isActive,isDisabled:e.isDisabled})),r}},methods:{setOpen(r=null){this.open=r},closeDropdowns(){this.open&&this.open.close()}}},hh={};var Pg=pr(Tg,vg,$g,!1,Cg,null,null,null);function Cg(r){for(let e in hh)this[e]=hh[e]}var Ag=function(){return Pg.exports}();function Rg(r){return r.replace(/^[\s\uFEFF\xA0]+/g,"")}function Wg(r){return r.replace(/[\s\uFEFF\xA0]+$/g,"")}function _g(r){return r.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}function ln(r){return r.match(/^https?:\/\//)&&!r.match(/\s/)}var Ig=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("k-dialog",{ref:"dialog",attrs:{button:r.$t("insert")},on:{cancel:function(i){return r.$emit("cancel")},submit:r.submit}},[t("k-form",{ref:"form",attrs:{fields:r.displayedFields},on:{submit:r.submit},model:{value:r.value,callback:function(i){r.value=i},expression:"value"}})],1)},zg=[];const Xg={props:{blank:[Boolean,String],extension:Object,kirbytext:Boolean},data(){return{value:{type:"url",url:null,text:null,blank:!1},fields:{type:{label:this.$t("markdown.linktype"),type:"radio",columns:2,options:[{value:"url",text:this.$t("url")},{value:"email",text:this.$t("email")}]},url:{label:this.$t("url"),type:"text",placeholder:this.$t("url.placeholder"),icon:"url",when:{type:"url"}},email:{label:this.$t("email"),type:"email",when:{type:"email"}},text:{label:this.$t("link.text"),type:"text"}},blankField:{blank:{label:this.$t("markdown.dialog.blank"),type:"toggle",text:[this.$t("markdown.no"),this.$t("markdown.yes")],when:{type:"url"}}}}},computed:{displayedFields(){return this.kirbytext&&this.extension.options.blank?Object.assign(this.fields,this.blankField):this.fields}},methods:{open(){this.resetValue();const r=this.extension.editor.getSelection();_g(r)?(this.value.type="email",this.value.email=r):ln(r)?(this.value.type="url",this.value.url=r):this.value.text=r,this.$refs.dialog.open()},resetValue(){let r=this.blank=="always";this.value={type:"url",url:null,text:null,blank:r}},submit(){this.$refs.dialog.close(),this.$emit("submit",this.value)}}},uh={};var Dg=pr(Xg,Ig,zg,!1,Ng,null,null,null);function Ng(r){for(let e in uh)this[e]=uh[e]}var Eg=function(){return Dg.exports}();class Y{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),kt.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),kt.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new Or(this),s=new Or(e);for(let l=t,o=t;;){if(n.next(l),s.next(l),l=0,n.lineBreak!=s.lineBreak||n.done!=s.done||n.value!=s.value)return!1;if(o+=n.value.length,n.done||o>=i)return!0}}iter(e=1){return new Or(this,e)}iterRange(e,t=this.length){return new ch(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new dh(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Y.empty:e.length<=32?new pe(e):kt.from(pe.split(e,[]))}}class pe extends Y{constructor(e,t=Bg(e)){super();this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let s=0;;s++){let l=this.text[s],o=n+l.length;if((t?i:o)>=e)return new Mg(n,o,i,l);n=o+1,i++}}decompose(e,t,i,n){let s=e<=0&&t>=this.length?this:new pe(fh(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let l=i.pop(),o=on(s.text,l.text.slice(),0,s.length);if(o.length<=32)i.push(new pe(o,l.length+s.length));else{let a=o.length>>1;i.push(new pe(o.slice(0,a)),new pe(o.slice(a)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof pe))return super.replace(e,t,i);let n=on(this.text,on(i.text,fh(this.text,0,e)),t),s=this.length+i.length-(t-e);return n.length<=32?new pe(n,s):kt.from(pe.split(n,[]),s)}sliceString(e,t=this.length,i=`
`){let n="";for(let s=0,l=0;s<=t&&l<this.text.length;l++){let o=this.text[l],a=s+o.length;s>e&&l&&(n+=i),e<a&&t>s&&(n+=o.slice(Math.max(0,e-s),t-s)),s=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let s of e)i.push(s),n+=s.length+1,i.length==32&&(t.push(new pe(i,n)),i=[],n=-1);return n>-1&&t.push(new pe(i,n)),t}}class kt extends Y{constructor(e,t){super();this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let s=0;;s++){let l=this.children[s],o=n+l.length,a=i+l.lines-1;if((t?a:o)>=e)return l.lineInner(e,t,i,n);n=o+1,i=a+1}}decompose(e,t,i,n){for(let s=0,l=0;l<=t&&s<this.children.length;s++){let o=this.children[s],a=l+o.length;if(e<=a&&t>=l){let h=n&((l<=e?1:0)|(a>=t?2:0));l>=e&&a<=t&&!h?i.push(o):o.decompose(e-l,t-l,i,h)}l=a+1}}replace(e,t,i){if(i.lines<this.lines)for(let n=0,s=0;n<this.children.length;n++){let l=this.children[n],o=s+l.length;if(e>=s&&t<=o){let a=l.replace(e-s,t-s,i),h=this.lines-l.lines+a.lines;if(a.lines<h>>5-1&&a.lines>h>>5+1){let u=this.children.slice();return u[n]=a,new kt(u,this.length-(t-e)+i.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let n="";for(let s=0,l=0;s<this.children.length&&l<=t;s++){let o=this.children[s],a=l+o.length;l>e&&s&&(n+=i),e<a&&t>l&&(n+=o.sliceString(e-l,t-l,i)),l=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof kt))return 0;let i=0,[n,s,l,o]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,s+=t){if(n==l||s==o)return i;let a=this.children[n],h=e.children[s];if(a!=h)return i+a.scanIdentical(h,t);i+=a.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let p of e)p.flatten(d);return new pe(d,t)}let n=Math.max(32,i>>5),s=n<<1,l=n>>1,o=[],a=0,h=-1,u=[];function f(d){let p;if(d.lines>s&&d instanceof kt)for(let k of d.children)f(k);else d.lines>l&&(a>l||!a)?(c(),o.push(d)):d instanceof pe&&a&&(p=u[u.length-1])instanceof pe&&d.lines+p.lines<=32?(a+=d.lines,h+=d.length+1,u[u.length-1]=new pe(p.text.concat(d.text),p.length+1+d.length)):(a+d.lines>n&&c(),a+=d.lines,h+=d.length+1,u.push(d))}function c(){a!=0&&(o.push(u.length==1?u[0]:kt.from(u,h)),h=-1,a=u.length=0)}for(let d of e)f(d);return c(),o.length==1?o[0]:new kt(o,t)}}Y.empty=new pe([""],0);function Bg(r){let e=-1;for(let t of r)e+=t.length+1;return e}function on(r,e,t=0,i=1e9){for(let n=0,s=0,l=!0;s<r.length&&n<=i;s++){let o=r[s],a=n+o.length;a>=t&&(a>i&&(o=o.slice(0,i-n)),n<t&&(o=o.slice(t-n)),l?(e[e.length-1]+=o,l=!1):e.push(o)),n=a+1}return e}function fh(r,e,t){return on(r,[""],e,t)}class Or{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof pe?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],s=this.offsets[i],l=s>>1,o=n instanceof pe?n.text.length:n.children.length;if(l==(t>0?o:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof pe){let a=n.text[l+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[l+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof pe?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class ch{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Or(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class dh{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(Y.prototype[Symbol.iterator]=function(){return this.iter()},Or.prototype[Symbol.iterator]=ch.prototype[Symbol.iterator]=dh.prototype[Symbol.iterator]=function(){return this});class Mg{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}let Bi="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<Bi.length;r++)Bi[r]+=Bi[r-1];function Lg(r){for(let e=1;e<Bi.length;e+=2)if(Bi[e]>r)return Bi[e-1]<=r;return!1}function ph(r){return r>=127462&&r<=127487}const Oh=8205;function Fe(r,e,t=!0,i=!0){return(t?gh:Zg)(r,e,i)}function gh(r,e,t){if(e==r.length)return e;e&&mh(r.charCodeAt(e))&&bh(r.charCodeAt(e-1))&&e--;let i=ll(r,e);for(e+=kh(i);e<r.length;){let n=ll(r,e);if(i==Oh||n==Oh||t&&Lg(n))e+=kh(n),i=n;else if(ph(n)){let s=0,l=e-2;for(;l>=0&&ph(ll(r,l));)s++,l-=2;if(s%2==0)break;e+=2}else break}return e}function Zg(r,e,t){for(;e>0;){let i=gh(r,e-2,t);if(i<e)return i;e--}return 0}function mh(r){return r>=56320&&r<57344}function bh(r){return r>=55296&&r<56320}function ll(r,e){let t=r.charCodeAt(e);if(!bh(t)||e+1==r.length)return t;let i=r.charCodeAt(e+1);return mh(i)?(t-55296<<10)+(i-56320)+65536:t}function kh(r){return r<65536?1:2}const ol=/\r\n?|\n/;var _e=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(_e||(_e={}));class Rt{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let s=this.sections[t++],l=this.sections[t++];l<0?(e(i,n,s),n+=s):n+=l,i+=s}}iterChangedRanges(e,t=!1){al(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new Rt(e)}composeDesc(e){return this.empty?e:e.empty?this:yh(this,e)}mapDesc(e,t=!1){return e.empty?this:hl(this,e,t)}mapPos(e,t=-1,i=_e.Simple){let n=0,s=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],h=n+o;if(a<0){if(h>e)return s+(e-n);s+=o}else{if(i!=_e.Simple&&h>=e&&(i==_e.TrackDel&&n<e&&h>e||i==_e.TrackBefore&&n<e||i==_e.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!o)return e==n||t<0?s:s+a;s+=a}n=h}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return s}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let s=this.sections[i++],l=this.sections[i++],o=n+s;if(l>=0&&n<=t&&o>=e)return n<e&&o>t?"cover":!0;n=o}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Rt(e)}}class xe extends Rt{constructor(e,t){super(e);this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return al(this,(t,i,n,s,l)=>e=e.replace(n,n+(i-t),l),!1),e}mapDesc(e,t=!1){return hl(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,s=0;n<t.length;n+=2){let l=t[n],o=t[n+1];if(o>=0){t[n]=o,t[n+1]=l;let a=n>>1;for(;i.length<a;)i.push(Y.empty);i.push(l?e.slice(s,s+l):Y.empty)}s+=l}return new xe(t,i)}compose(e){return this.empty?e:e.empty?this:yh(this,e,!0)}map(e,t=!1){return e.empty?this:hl(this,e,t,!0)}iterChanges(e,t=!1){al(this,e,t)}get desc(){return new Rt(this.sections)}filter(e){let t=[],i=[],n=[],s=new gr(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,a-o);Ie(n,u,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;Ie(t,u,f),f>0&&Oi(i,t,s.text),s.forward(u),o+=u}let h=e[l++];for(;o<h;){if(s.done)break e;let u=Math.min(s.len,h-o);Ie(t,u,-1),Ie(n,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),o+=u}}return{changes:new xe(t,i),filtered:new Rt(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],s=[],l=0,o=null;function a(u=!1){if(!u&&!n.length)return;l<t&&Ie(n,t-l,-1);let f=new xe(n,s);o=o?o.compose(f.map(o)):f,n=[],s=[],l=0}function h(u){if(Array.isArray(u))for(let f of u)h(f);else if(u instanceof xe){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);a(),o=o?o.compose(u.map(o)):u}else{let{from:f,to:c=f,insert:d}=u;if(f>c||f<0||c>t)throw new RangeError(`Invalid change range ${f} to ${c} (in doc of length ${t})`);let p=d?typeof d=="string"?Y.of(d.split(i||ol)):d:Y.empty,k=p.length;if(f==c&&k==0)return;f<l&&a(),f>l&&Ie(n,f-l,-1),Ie(n,c-f,k),Oi(s,n,p),l=c}}return h(e),a(!o),o}static empty(e){return new xe(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let s=e[n];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<n;)i.push(Y.empty);i[n]=Y.of(s.slice(1)),t.push(s[0],i[n].length)}}}return new xe(t,i)}}function Ie(r,e,t,i=!1){if(e==0&&t<=0)return;let n=r.length-2;n>=0&&t<=0&&t==r[n+1]?r[n]+=e:e==0&&r[n]==0?r[n+1]+=t:i?(r[n]+=e,r[n+1]+=t):r.push(e,t)}function Oi(r,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<i;)r.push(Y.empty);r.push(t)}}function al(r,e,t){let i=r.inserted;for(let n=0,s=0,l=0;l<r.sections.length;){let o=r.sections[l++],a=r.sections[l++];if(a<0)n+=o,s+=o;else{let h=n,u=s,f=Y.empty;for(;h+=o,u+=a,a&&i&&(f=f.append(i[l-2>>1])),!(t||l==r.sections.length||r.sections[l+1]<0);)o=r.sections[l++],a=r.sections[l++];e(n,h,s,u,f),n=h,s=u}}}function hl(r,e,t,i=!1){let n=[],s=i?[]:null,l=new gr(r),o=new gr(e);for(let a=0,h=0;;)if(l.ins==-1)a+=l.len,l.next();else if(o.ins==-1&&h<a){let u=Math.min(o.len,a-h);o.forward(u),Ie(n,u,-1),h+=u}else if(o.ins>=0&&(l.done||h<a||h==a&&(o.len<l.len||o.len==l.len&&!t))){for(Ie(n,o.ins,-1);a>h&&!l.done&&a+l.len<h+o.len;)a+=l.len,l.next();h+=o.len,o.next()}else if(l.ins>=0){let u=0,f=a+l.len;for(;;)if(o.ins>=0&&h>a&&h+o.len<f)u+=o.ins,h+=o.len,o.next();else if(o.ins==-1&&h<f){let c=Math.min(o.len,f-h);u+=c,o.forward(c),h+=c}else break;Ie(n,u,l.ins),s&&Oi(s,n,l.text),a=f,l.next()}else{if(l.done&&o.done)return s?new xe(n,s):new Rt(n);throw new Error("Mismatched change set lengths")}}function yh(r,e,t=!1){let i=[],n=t?[]:null,s=new gr(r),l=new gr(e);for(let o=!1;;){if(s.done&&l.done)return n?new xe(i,n):new Rt(i);if(s.ins==0)Ie(i,s.len,0,o),s.next();else if(l.len==0&&!l.done)Ie(i,0,l.ins,o),n&&Oi(n,i,l.text),l.next();else{if(s.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,l.len),h=i.length;if(s.ins==-1){let u=l.ins==-1?-1:l.off?0:l.ins;Ie(i,a,u,o),n&&u&&Oi(n,i,l.text)}else l.ins==-1?(Ie(i,s.off?0:s.len,a,o),n&&Oi(n,i,s.textBit(a))):(Ie(i,s.off?0:s.len,l.off?0:l.ins,o),n&&!l.off&&Oi(n,i,l.text));o=(s.ins>a||l.ins>=0&&l.len>a)&&(o||i.length>h),s.forward2(a),l.forward(a)}}}}class gr{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Y.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Y.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Mi{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new Mi(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return _.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return _.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return _.range(e.anchor,e.head)}}class _{constructor(e,t=0){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:_.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new _([this.main])}addRange(e,t=!0){return _.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,_.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new _(e.ranges.map(t=>Mi.fromJSON(t)),e.main)}static single(e,t=e){return new _([_.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let s=e[n];if(s.empty?s.from<=i:s.from<i)return Ug(e.slice(),t);i=s.to}return new _(e,t)}static cursor(e,t=0,i,n){return new Mi(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(n!=null?n:33554431)<<5)}static range(e,t,i){let n=(i!=null?i:33554431)<<5;return t<e?new Mi(t,e,16|n|8):new Mi(e,t,n|(t>e?4:0))}}function Ug(r,e=0){let t=r[e];r.sort((i,n)=>i.from-n.from),e=r.indexOf(t);for(let i=1;i<r.length;i++){let n=r[i],s=r[i-1];if(n.empty?n.from<=s.to:n.from<s.to){let l=s.from,o=Math.max(n.to,s.to);i<=e&&e--,r.splice(--i,2,n.anchor>n.head?_.range(o,l):_.range(l,o))}}return new _(r,e)}function xh(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let ul=0;class U{constructor(e,t,i,n,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.extensions=s,this.id=ul++,this.default=e([])}static define(e={}){return new U(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:fl),!!e.static,e.enables)}of(e){return new an([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new an(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new an(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function fl(r,e){return r==e||r.length==e.length&&r.every((t,i)=>t===e[i])}class an{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=ul++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,s=this.id,l=e[s]>>1,o=this.type==2,a=!1,h=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?h=!0:(((t=e[f.id])!==null&&t!==void 0?t:1)&1)==0&&u.push(e[f.id]);return{create(f){return f.values[l]=i(f),1},update(f,c){if(a&&c.docChanged||h&&(c.docChanged||c.selection)||cl(f,u)){let d=i(f);if(o?!Qh(d,f.values[l],n):!n(d,f.values[l]))return f.values[l]=d,1}return 0},reconfigure:(f,c)=>{let d=i(f),p=c.config.address[s];if(p!=null){let k=fn(c,p);if(this.dependencies.every(w=>w instanceof U?c.facet(w)===f.facet(w):w instanceof Wt?c.field(w,!1)==f.field(w,!1):!0)||(o?Qh(d,k,n):n(d,k)))return f.values[l]=k,0}return f.values[l]=d,1}}}}function Qh(r,e,t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!t(r[i],e[i]))return!1;return!0}function cl(r,e){let t=!1;for(let i of e)kr(r,i)&1&&(t=!0);return t}function jg(r,e,t){let i=t.map(a=>r[a.id]),n=t.map(a=>a.type),s=i.filter(a=>!(a&1)),l=r[e.id]>>1;function o(a){let h=[];for(let u=0;u<i.length;u++){let f=fn(a,i[u]);if(n[u]==2)for(let c of f)h.push(c);else h.push(f)}return e.combine(h)}return{create(a){for(let h of i)kr(a,h);return a.values[l]=o(a),1},update(a,h){if(!cl(a,s))return 0;let u=o(a);return e.compare(u,a.values[l])?0:(a.values[l]=u,1)},reconfigure(a,h){let u=cl(a,i),f=h.config.facets[e.id],c=h.facet(e);if(f&&!u&&fl(t,f))return a.values[l]=c,0;let d=o(a);return e.compare(d,c)?(a.values[l]=c,0):(a.values[l]=d,1)}}}const wh=U.define({static:!0});class Wt{constructor(e,t,i,n,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=s,this.provides=void 0}static define(e){let t=new Wt(ul++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(wh).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let s=i.values[t],l=this.updateF(s,n);return this.compareF(s,l)?0:(i.values[t]=l,1)},reconfigure:(i,n)=>n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,wh.of({field:this,create:e})]}get extension(){return this}}const Li={lowest:4,low:3,default:2,high:1,highest:0};function mr(r){return e=>new Sh(e,r)}const hn={highest:mr(Li.highest),high:mr(Li.high),default:mr(Li.default),low:mr(Li.low),lowest:mr(Li.lowest)};class Sh{constructor(e,t){this.inner=e,this.prec=t}}class br{of(e){return new dl(this,e)}reconfigure(e){return br.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class dl{constructor(e,t){this.compartment=e,this.inner=t}}class un{constructor(e,t,i,n,s,l){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=s,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],s=Object.create(null),l=new Map;for(let c of Vg(e,t,l))c instanceof Wt?n.push(c):(s[c.facet.id]||(s[c.facet.id]=[])).push(c);let o=Object.create(null),a=[],h=[];for(let c of n)o[c.id]=h.length<<1,h.push(d=>c.slot(d));let u=i==null?void 0:i.config.facets;for(let c in s){let d=s[c],p=d[0].facet,k=u&&u[c]||[];if(d.every(w=>w.type==0))if(o[p.id]=a.length<<1|1,fl(k,d))a.push(i.facet(p));else{let w=p.combine(d.map(S=>S.value));a.push(i&&p.compare(w,i.facet(p))?i.facet(p):w)}else{for(let w of d)w.type==0?(o[w.id]=a.length<<1|1,a.push(w.value)):(o[w.id]=h.length<<1,h.push(S=>w.dynamicSlot(S)));o[p.id]=h.length<<1,h.push(w=>jg(w,p,d))}}let f=h.map(c=>c(o));return new un(e,l,f,o,a,s)}}function Vg(r,e,t){let i=[[],[],[],[],[]],n=new Map;function s(l,o){let a=n.get(l);if(a!=null){if(a<=o)return;let h=i[a].indexOf(l);h>-1&&i[a].splice(h,1),l instanceof dl&&t.delete(l.compartment)}if(n.set(l,o),Array.isArray(l))for(let h of l)s(h,o);else if(l instanceof dl){if(t.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(l.compartment)||l.inner;t.set(l.compartment,h),s(h,o)}else if(l instanceof Sh)s(l.inner,l.prec);else if(l instanceof Wt)i[o].push(l),l.provides&&s(l.provides,o);else if(l instanceof an)i[o].push(l),l.facet.extensions&&s(l.facet.extensions,o);else{let h=l.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,o)}}return s(r,Li.default),i.reduce((l,o)=>l.concat(o))}function kr(r,e){if(e&1)return 2;let t=e>>1,i=r.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;r.status[t]=4;let n=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|n}function fn(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const vh=U.define(),$h=U.define({combine:r=>r.some(e=>e),static:!0}),Th=U.define({combine:r=>r.length?r[0]:void 0,static:!0}),Ph=U.define(),Ch=U.define(),Ah=U.define(),Rh=U.define({combine:r=>r.length?r[0]:!1});class gi{constructor(e,t){this.type=e,this.value=t}static define(){return new Gg}}class Gg{of(e){return new gi(this,e)}}class qg{constructor(e){this.map=e}of(e){return new he(this,e)}}class he{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new he(this.type,t)}is(e){return this.type==e}static define(e={}){return new qg(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let s=n.map(t);s&&i.push(s)}return i}}he.reconfigure=he.define(),he.appendConfig=he.define();class me{constructor(e,t,i,n,s,l){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=s,this.scrollIntoView=l,this._doc=null,this._state=null,i&&xh(i,t.newLength),s.some(o=>o.type==me.time)||(this.annotations=s.concat(me.time.of(Date.now())))}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(me.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}me.time=gi.define(),me.userEvent=gi.define(),me.addToHistory=gi.define(),me.remote=gi.define();function Yg(r,e){let t=[];for(let i=0,n=0;;){let s,l;if(i<r.length&&(n==e.length||e[n]>=r[i]))s=r[i++],l=r[i++];else if(n<e.length)s=e[n++],l=e[n++];else return t;!t.length||t[t.length-1]<s?t.push(s,l):t[t.length-1]<l&&(t[t.length-1]=l)}}function Wh(r,e,t){var i;let n,s,l;return t?(n=e.changes,s=xe.empty(e.changes.length),l=r.changes.compose(e.changes)):(n=e.changes.map(r.changes),s=r.changes.mapDesc(e.changes,!0),l=r.changes.compose(n)),{changes:l,selection:e.selection?e.selection.map(s):(i=r.selection)===null||i===void 0?void 0:i.map(n),effects:he.mapEffects(r.effects,n).concat(he.mapEffects(e.effects,s)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function pl(r,e,t){let i=e.selection,n=Zi(e.annotations);return e.userEvent&&(n=n.concat(me.userEvent.of(e.userEvent))),{changes:e.changes instanceof xe?e.changes:xe.of(e.changes||[],t,r.facet(Th)),selection:i&&(i instanceof _?i:_.single(i.anchor,i.head)),effects:Zi(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function _h(r,e,t){let i=pl(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let l=!!e[s].sequential;i=Wh(i,pl(r,e[s],l?i.changes.newLength:r.doc.length),l)}let n=new me(r,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Hg(t?Fg(n):n)}function Fg(r){let e=r.startState,t=!0;for(let n of e.facet(Ph)){let s=n(r);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:Yg(t,s))}if(t!==!0){let n,s;if(t===!1)s=r.changes.invertedDesc,n=xe.empty(e.doc.length);else{let l=r.changes.filter(t);n=l.changes,s=l.filtered.invertedDesc}r=new me(e,n,r.selection&&r.selection.map(s),he.mapEffects(r.effects,s),r.annotations,r.scrollIntoView)}let i=e.facet(Ch);for(let n=i.length-1;n>=0;n--){let s=i[n](r);s instanceof me?r=s:Array.isArray(s)&&s.length==1&&s[0]instanceof me?r=s[0]:r=_h(e,Zi(s),!1)}return r}function Hg(r){let e=r.startState,t=e.facet(Ah),i=r;for(let n=t.length-1;n>=0;n--){let s=t[n](r);s&&Object.keys(s).length&&(i=Wh(r,pl(e,s,r.changes.newLength),!0))}return i==r?r:new me(e,r.changes,r.selection,i.effects,i.annotations,i.scrollIntoView)}const Kg=[];function Zi(r){return r==null?Kg:Array.isArray(r)?r:[r]}var yt=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(yt||(yt={}));const Jg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Ol;try{Ol=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function em(r){if(Ol)return Ol.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||Jg.test(t)))return!0}return!1}function tm(r){return e=>{if(!/\S/.test(e))return yt.Space;if(em(e))return yt.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return yt.Word;return yt.Other}}class F{constructor(e,t,i,n,s,l){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)kr(this,o<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return kr(this,i),fn(this,i)}update(...e){return _h(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let l of e.effects)l.is(br.reconfigure)?(t&&(n=new Map,t.compartments.forEach((o,a)=>n.set(a,o)),t=null),n.set(l.value.compartment,l.value.extension)):l.is(he.reconfigure)?(t=null,i=l.value):l.is(he.appendConfig)&&(t=null,i=Zi(i).concat(l.value));let s;t?s=e.startState.values.slice():(t=un.resolve(i,n,this),s=new F(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(o,a)=>a.reconfigure(o,this),null).values),new F(t,e.newDoc,e.newSelection,s,(l,o)=>o.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:_.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),s=[i.range],l=Zi(i.effects);for(let o=1;o<t.ranges.length;o++){let a=e(t.ranges[o]),h=this.changes(a.changes),u=h.map(n);for(let c=0;c<o;c++)s[c]=s[c].map(u);let f=n.mapDesc(h,!0);s.push(a.range.map(f)),n=n.compose(u),l=he.mapEffects(l,u).concat(he.mapEffects(Zi(a.effects),f))}return{changes:n,selection:_.create(s,t.mainIndex),effects:l}}changes(e=[]){return e instanceof xe?e:xe.of(e,this.doc.length,this.facet(F.lineSeparator))}toText(e){return Y.of(e.split(this.facet(F.lineSeparator)||ol))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(kr(this,t),fn(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Wt&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i)for(let s in i){let l=i[s],o=e[s];n.push(l.init(a=>l.spec.fromJSON(o,a)))}return F.create({doc:e.doc,selection:_.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=un.resolve(e.extensions||[],new Map),i=e.doc instanceof Y?e.doc:Y.of((e.doc||"").split(t.staticFacet(F.lineSeparator)||ol)),n=e.selection?e.selection instanceof _?e.selection:_.single(e.selection.anchor,e.selection.head):_.single(0);return xh(n,i.length),t.staticFacet($h)||(n=n.asSingle()),new F(t,i,n,t.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(F.tabSize)}get lineBreak(){return this.facet(F.lineSeparator)||`
`}get readOnly(){return this.facet(Rh)}phrase(e){for(let t of this.facet(F.phrases))if(Object.prototype.hasOwnProperty.call(t,e))return t[e];return e}languageDataAt(e,t,i=-1){let n=[];for(let s of this.facet(vh))for(let l of s(this,t,i))Object.prototype.hasOwnProperty.call(l,e)&&n.push(l[e]);return n}charCategorizer(e){return tm(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),s=this.charCategorizer(e),l=e-i,o=e-i;for(;l>0;){let a=Fe(t,l,!1);if(s(t.slice(a,l))!=yt.Word)break;l=a}for(;o<n;){let a=Fe(t,o);if(s(t.slice(o,a))!=yt.Word)break;o=a}return l==o?null:_.range(l+i,o+i)}}F.allowMultipleSelections=$h,F.tabSize=U.define({combine:r=>r.length?r[0]:4}),F.lineSeparator=Th,F.readOnly=Rh,F.phrases=U.define({compare(r,e){let t=Object.keys(r),i=Object.keys(e);return t.length==i.length&&t.every(n=>r[n]==e[n])}}),F.languageData=vh,F.changeFilter=Ph,F.transactionFilter=Ch,F.transactionExtender=Ah,br.reconfigure=he.define();function Ih(r,e,t={}){let i={};for(let n of r)for(let s of Object.keys(n)){let l=n[s],o=i[s];if(o===void 0)i[s]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(t,s))i[s]=t[s](o,l);else throw new Error("Config merge conflict for field "+s)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class mi{eq(e){return this==e}range(e,t=e){return new gl(e,t,this)}}mi.prototype.startSide=mi.prototype.endSide=0,mi.prototype.point=!1,mi.prototype.mapMode=_e.TrackDel;class gl{constructor(e,t,i){this.from=e,this.to=t,this.value=i}}function ml(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class bl{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let s=i?this.to:this.from;for(let l=n,o=s.length;;){if(l==o)return l;let a=l+o>>1,h=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==l)return h>=0?l:o;h>=0?o=a:l=a+1}}between(e,t,i,n){for(let s=this.findIndex(t,-1e9,!0),l=this.findIndex(i,1e9,!1,s);s<l;s++)if(n(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],n=[],s=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let h=this.value[a],u=this.from[a]+e,f=this.to[a]+e,c,d;if(u==f){let p=t.mapPos(u,h.startSide,h.mapMode);if(p==null||(c=d=p,h.startSide!=h.endSide&&(d=t.mapPos(u,h.endSide),d<c)))continue}else if(c=t.mapPos(u,h.startSide),d=t.mapPos(f,h.endSide),c>d||c==d&&h.startSide>0&&h.endSide<=0)continue;(d-c||h.endSide-h.startSide)<0||(l<0&&(l=c),h.point&&(o=Math.max(o,d-c)),i.push(h),n.push(c-l),s.push(d-l))}return{mapped:i.length?new bl(n,s,i,o):null,pos:l}}}class be{constructor(e,t,i=be.empty,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:s=this.length}=e,l=e.filter;if(t.length==0&&!l)return this;if(i&&(t=t.slice().sort(ml)),this.isEmpty)return t.length?be.of(t):this;let o=new Xh(this,null,-1).goto(0),a=0,h=[],u=new Gt;for(;o.value||a<t.length;)if(a<t.length&&(o.from-t[a].from||o.startSide-t[a].value.startSide)>=0){let f=t[a++];u.addInner(f.from,f.to,f.value)||h.push(f)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(o.chunkIndex)<t[a].from)&&(!l||n>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&u.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||n>o.to||s<o.from||l(o.from,o.to,o.value))&&(u.addInner(o.from,o.to,o.value)||h.push(new gl(o.from,o.to,o.value))),o.next());return u.finishInner(this.nextLayer.isEmpty&&!h.length?be.empty:this.nextLayer.update({add:h,filter:l,filterFrom:n,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],h=e.touchesRange(o,o+a.length);if(h===!1)n=Math.max(n,a.maxPoint),t.push(a),i.push(e.mapPos(o));else if(h===!0){let{mapped:u,pos:f}=a.map(o,e);u&&(n=Math.max(n,u.maxPoint),t.push(u),i.push(f))}}let s=this.nextLayer.map(e);return t.length==0?s:new be(i,t,s,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let s=this.chunkPos[n],l=this.chunk[n];if(t>=s&&e<=s+l.length&&l.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return yr.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return yr.from(e).goto(t)}static compare(e,t,i,n,s=-1){let l=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),o=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),a=zh(l,o,i),h=new xr(l,a,s),u=new xr(o,a,s);i.iterGaps((f,c,d)=>Dh(h,f,u,c,d,n)),i.empty&&i.length==0&&Dh(h,0,u,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=1e9);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),l=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=l.length)return!1;if(!s.length)return!0;let o=zh(s,l),a=new xr(s,o,0).goto(i),h=new xr(l,o,0).goto(i);for(;;){if(a.to!=h.to||!yl(a.active,h.active)||a.point&&(!h.point||!a.point.eq(h.point)))return!1;if(a.to>n)return!0;a.next(),h.next()}}static spans(e,t,i,n,s=-1){let l=new xr(e,null,s).goto(t),o=t,a=l.openStart;for(;;){let h=Math.min(l.to,i);if(l.point?(n.point(o,h,l.point,l.activeForPoint(l.to),a,l.pointRank),a=l.openEnd(h)+(l.to>h?1:0)):h>o&&(n.span(o,h,l.active,a),a=l.openEnd(h)),l.to>i)break;o=l.to,l.next()}return a}static of(e,t=!1){let i=new Gt;for(let n of e instanceof gl?[e]:t?im(e):e)i.add(n.from,n.to,n.value);return i.finish()}}be.empty=new be([],[],null,-1);function im(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let i=r[t];if(ml(e,i)>0)return r.slice().sort(ml);e=i}return r}be.empty.nextLayer=be.empty;class Gt{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new bl(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Gt)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(be.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=new be(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function zh(r,e,t){let i=new Map;for(let s of r)for(let l=0;l<s.chunk.length;l++)s.chunk[l].maxPoint<=0&&i.set(s.chunk[l],s.chunkPos[l]);let n=new Set;for(let s of e)for(let l=0;l<s.chunk.length;l++){let o=i.get(s.chunk[l]);o!=null&&(t?t.mapPos(o):o)==s.chunkPos[l]&&!(t!=null&&t.touchesRange(o,o+s.chunk[l].length))&&n.add(s.chunk[l])}return n}class Xh{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class yr{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let s=0;s<e.length;s++)for(let l=e[s];!l.isEmpty;l=l.nextLayer)l.maxPoint>=i&&n.push(new Xh(l,t,i,s));return n.length==1?n[0]:new yr(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)kl(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)kl(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),kl(this.heap,0)}}}function kl(r,e){for(let t=r[e];;){let i=(e<<1)+1;if(i>=r.length)break;let n=r[i];if(i+1<r.length&&n.compare(r[i+1])>=0&&(n=r[i+1],i++),t.compare(n)<0)break;r[i]=t,r[e]=n,e=i}}class xr{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=yr.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){cn(this.active,e),cn(this.activeTo,e),cn(this.activeRank,e),this.minActive=Nh(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;dn(this.active,t,i),dn(this.activeTo,t,n),dn(this.activeRank,t,s),e&&dn(e,t,this.cursor.from),this.minActive=Nh(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null,n=0;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&cn(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.from<e&&(n=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){let s=0;for(;s<i.length&&i[s]<e;)s++;this.openStart=s+n}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function Dh(r,e,t,i,n,s){r.goto(e),t.goto(i);let l=i+n,o=i,a=i-e;for(;;){let h=r.to+a-t.to||r.endSide-t.endSide,u=h<0?r.to+a:t.to,f=Math.min(u,l);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&yl(r.activeForPoint(r.to+a),t.activeForPoint(t.to))||s.comparePoint(o,f,r.point,t.point):f>o&&!yl(r.active,t.active)&&s.compareRange(o,f,r.active,t.active),u>l)break;o=u,h<=0&&r.next(),h>=0&&t.next()}}function yl(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function cn(r,e){for(let t=e,i=r.length-1;t<i;t++)r[t]=r[t+1];r.pop()}function dn(r,e,t){for(let i=r.length-1;i>=e;i--)r[i+1]=r[i];r[e]=t}function Nh(r,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||r[n].endSide-r[t].endSide)<0&&(t=n,i=e[n]);return t}function Eh(r,e,t=r.length){let i=0;for(let n=0;n<t;)r.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=Fe(r,n));return i}function rm(r,e,t,i){for(let n=0,s=0;;){if(s>=e)return n;if(n==r.length)break;s+=r.charCodeAt(n)==9?t-s%t:1,n=Fe(r,n)}return i===!0?-1:r.length}const xl="\u037C",Bh=typeof Symbol=="undefined"?"__"+xl:Symbol.for(xl),Ql=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Mh=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class qt{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function s(l,o,a,h){let u=[],f=/^@(\w+)\b/.exec(l[0]),c=f&&f[1]=="keyframes";if(f&&o==null)return a.push(l[0]+";");for(let d in o){let p=o[d];if(/&/.test(d))s(d.split(/,\s*/).map(k=>l.map(w=>k.replace(/&/,w))).reduce((k,w)=>k.concat(w)),p,a);else if(p&&typeof p=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(n(d),p,u,c)}else p!=null&&u.push(d.replace(/_.*/,"").replace(/[A-Z]/g,k=>"-"+k.toLowerCase())+": "+p+";")}(u.length||c)&&a.push((i&&!f&&!h?l.map(i):l).join(", ")+" {"+u.join(" ")+"}")}for(let l in e)s(n(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Mh[Bh]||1;return Mh[Bh]=e+1,xl+e.toString(36)}static mount(e,t){(e[Ql]||new nm(e)).mount(Array.isArray(t)?t:[t])}}let pn=null;class nm{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet!="undefined"){if(pn)return e.adoptedStyleSheets=[pn.sheet].concat(e.adoptedStyleSheets),e[Ql]=pn;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),pn=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[Ql]=this}mount(e){let t=this.sheet,i=0,n=0;for(let s=0;s<e.length;s++){let l=e[s],o=this.modules.indexOf(l);if(o<n&&o>-1&&(this.modules.splice(o,1),n--,o=-1),o==-1){if(this.modules.splice(n++,0,l),t)for(let a=0;a<l.rules.length;a++)t.insertRule(l.rules[a],i++)}else{for(;n<o;)i+=this.modules[n++].rules.length;i+=l.rules.length,n++}}if(!t){let s="";for(let l=0;l<this.modules.length;l++)s+=this.modules[l].getRules()+`
`;this.styleTag.textContent=s}}}for(var Yt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},On={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Lh=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent),sm=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor),lm=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent),Zh=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),om=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),am=Lh&&(Zh||+Lh[1]<57)||lm&&Zh,Se=0;Se<10;Se++)Yt[48+Se]=Yt[96+Se]=String(Se);for(var Se=1;Se<=24;Se++)Yt[Se+111]="F"+Se;for(var Se=65;Se<=90;Se++)Yt[Se]=String.fromCharCode(Se+32),On[Se]=String.fromCharCode(Se);for(var wl in Yt)On.hasOwnProperty(wl)||(On[wl]=Yt[wl]);function hm(r){var e=am&&(r.ctrlKey||r.altKey||r.metaKey)||(sm||om)&&r.shiftKey&&r.key&&r.key.length==1,t=!e&&r.key||(r.shiftKey?On:Yt)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function gn(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function Ui(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function um(){let r=document.activeElement;for(;r&&r.shadowRoot;)r=r.shadowRoot.activeElement;return r}function Sl(r,e){if(!e.anchorNode)return!1;try{return Ui(r,e.anchorNode)}catch{return!1}}function Qr(r){return r.nodeType==3?wr(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function mn(r,e,t,i){return t?Uh(r,e,t,i,-1)||Uh(r,e,t,i,1):!1}function vl(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function Uh(r,e,t,i,n){for(;;){if(r==t&&e==i)return!0;if(e==(n<0?0:bn(r))){if(r.nodeName=="DIV")return!1;let s=r.parentNode;if(!s||s.nodeType!=1)return!1;e=vl(r)+(n<0?0:1),r=s}else if(r.nodeType==1){if(r=r.childNodes[e+(n<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=n<0?bn(r):0}else return!1}}function bn(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}const jh={left:0,right:0,top:0,bottom:0};function kn(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function fm(r){return{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function cm(r,e,t,i,n,s,l,o){let a=r.ownerDocument,h=a.defaultView;for(let u=r;u;)if(u.nodeType==1){let f,c=u==a.body;if(c)f=fm(h);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.parentNode;continue}let k=u.getBoundingClientRect();f={left:k.left,right:k.left+u.clientWidth,top:k.top,bottom:k.top+u.clientHeight}}let d=0,p=0;if(n=="nearest")e.top<f.top?(p=-(f.top-e.top+l),t>0&&e.bottom>f.bottom+p&&(p=e.bottom-f.bottom+p+l)):e.bottom>f.bottom&&(p=e.bottom-f.bottom+l,t<0&&e.top-p<f.top&&(p=-(f.top+p-e.top+l)));else{let k=e.bottom-e.top,w=f.bottom-f.top;p=(n=="center"&&k<=w?e.top+k/2-w/2:n=="start"||n=="center"&&t<0?e.top-l:e.bottom-w+l)-f.top}if(i=="nearest"?e.left<f.left?(d=-(f.left-e.left+s),t>0&&e.right>f.right+d&&(d=e.right-f.right+d+s)):e.right>f.right&&(d=e.right-f.right+s,t<0&&e.left<f.left+d&&(d=-(f.left+d-e.left+s))):d=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==o?e.left-s:e.right-(f.right-f.left)+s)-f.left,d||p)if(c)h.scrollBy(d,p);else{if(p){let k=u.scrollTop;u.scrollTop+=p,p=u.scrollTop-k}if(d){let k=u.scrollLeft;u.scrollLeft+=d,d=u.scrollLeft-k}e={left:e.left-d,top:e.top-p,right:e.right-d,bottom:e.bottom-p}}if(c)break;u=u.assignedSlot||u.parentNode,i=n="nearest"}else if(u.nodeType==11)u=u.host;else break}class dm{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let ji=null;function Vh(r){if(r.setActive)return r.setActive();if(ji)return r.focus(ji);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(ji==null?{get preventScroll(){return ji={preventScroll:!0},!0}}:void 0),!ji){ji=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],s=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let Gh;function wr(r,e,t=e){let i=Gh||(Gh=document.createRange());return i.setEnd(r,t),i.setStart(r,e),i}function Sr(r,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},n=new KeyboardEvent("keydown",i);n.synthetic=!0,r.dispatchEvent(n);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,r.dispatchEvent(s),n.defaultPrevented||s.defaultPrevented}function pm(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function qh(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}class ve{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new ve(e.parentNode,vl(e),t)}static after(e,t){return new ve(e.parentNode,vl(e)+1,t)}}const $l=[];class ue{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,i=null,n;for(let s of this.children){if(s.dirty){if(!s.dom&&(n=i?i.nextSibling:t.firstChild)){let l=ue.get(n);(!l||!l.parent&&l.constructor==s.constructor)&&s.reuseDOM(n)}s.sync(e),s.dirty=0}if(n=i?i.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&n!=s.dom&&(e.written=!0),s.dom.parentNode==t)for(;n&&n!=s.dom;)n=Yh(n);else t.insertBefore(s.dom,n);i=s.dom}for(n=i?i.nextSibling:t.firstChild,n&&e&&e.node==t&&(e.written=!0);n;)n=Yh(n)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=bn(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;n==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?n=-1:n=1),e=s}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ue.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,s=0;;n++){let l=this.children[n];if(l.dom==i)return s;s+=l.length+l.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,s=-1,l=-1,o=-1;for(let a=0,h=i,u=i;a<this.children.length;a++){let f=this.children[a],c=h+f.length;if(h<e&&c>t)return f.domBoundsAround(e,t,h);if(c>=e&&n==-1&&(n=a,s=h),h>t&&f.dom.parentNode==this.dom){l=a,o=u;break}u=c,h=c+f.breakAfter}return{from:s,to:o<0?i+this.length:o,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=$l){this.markDirty();for(let n=e;n<t;n++){let s=this.children[n];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...i);for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Fh(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,n,s,l){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}ue.prototype.breakAfter=0;function Yh(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class Fh{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function Hh(r,e,t,i,n,s,l,o,a){let{children:h}=r,u=h.length?h[e]:null,f=s.length?s[s.length-1]:null,c=f?f.breakAfter:l;if(!(e==i&&u&&!l&&!c&&s.length<2&&u.merge(t,n,s.length?f:null,t==0,o,a))){if(i<h.length){let d=h[i];d&&n<d.length?(e==i&&(d=d.split(n),n=0),!c&&f&&d.merge(0,n,f,!0,0,a)?s[s.length-1]=d:(n&&d.merge(0,n,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:l=1),i++}for(u&&(u.breakAfter=l,t>0&&(!l&&s.length&&u.merge(t,u.length,s[0],!1,o,0)?u.breakAfter=s.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,o,0),e++));e<i&&s.length;)if(h[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:o;else if(h[e].become(s[0]))e++,s.shift(),o=s.length?0:a;else break;!s.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,o,a)&&e--,(e<i||s.length)&&r.replaceChildren(e,i,s)}}function Kh(r,e,t,i,n,s){let l=r.childCursor(),{i:o,off:a}=l.findPos(t,1),{i:h,off:u}=l.findPos(e,-1),f=e-t;for(let c of i)f+=c.length;r.length+=f,Hh(r,h,u,o,a,i,0,n,s)}let He=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},Tl=typeof document!="undefined"?document:{documentElement:{style:{}}};const Pl=/Edge\/(\d+)/.exec(He.userAgent),Jh=/MSIE \d/.test(He.userAgent),Cl=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(He.userAgent),yn=!!(Jh||Cl||Pl),eu=!yn&&/gecko\/(\d+)/i.test(He.userAgent),Al=!yn&&/Chrome\/(\d+)/.exec(He.userAgent),tu="webkitFontSmoothing"in Tl.documentElement.style,iu=!yn&&/Apple Computer/.test(He.vendor),ru=iu&&(/Mobile\/\w+/.test(He.userAgent)||He.maxTouchPoints>2);var L={mac:ru||/Mac/.test(He.platform),windows:/Win/.test(He.platform),linux:/Linux|X11/.test(He.platform),ie:yn,ie_version:Jh?Tl.documentMode||6:Cl?+Cl[1]:Pl?+Pl[1]:0,gecko:eu,gecko_version:eu?+(/Firefox\/(\d+)/.exec(He.userAgent)||[0,0])[1]:0,chrome:!!Al,chrome_version:Al?+Al[1]:0,ios:ru,android:/Android\b/.test(He.userAgent),webkit:tu,safari:iu,webkit_version:tu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Tl.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Om=256;class Ft extends ue{constructor(e){super();this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof Ft)||this.length-(t-e)+i.length>Om)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Ft(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new ve(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Rl(this.dom,e,t)}}class xt extends ue{constructor(e,t=[],i=0){super();this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(qh(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,n,s,l){return i&&(!(i instanceof xt&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&l<=0)?!1:(Kh(this,e,t,i?i.children:[],s-1,l-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,s=0;for(let o of this.children){let a=i+o.length;a>e&&t.push(i<e?o.split(e-i):o),n<0&&i>=e&&(n=s),i=a,s++}let l=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new xt(this.mark,t,l)}domAtPos(e){return lu(this.dom,this.children,e)}coordsAt(e,t){return au(this,e,t)}}function Rl(r,e,t){let i=r.nodeValue.length;e>i&&(e=i);let n=e,s=e,l=0;e==0&&t<0||e==i&&t>=0?L.chrome||L.gecko||(e?(n--,l=1):(s++,l=-1)):t<0?n--:s++;let o=wr(r,n,s).getClientRects();if(!o.length)return jh;let a=o[(l?l<0:t>=0)?0:o.length-1];return L.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,h=>h.width)||a),l?kn(a,l<0):a||null}class Ht extends ue{constructor(e,t,i){super();this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||Ht)(e,t,i)}split(e){let t=Ht.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,n,s,l){return i&&(!(i instanceof Ht)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&l<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Ht&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Y.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):Y.empty}domAtPos(e){return e==0?ve.before(this.dom):ve.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),n=null;if(!i.length)return jh;for(let s=e>0?i.length-1:0;n=i[s],!(e>0?s==0:s==i.length-1||n.top<n.bottom);s+=e>0?-1:1);return e==0&&t>0||e==this.length&&t<=0?n:kn(n,e==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class nu extends Ht{domAtPos(e){let{topView:t,text:i}=this.widget;return t?Wl(e,0,t,i,(n,s)=>n.domAtPos(s),n=>new ve(i,Math.min(n,i.nodeValue.length))):new ve(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:n}=this.widget;return i?su(e,t,i,n):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:n}=this.widget;return i?Wl(e,t,i,n,(s,l,o)=>s.coordsAt(l,o),(s,l)=>Rl(n,s,l)):Rl(n,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}}function Wl(r,e,t,i,n,s){if(t instanceof xt){for(let l of t.children){let o=Ui(l.dom,i),a=o?i.nodeValue.length:l.length;if(r<a||r==a&&l.getSide()<=0)return o?Wl(r,e,l,i,n,s):n(l,r,e);r-=a}return n(t,t.length,-1)}else return t.dom==i?s(r,e):n(t,r,e)}function su(r,e,t,i){if(t instanceof xt)for(let n of t.children){let s=0,l=Ui(n.dom,i);if(Ui(n.dom,r))return s+(l?su(r,e,n,i):n.localPosFromDOM(r,e));s+=l?i.nodeValue.length:n.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(r,e)}class Vi extends ue{constructor(e){super();this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Vi&&e.side==this.side}split(){return new Vi(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return ve.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=gm(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return Y.empty}}Ft.prototype.children=Ht.prototype.children=Vi.prototype.children=$l;function gm(r,e){let t=r.parent,i=t?t.children.indexOf(r):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let n=t.children[i+e];if(n instanceof Ft){let s=n.coordsAt(e<0?n.length:0,e);if(s)return s}i+=e}else if(t instanceof xt&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let n=t.dom.lastChild;if(n&&n.nodeName=="BR")return n.getClientRects()[0];break}}function lu(r,e,t){let i=0;for(let n=0;i<e.length;i++){let s=e[i],l=n+s.length;if(!(l==n&&s.getSide()<=0)){if(t>n&&t<l&&s.dom.parentNode==r)return s.domAtPos(t-n);if(t<=n)break;n=l}}for(;i>0;i--){let n=e[i-1].dom;if(n.parentNode==r)return ve.after(n)}return new ve(r,0)}function ou(r,e,t){let i,{children:n}=r;t>0&&e instanceof xt&&n.length&&(i=n[n.length-1])instanceof xt&&i.mark.eq(e.mark)?ou(i,e.children[0],t-1):(n.push(e),e.setParent(r)),r.length+=e.length}function au(r,e,t){for(let s=0,l=0;l<r.children.length;l++){let o=r.children[l],a=s+o.length,h;if((t<=0||a==r.length||o.getSide()>0?a>=e:a>e)&&(e<a||l+1==r.children.length||(h=r.children[l+1]).length||h.getSide()>0)){let u=0;if(a==s){if(o.getSide()<=0)continue;u=t=-o.getSide()}let f=o.coordsAt(Math.max(0,e-s),t);return u&&f?kn(f,t<0):f}s=a}let i=r.dom.lastChild;if(!i)return r.dom.getBoundingClientRect();let n=Qr(i);return n[n.length-1]||null}function _l(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}function Il(r,e){if(r==e)return!0;if(!r||!e)return!1;let t=Object.keys(r),i=Object.keys(e);if(t.length!=i.length)return!1;for(let n of t)if(i.indexOf(n)==-1||r[n]!==e[n])return!1;return!0}function zl(r,e,t){let i=null;if(e)for(let n in e)t&&n in t||r.removeAttribute(i=n);if(t)for(let n in t)e&&e[n]==t[n]||r.setAttribute(i=n,t[n]);return!!i}class Gi{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var ne=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(ne||(ne={}));class V extends mi{constructor(e,t,i,n){super();this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new xn(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new bi(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:s,end:l}=hu(e,t);i=(s?t?-3e8:-1:5e8)-1,n=(l?t?2e8:1:-6e8)+1}return new bi(e,i,n,t,e.widget||null,!0)}static line(e){return new vr(e)}static set(e,t=!1){return be.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}V.none=be.empty;class xn extends V{constructor(e){let{start:t,end:i}=hu(e);super(t?-1:5e8,i?1:-6e8,null,e);this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof xn&&this.tagName==e.tagName&&this.class==e.class&&Il(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}xn.prototype.point=!1;class vr extends V{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof vr&&Il(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}vr.prototype.mapMode=_e.TrackBefore,vr.prototype.point=!0;class bi extends V{constructor(e,t,i,n,s,l){super(t,i,s,e);this.block=n,this.isReplace=l,this.mapMode=n?t<=0?_e.TrackBefore:_e.TrackAfter:_e.TrackDel}get type(){return this.startSide<this.endSide?ne.WidgetRange:this.startSide<=0?ne.WidgetBefore:ne.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof bi&&mm(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}bi.prototype.point=!0;function hu(r,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=r;return t==null&&(t=r.inclusive),i==null&&(i=r.inclusive),{start:t!=null?t:e,end:i!=null?i:e}}function mm(r,e){return r==e||!!(r&&e&&r.compare(e))}function Xl(r,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=r?t[n]=Math.max(t[n],e):t.push(r,e)}class ze extends ue{constructor(){super(...arguments);this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,s,l){if(i){if(!(i instanceof ze))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),Kh(this,e,t,i?i.children:[],s,l),!0}split(e){let t=new ze;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Il(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ou(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=_l(t,this.attrs||{})),i&&(this.attrs=_l({class:i},this.attrs||{}))}domAtPos(e){return lu(this.dom,this.children,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(qh(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(zl(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&ue.get(i)instanceof xt;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((t=ue.get(i))===null||t===void 0?void 0:t.isEditable)==!1&&(!L.ios||!this.children.some(n=>n instanceof Ft))){let n=document.createElement("BR");n.cmIgnore=!0,this.dom.appendChild(n)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof Ft))return null;let i=Qr(t.dom);if(i.length!=1)return null;e+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return au(this,e,t)}become(e){return!1}get type(){return ne.Text}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let s=e.children[i],l=n+s.length;if(l>=t){if(s instanceof ze)return s;if(l>t)break}n=l+s.breakAfter}return null}}class ki extends ue{constructor(e,t,i){super();this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,s,l){return i&&(!(i instanceof ki)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&l<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?ve.before(this.dom):ve.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new ki(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return $l}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Y.empty}domBoundsAround(){return null}become(e){return e instanceof ki&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Dl{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof ki&&e.type==ne.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new ze),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(Qn(new Vi(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:l,done:o}=this.cursor.next(this.skip);if(this.skip=0,o)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=s,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,i)),this.getLine().append(Qn(new Ft(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,s,l){if(this.disallowBlockEffectsFor[l]&&i instanceof bi){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(i instanceof bi)if(i.block){let{type:a}=i;a==ne.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ki(i.widget||new uu("div"),o,a))}else{let a=Ht.create(i.widget||new uu("span"),o,i.startSide),h=this.atCursorPos&&!a.isEditable&&s<=n.length&&(e<t||i.startSide>0),u=!a.isEditable&&(e<t||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!h&&(this.pendingBuffer=0),this.flushBuffer(n),h&&(f.append(Qn(new Vi(1),n),s),s=n.length+Math.max(0,s-n.length)),f.append(Qn(a,n),s),this.atCursorPos=u,this.pendingBuffer=u?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,n,s){let l=new Dl(e,t,i,s);return l.openEnd=be.spans(n,t,i,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function Qn(r,e){for(let t of e)r=new xt(t,[r],r.length);return r}class uu extends Gi{constructor(e){super();this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const fu=U.define(),cu=U.define(),du=U.define(),pu=U.define(),Nl=U.define(),Ou=U.define(),gu=U.define({combine:r=>r.some(e=>e)});class wn{constructor(e,t="nearest",i="nearest",n=5,s=5){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=s}map(e){return e.empty?this:new wn(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const mu=he.define({map:(r,e)=>r.map(e)});function Kt(r,e,t){let i=r.facet(pu);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const $r=U.define({combine:r=>r.length?r[0]:!0});let bm=0;const Tr=U.define();class Be{constructor(e,t,i,n){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=n(this)}static define(e,t){const{eventHandlers:i,provide:n,decorations:s}=t||{};return new Be(bm++,e,i,l=>{let o=[Tr.of(l)];return s&&o.push(Pr.of(a=>{let h=a.plugin(l);return h?s(h):V.none})),n&&o.push(n(l)),o})}static fromClass(e,t){return Be.define(i=>new e(i),t)}}class El{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Kt(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Kt(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Kt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const bu=U.define(),ku=U.define(),Pr=U.define(),yu=U.define(),xu=U.define(),Cr=U.define();class _t{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new _t(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,s=0,l=0,o=0;;n++){let a=n==e.length?null:e[n],h=l-o,u=a?a.fromB:1e9;for(;s<t.length&&t[s]<u;){let f=t[s],c=t[s+1],d=Math.max(o,f),p=Math.min(u,c);if(d<=p&&new _t(d+h,p+h,d,p).addToSet(i),c>u)break;s+=2}if(!a)return i;new _t(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),l=a.toA,o=a.toB}}}class Sn{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=xe.empty(this.startState.doc.length);for(let l of i)this.changes=this.changes.compose(l.changes);let n=[];this.changes.iterChangedRanges((l,o,a,h)=>n.push(new _t(l,o,a,h))),this.changedRanges=n;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,t,i){return new Sn(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var oe=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(oe||(oe={}));const Bl=oe.LTR,km=oe.RTL;function Qu(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const ym=Qu("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),xm=Qu("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ml=Object.create(null),Qt=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);Ml[e]=t,Ml[t]=-e}function Qm(r){return r<=247?ym[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?xm[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8203||r==8204?256:1}const wm=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class qi{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?km:Bl}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,n){let s=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=t&&o.to>=t){if(o.level==i)return l;(s<0||(n!=0?n<0?o.from<t:o.to>t:e[s].level>o.level))&&(s=l)}}if(s<0)throw new RangeError("Index out of range");return s}}const ae=[];function Sm(r,e){let t=r.length,i=e==Bl?1:2,n=e==Bl?2:1;if(!r||i==1&&!wm.test(r))return wu(t);for(let l=0,o=i,a=i;l<t;l++){let h=Qm(r.charCodeAt(l));h==512?h=o:h==8&&a==4&&(h=16),ae[l]=h==4?2:h,h&7&&(a=h),o=h}for(let l=0,o=i,a=i;l<t;l++){let h=ae[l];if(h==128)l<t-1&&o==ae[l+1]&&o&24?h=ae[l]=o:ae[l]=256;else if(h==64){let u=l+1;for(;u<t&&ae[u]==64;)u++;let f=l&&o==8||u<t&&ae[u]==8?a==1?1:8:256;for(let c=l;c<u;c++)ae[c]=f;l=u-1}else h==8&&a==1&&(ae[l]=1);o=h,h&7&&(a=h)}for(let l=0,o=0,a=0,h,u,f;l<t;l++)if(u=Ml[h=r.charCodeAt(l)])if(u<0){for(let c=o-3;c>=0;c-=3)if(Qt[c+1]==-u){let d=Qt[c+2],p=d&2?i:d&4?d&1?n:i:0;p&&(ae[l]=ae[Qt[c]]=p),o=c;break}}else{if(Qt.length==189)break;Qt[o++]=l,Qt[o++]=h,Qt[o++]=a}else if((f=ae[l])==2||f==1){let c=f==i;a=c?0:1;for(let d=o-3;d>=0;d-=3){let p=Qt[d+2];if(p&2)break;if(c)Qt[d+2]|=2;else{if(p&4)break;Qt[d+2]|=4}}}for(let l=0;l<t;l++)if(ae[l]==256){let o=l+1;for(;o<t&&ae[o]==256;)o++;let a=(l?ae[l-1]:i)==1,h=(o<t?ae[o]:i)==1,u=a==h?a?1:2:i;for(let f=l;f<o;f++)ae[f]=u;l=o-1}let s=[];if(i==1)for(let l=0;l<t;){let o=l,a=ae[l++]!=1;for(;l<t&&a==(ae[l]!=1);)l++;if(a)for(let h=l;h>o;){let u=h,f=ae[--h]!=2;for(;h>o&&f==(ae[h-1]!=2);)h--;s.push(new qi(h,u,f?2:1))}else s.push(new qi(o,l,0))}else for(let l=0;l<t;){let o=l,a=ae[l++]==2;for(;l<t&&a==(ae[l]==2);)l++;s.push(new qi(o,l,a?1:2))}return s}function wu(r){return[new qi(0,r,0)]}let Su="";function vm(r,e,t,i,n){var s;let l=i.head-r.from,o=-1;if(l==0){if(!n||!r.length)return null;e[0].level!=t&&(l=e[0].side(!1,t),o=0)}else if(l==r.length){if(n)return null;let c=e[e.length-1];c.level!=t&&(l=c.side(!0,t),o=e.length-1)}o<0&&(o=qi.find(e,l,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let a=e[o];l==a.side(n,t)&&(a=e[o+=n?1:-1],l=a.side(!n,t));let h=n==(a.dir==t),u=Fe(r.text,l,h);if(Su=r.text.slice(Math.min(l,u),Math.max(l,u)),u!=a.side(n,t))return _.cursor(u+r.from,h?-1:1,a.level);let f=o==(n?e.length-1:0)?null:e[o+(n?1:-1)];return!f&&a.level!=t?_.cursor(n?r.to:r.from,n?-1:1,t):f&&f.level<a.level?_.cursor(f.side(!n,t)+r.from,n?1:-1,f.level):_.cursor(u+r.from,n?-1:1,a.level)}const Jt="\uFFFF";class vu{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(F.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Jt}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n),this.readNode(n);let s=n.nextSibling;if(s==t)break;let l=ue.get(n),o=ue.get(s);(l&&o?l.breakAfter:(l?l.breakAfter:$u(n))||$u(s)&&(n.nodeName!="BR"||n.cmIgnore))&&this.lineBreak(),n=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,l=1,o;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),l=this.lineSeparator.length):(o=n.exec(t))&&(s=o.index,l=o[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);i=s+l}}readNode(e){if(e.cmIgnore)return;let t=ue.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function $u(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}class Tu{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Pu extends ue{constructor(e){super();this.view=e,this.compositionDeco=V.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ze],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new _t(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:l,toA:o})=>o<this.minWidthFrom||l>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=V.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=Tm(this.view,e.changes)),(L.ie||L.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,n=this.updateDeco(),s=Rm(i,n,e.changes);return t=_t.extendWithRanges(t,s),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.minWidth=this.minWidth?this.minWidth+"px":"";let s=L.chrome||L.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(s),this.dirty=0,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof ki&&s.widget instanceof Cu&&n.push(s.dom);i.updateGaps(n)}updateChildren(e,t){let i=this.childCursor(t);for(let n=e.length-1;;n--){let s=n>=0?e[n]:null;if(!s)break;let{fromA:l,toA:o,fromB:a,toB:h}=s,{content:u,breakAtStart:f,openStart:c,openEnd:d}=Dl.build(this.view.state.doc,a,h,this.decorations,this.dynamicDecorationMap),{i:p,off:k}=i.findPos(o,1),{i:w,off:S}=i.findPos(l,-1);Hh(this,w,S,p,k,u,f,c,d)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection())||L.ios&&this.view.inputState.rapidCompositionStart)return;let i=this.forceSelection;this.forceSelection=!1;let n=this.view.state.selection.main,s=this.domAtPos(n.anchor),l=n.empty?s:this.domAtPos(n.head);if(L.gecko&&n.empty&&$m(s)){let a=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(a,s.node.childNodes[s.offset]||null)),s=l=new ve(a,0),i=!0}let o=this.view.observer.selectionRange;(i||!o.focusNode||!mn(s.node,s.offset,o.anchorNode,o.anchorOffset)||!mn(l.node,l.offset,o.focusNode,o.focusOffset))&&(this.view.observer.ignore(()=>{L.android&&L.chrome&&this.dom.contains(o.focusNode)&&Wm(o.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let a=gn(this.root);if(n.empty){if(L.gecko){let h=Cm(s.node,s.offset);if(h&&h!=3){let u=Ru(s.node,s.offset,h==1?1:-1);u&&(s=new ve(u,h==1?0:u.nodeValue.length))}}a.collapse(s.node,s.offset),n.bidiLevel!=null&&o.cursorBidiLevel!=null&&(o.cursorBidiLevel=n.bidiLevel)}else if(a.extend)a.collapse(s.node,s.offset),a.extend(l.node,l.offset);else{let h=document.createRange();n.anchor>n.head&&([s,l]=[l,s]),h.setEnd(l.node,l.offset),h.setStart(s.node,s.offset),a.removeAllRanges(),a.addRange(h)}}),this.view.observer.setSelectionRange(s,l)),this.impreciseAnchor=s.precise?null:new ve(o.anchorNode,o.anchorOffset),this.impreciseHead=l.precise?null:new ve(o.focusNode,o.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=gn(this.root);if(!e.empty||!e.assoc||!t.modify)return;let i=ze.find(this,e.head);if(!i)return;let n=i.posAtStart;if(e.head==n||e.head==n+i.length)return;let s=this.coordsAt(e.head,-1),l=this.coordsAt(e.head,1);if(!s||!l||s.bottom>l.top)return;let o=this.domAtPos(e.head+e.assoc);t.collapse(o.node,o.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet($r)?this.root.activeElement==this.dom:Sl(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let i=ue.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof ze)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,n=this.children.length-1;;n--){let s=this.children[n],l=i-s.breakAfter-s.length;if(e>l||e==l&&s.type!=ne.WidgetBefore&&s.type!=ne.WidgetAfter&&(!n||t==2||this.children[n-1].breakAfter||this.children[n-1].type==ne.WidgetBefore&&t>-2))return s.coordsAt(e-l,t);i=l}}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,s=this.view.contentDOM.clientWidth,l=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==oe.LTR;for(let h=0,u=0;u<this.children.length;u++){let f=this.children[u],c=h+f.length;if(c>n)break;if(h>=i){let d=f.dom.getBoundingClientRect();if(t.push(d.height),l){let p=f.dom.lastChild,k=p?Qr(p):[];if(k.length){let w=k[k.length-1],S=a?w.right-d.left:d.right-w.left;S>o&&(o=S,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=c)}}}h=c+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?oe.RTL:oe.LTR}measureTextSize(){for(let n of this.children)if(n instanceof ze){let s=n.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i;return e.className="cm-line",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=Qr(e.firstChild)[0];t=e.getBoundingClientRect().height,i=n?n.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Fh(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let s=n==t.viewports.length?null:t.viewports[n],l=s?s.from-1:this.length;if(l>i){let o=t.lineBlockAt(l).bottom-t.lineBlockAt(i).top;e.push(V.replace({widget:new Cu(o),block:!0,inclusive:!0,isBlockGap:!0}).range(i,l))}if(!s)break;i=s.to+1}return V.set(e)}updateDeco(){let e=this.view.state.facet(Pr).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let s=0,l=0,o=0,a=0;for(let u of this.view.state.facet(xu).map(f=>f(this.view)))if(u){let{left:f,right:c,top:d,bottom:p}=u;f!=null&&(s=Math.max(s,f)),c!=null&&(l=Math.max(l,c)),d!=null&&(o=Math.max(o,d)),p!=null&&(a=Math.max(a,p))}let h={left:i.left-s,top:i.top-o,right:i.right+l,bottom:i.bottom+a};cm(this.view.scrollDOM,h,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==oe.LTR)}}function $m(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}class Cu extends Gi{constructor(e){super();this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Au(r){let e=r.observer.selectionRange,t=e.focusNode&&Ru(e.focusNode,e.focusOffset,0);if(!t)return null;let i=r.docView.nearest(t);if(!i)return null;if(i instanceof ze){let n=t;for(;n.parentNode!=i.dom;)n=n.parentNode;let s=n.previousSibling;for(;s&&!ue.get(s);)s=s.previousSibling;let l=s?ue.get(s).posAtEnd:i.posAtStart;return{from:l,to:l,node:n,text:t}}else{for(;;){let{parent:s}=i;if(!s)return null;if(s instanceof ze)break;i=s}let n=i.posAtStart;return{from:n,to:n+i.length,node:i.dom,text:t}}}function Tm(r,e){let t=Au(r);if(!t)return V.none;let{from:i,to:n,node:s,text:l}=t,o=e.mapPos(i,1),a=Math.max(o,e.mapPos(n,-1)),{state:h}=r,u=s.nodeType==3?s.nodeValue:new vu([],h).readRange(s.firstChild,null).text;if(a-o<u.length)if(h.doc.sliceString(o,Math.min(h.doc.length,o+u.length),Jt)==u)a=o+u.length;else if(h.doc.sliceString(Math.max(0,a-u.length),a,Jt)==u)o=a-u.length;else return V.none;else if(h.doc.sliceString(o,a,Jt)!=u)return V.none;let f=ue.get(s);return f instanceof nu?f=f.widget.topView:f&&(f.parent=null),V.set(V.replace({widget:new Pm(s,l,f),inclusive:!0}).range(o,a))}class Pm extends Gi{constructor(e,t,i){super();this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return nu}}function Ru(r,e,t){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&e>0&&t<=0)r=r.childNodes[e-1],e=bn(r);else if(r.nodeType==1&&e<r.childNodes.length&&t>=0)r=r.childNodes[e],e=0;else return null}}function Cm(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}class Am{constructor(){this.changes=[]}compareRange(e,t){Xl(e,t,this.changes)}comparePoint(e,t){Xl(e,t,this.changes)}}function Rm(r,e,t){let i=new Am;return be.compare(r,e,t,i),i.changes}function Wm(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function _m(r,e,t=1){let i=r.charCategorizer(e),n=r.doc.lineAt(e),s=e-n.from;if(n.length==0)return _.cursor(e);s==0?t=1:s==n.length&&(t=-1);let l=s,o=s;t<0?l=Fe(n.text,s,!1):o=Fe(n.text,s);let a=i(n.text.slice(l,o));for(;l>0;){let h=Fe(n.text,l,!1);if(i(n.text.slice(h,l))!=a)break;l=h}for(;o<n.length;){let h=Fe(n.text,o);if(i(n.text.slice(o,h))!=a)break;o=h}return _.range(l+n.from,o+n.from)}function Im(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function zm(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function Ll(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function Wu(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function _u(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function Zl(r,e,t){let i,n,s,l,o,a,h,u;for(let d=r.firstChild;d;d=d.nextSibling){let p=Qr(d);for(let k=0;k<p.length;k++){let w=p[k];n&&Ll(n,w)&&(w=Wu(_u(w,n.bottom),n.top));let S=Im(e,w),P=zm(t,w);if(S==0&&P==0)return d.nodeType==3?Iu(d,e,t):Zl(d,e,t);(!i||l>P||l==P&&s>S)&&(i=d,n=w,s=S,l=P),S==0?t>w.bottom&&(!h||h.bottom<w.bottom)?(o=d,h=w):t<w.top&&(!u||u.top>w.top)&&(a=d,u=w):h&&Ll(h,w)?h=_u(h,w.bottom):u&&Ll(u,w)&&(u=Wu(u,w.top))}}if(h&&h.bottom>=t?(i=o,n=h):u&&u.top<=t&&(i=a,n=u),!i)return{node:r,offset:0};let f=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return Iu(i,f,t);if(!s&&i.contentEditable=="true")return Zl(i,f,t);let c=Array.prototype.indexOf.call(r.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:r,offset:c}}function Iu(r,e,t){let i=r.nodeValue.length,n=-1,s=1e9,l=0;for(let o=0;o<i;o++){let a=wr(r,o,o+1).getClientRects();for(let h=0;h<a.length;h++){let u=a[h];if(u.top==u.bottom)continue;l||(l=e-u.left);let f=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<s){let c=e>=(u.left+u.right)/2,d=c;if((L.chrome||L.gecko)&&wr(r,o).getBoundingClientRect().left==u.right&&(d=!c),f<=0)return{node:r,offset:o+(d?1:0)};n=o+(d?1:0),s=f}}}return{node:r,offset:n>-1?n:l>0?r.nodeValue.length:0}}function zu(r,{x:e,y:t},i,n=-1){var s;let l=r.contentDOM.getBoundingClientRect(),o=l.top+r.viewState.paddingTop,a,{docHeight:h}=r.viewState,u=t-o;if(u<0)return 0;if(u>h)return r.state.doc.length;for(let S=r.defaultLineHeight/2,P=!1;a=r.elementAtHeight(u),a.type!=ne.Text;)for(;u=n>0?a.bottom+S:a.top-S,!(u>=0&&u<=h);){if(P)return i?null:0;P=!0,n=-n}t=o+u;let f=a.from;if(f<r.viewport.from)return r.viewport.from==0?0:i?null:Xu(r,l,a,e,t);if(f>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:i?null:Xu(r,l,a,e,t);let c=r.dom.ownerDocument,d=r.root.elementFromPoint?r.root:c,p=d.elementFromPoint(e,t);p&&!r.contentDOM.contains(p)&&(p=null),p||(e=Math.max(l.left+1,Math.min(l.right-1,e)),p=d.elementFromPoint(e,t),p&&!r.contentDOM.contains(p)&&(p=null));let k,w=-1;if(p&&((s=r.docView.nearest(p))===null||s===void 0?void 0:s.isEditable)!=!1){if(c.caretPositionFromPoint){let S=c.caretPositionFromPoint(e,t);S&&({offsetNode:k,offset:w}=S)}else if(c.caretRangeFromPoint){let S=c.caretRangeFromPoint(e,t);S&&({startContainer:k,startOffset:w}=S,L.safari&&Xm(k,w,e)&&(k=void 0))}}if(!k||!r.docView.dom.contains(k)){let S=ze.find(r.docView,f);if(!S)return u>a.top+a.height/2?a.to:a.from;({node:k,offset:w}=Zl(S.dom,e,t))}return r.docView.posFromDOM(k,w)}function Xu(r,e,t,i,n){let s=Math.round((i-e.left)*r.defaultCharacterWidth);r.lineWrapping&&t.height>r.defaultLineHeight*1.5&&(s+=Math.floor((n-t.top)/r.defaultLineHeight)*r.viewState.heightOracle.lineLength);let l=r.state.sliceDoc(t.from,t.to);return t.from+rm(l,s,r.state.tabSize)}function Xm(r,e,t){let i;if(r.nodeType!=3||e!=(i=r.nodeValue.length))return!1;for(let n=r.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return wr(r,i-1,i).getBoundingClientRect().left>t}function Dm(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=!i||!r.lineWrapping?null:r.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(s){let a=r.dom.getBoundingClientRect(),h=r.textDirectionAt(n.from),u=r.posAtCoords({x:t==(h==oe.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(u!=null)return _.cursor(u,t?-1:1)}let l=ze.find(r.docView,e.head),o=l?t?l.posAtEnd:l.posAtStart:t?n.to:n.from;return _.cursor(o,t?-1:1)}function Du(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=r.bidiSpans(n),l=r.textDirectionAt(n.from);for(let o=e,a=null;;){let h=vm(n,s,l,o,t),u=Su;if(!h){if(n.number==(t?r.state.doc.lines:1))return o;u=`
`,n=r.state.doc.line(n.number+(t?1:-1)),s=r.bidiSpans(n),h=_.cursor(t?n.from:n.to)}if(a){if(!a(u))return o}else{if(!i)return h;a=i(u)}o=h}}function Nm(r,e,t){let i=r.state.charCategorizer(e),n=i(t);return s=>{let l=i(s);return n==yt.Space&&(n=l),n==l}}function Em(r,e,t,i){let n=e.head,s=t?1:-1;if(n==(t?r.state.doc.length:0))return _.cursor(n,e.assoc);let l=e.goalColumn,o,a=r.contentDOM.getBoundingClientRect(),h=r.coordsAtPos(n),u=r.documentTop;if(h)l==null&&(l=h.left-a.left),o=s<0?h.top:h.bottom;else{let d=r.viewState.lineBlockAt(n);l==null&&(l=Math.min(a.right-a.left,r.defaultCharacterWidth*(n-d.from))),o=(s<0?d.top:d.bottom)+u}let f=a.left+l,c=i!=null?i:r.defaultLineHeight>>1;for(let d=0;;d+=10){let p=o+(c+d)*s,k=zu(r,{x:f,y:p},!1,s);if(p<a.top||p>a.bottom||(s<0?k<n:k>n))return _.cursor(k,e.assoc,void 0,l)}}function Ul(r,e,t){let i=r.state.facet(yu).map(n=>n(r));for(;;){let n=!1;for(let s of i)s.between(t.from-1,t.from+1,(l,o,a)=>{t.from>l&&t.from<o&&(t=e.from>t.from?_.cursor(l,1):_.cursor(o,-1),n=!0)});if(!n)return t}}class Bm{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in Qe){let i=Qe[t];e.contentDOM.addEventListener(t,n=>{!Bu(e,n)||this.ignoreDuringComposition(n)||t=="keydown"&&this.keydown(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,n)?n.preventDefault():i(e,n))}),this.registeredEvents.push(t)}this.notifiedFocused=e.hasFocus,L.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let n;this.customHandlers=[];for(let s of t)if(n=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:n});for(let l in n)this.registeredEvents.indexOf(l)<0&&l!="scroll"&&(this.registeredEvents.push(l),e.contentDOM.addEventListener(l,o=>{!Bu(e,o)||this.runCustomHandlers(l,e,o)&&o.preventDefault()}))}}runCustomHandlers(e,t,i){for(let n of this.customHandlers){let s=n.handlers[e];if(s)try{if(s.call(n.plugin,i,t)||i.defaultPrevented)return!0}catch(l){Kt(t.state,l)}}return!1}runScrollHandlers(e,t){for(let i of this.customHandlers){let n=i.handlers.scroll;if(n)try{n.call(i.plugin,t,e)}catch(s){Kt(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(L.android&&L.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return L.ios&&(i=Nu.find(n=>n.keyCode==t.keyCode))&&!(t.ctrlKey||t.altKey||t.metaKey)&&!t.synthetic?(this.pendingIOSKey=i,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Sr(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:L.safari&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!L.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Nu=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Eu=[16,17,18,20,91,92,224,225];class Mm{constructor(e,t,i,n){this.view=e,this.style=i,this.mustSelect=n,this.lastEvent=t;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(F.allowMultipleSelections)&&Lm(e,t),this.dragMove=Zm(e,t),this.dragging=Um(e,t)&&jl(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Lm(r,e){let t=r.state.facet(fu);return t.length?t[0](e):L.mac?e.metaKey:e.ctrlKey}function Zm(r,e){let t=r.state.facet(cu);return t.length?t[0](e):L.mac?!e.altKey:!e.ctrlKey}function Um(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let i=gn(r.root);if(i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let s=0;s<n.length;s++){let l=n[s];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function Bu(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=ue.get(t))&&i.ignoreEvent(e))return!1;return!0}const Qe=Object.create(null),Mu=L.ie&&L.ie_version<15||L.ios&&L.webkit_version<604;function jm(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),Lu(r,t.value)},50)}function Lu(r,e){let{state:t}=r,i,n=1,s=t.toText(e),l=s.lines==t.selection.ranges.length;if(Vl!=null&&t.selection.ranges.every(a=>a.empty)&&Vl==s.toString()){let a=-1;i=t.changeByRange(h=>{let u=t.doc.lineAt(h.from);if(u.from==a)return{range:h};a=u.from;let f=t.toText((l?s.line(n++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:f},range:_.cursor(h.from+f.length)}})}else l?i=t.changeByRange(a=>{let h=s.line(n++);return{changes:{from:a.from,to:a.to,insert:h.text},range:_.cursor(a.from+h.length)}}):i=t.replaceSelection(s);r.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Qe.keydown=(r,e)=>{r.inputState.setSelectionOrigin("select"),e.keyCode==27?r.inputState.lastEscPress=Date.now():Eu.indexOf(e.keyCode)<0&&(r.inputState.lastEscPress=0)};let Zu=0;Qe.touchstart=(r,e)=>{Zu=Date.now(),r.inputState.setSelectionOrigin("select.pointer")},Qe.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")},Qe.mousedown=(r,e)=>{if(r.observer.flush(),Zu>Date.now()-2e3&&jl(e)==1)return;let t=null;for(let i of r.state.facet(du))if(t=i(r,e),t)break;if(!t&&e.button==0&&(t=qm(r,e)),t){let i=r.root.activeElement!=r.contentDOM;i&&r.observer.ignore(()=>Vh(r.contentDOM)),r.inputState.startMouseSelection(new Mm(r,e,t,i))}};function Uu(r,e,t,i){if(i==1)return _.cursor(e,t);if(i==2)return _m(r.state,e,t);{let n=ze.find(r.docView,e),s=r.state.doc.lineAt(n?n.posAtEnd:e),l=n?n.posAtStart:s.from,o=n?n.posAtEnd:s.to;return o<r.state.doc.length&&o==s.to&&o++,_.range(l,o)}}let ju=(r,e)=>r>=e.top&&r<=e.bottom,Vu=(r,e,t)=>ju(e,t)&&r>=t.left&&r<=t.right;function Vm(r,e,t,i){let n=ze.find(r.docView,e);if(!n)return 1;let s=e-n.posAtStart;if(s==0)return 1;if(s==n.length)return-1;let l=n.coordsAt(s,-1);if(l&&Vu(t,i,l))return-1;let o=n.coordsAt(s,1);return o&&Vu(t,i,o)?1:l&&ju(i,l)?-1:1}function Gu(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:Vm(r,t,e.clientX,e.clientY)}}const Gm=L.ie&&L.ie_version<=11;let qu=null,Yu=0,Fu=0;function jl(r){if(!Gm)return r.detail;let e=qu,t=Fu;return qu=r,Fu=Date.now(),Yu=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(Yu+1)%3:1}function qm(r,e){let t=Gu(r,e),i=jl(e),n=r.state.selection,s=t,l=e;return{update(o){o.docChanged&&(t&&(t.pos=o.changes.mapPos(t.pos)),n=n.map(o.changes),l=null)},get(o,a,h){let u;if(l&&o.clientX==l.clientX&&o.clientY==l.clientY?u=s:(u=s=Gu(r,o),l=o),!u||!t)return n;let f=Uu(r,u.pos,u.bias,i);if(t.pos!=u.pos&&!a){let c=Uu(r,t.pos,t.bias,i),d=Math.min(c.from,f.from),p=Math.max(c.to,f.to);f=d<f.from?_.range(d,p):_.range(p,d)}return a?n.replaceRange(n.main.extend(f.from,f.to)):h?n.addRange(f):_.create([f])}}}Qe.dragstart=(r,e)=>{let{selection:{main:t}}=r.state,{mouseSelection:i}=r.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",r.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function Hu(r,e,t,i){if(!t)return;let n=r.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=r.inputState,l=i&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,o={from:n,insert:t},a=r.state.changes(l?[l,o]:o);r.focus(),r.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:l?"move.drop":"input.drop"})}Qe.drop=(r,e)=>{if(!e.dataTransfer)return;if(r.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),n=0,s=()=>{++n==t.length&&Hu(r,e,i.filter(l=>l!=null).join(r.state.lineBreak),!1)};for(let l=0;l<t.length;l++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(i[l]=o.result),s()},o.readAsText(t[l])}}else Hu(r,e,e.dataTransfer.getData("Text"),!0)},Qe.paste=(r,e)=>{if(r.state.readOnly)return e.preventDefault();r.observer.flush();let t=Mu?null:e.clipboardData;t?(Lu(r,t.getData("text/plain")),e.preventDefault()):jm(r)};function Ym(r,e){let t=r.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),r.focus()},50)}function Fm(r){let e=[],t=[],i=!1;for(let n of r.selection.ranges)n.empty||(e.push(r.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:s}of r.selection.ranges){let l=r.doc.lineAt(s);l.number>n&&(e.push(l.text),t.push({from:l.from,to:Math.min(r.doc.length,l.to+1)})),n=l.number}i=!0}return{text:e.join(r.lineBreak),ranges:t,linewise:i}}let Vl=null;Qe.copy=Qe.cut=(r,e)=>{let{text:t,ranges:i,linewise:n}=Fm(r.state);if(!t&&!n)return;Vl=n?t:null;let s=Mu?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):Ym(r,t),e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};function Ku(r){setTimeout(()=>{r.hasFocus!=r.inputState.notifiedFocused&&r.update([])},10)}Qe.focus=Ku,Qe.blur=r=>{r.observer.clearSelectionRange(),Ku(r)};function Ju(r,e){if(r.docView.compositionDeco.size){r.inputState.rapidCompositionStart=e;try{r.update([])}finally{r.inputState.rapidCompositionStart=!1}}}Qe.compositionstart=Qe.compositionupdate=r=>{r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0,r.docView.compositionDeco.size&&(r.observer.flush(),Ju(r,!0)))},Qe.compositionend=r=>{r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionFirstChange=null,setTimeout(()=>{r.inputState.composing<0&&Ju(r,!1)},50)},Qe.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()},Qe.beforeinput=(r,e)=>{var t;let i;if(L.chrome&&L.android&&(i=Nu.find(n=>n.inputType==e.inputType))&&(r.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let n=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>n+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}};const ef=["pre-wrap","normal","pre-line","break-spaces"];class Hm{constructor(){this.doc=Y.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return ef.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,s){let l=ef.indexOf(e)>-1,o=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.lineLength=n,o){this.heightSamples={};for(let a=0;a<s.length;a++){let h=s[a];h<0?a++:this.heightSamples[Math.floor(h*10)]=!0}}return o}}class Km{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ei{constructor(e,t,i,n,s){this.from=e,this.length=t,this.top=i,this.height=n,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new ei(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ie=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(ie||(ie={}));const vn=.001;class Me{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>vn&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Me.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let s=this;for(let l=n.length-1;l>=0;l--){let{fromA:o,toA:a,fromB:h,toB:u}=n[l],f=s.lineAt(o,ie.ByPosNoHeight,t,0,0),c=f.to>=a?f:s.lineAt(a,ie.ByPosNoHeight,t,0,0);for(u+=c.to-a,a=c.to;l>0&&f.from<=n[l-1].toA;)o=n[l-1].fromA,h=n[l-1].fromB,l--,o<f.from&&(f=s.lineAt(o,ie.ByPosNoHeight,t,0,0));h+=f.from-o,o=f.from;let d=Gl.build(i,e,h,u);s=s.replace(o,a,d)}return s.updateHeight(i,0)}static empty(){return new Ke(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,s=0;for(;;)if(t==i)if(n>s*2){let o=e[t-1];o.break?e.splice(--t,1,o.left,null,o.right):e.splice(--t,1,o.left,o.right),i+=1+o.break,n-=o.size}else if(s>n*2){let o=e[i];o.break?e.splice(i,1,o.left,null,o.right):e.splice(i,1,o.left,o.right),i+=2+o.break,s-=o.size}else break;else if(n<s){let o=e[t++];o&&(n+=o.size)}else{let o=e[--i];o&&(s+=o.size)}let l=0;return e[t-1]==null?(l=1,t--):e[t]==null&&(l=1,i++),new Jm(Me.of(e.slice(0,t)),l,Me.of(e.slice(i)))}}Me.prototype.size=1;class tf extends Me{constructor(e,t,i){super(e,t);this.type=i}blockAt(e,t,i,n){return new ei(n,this.length,i,this.height,this.type)}lineAt(e,t,i,n,s){return this.blockAt(0,i,n,s)}forEachLine(e,t,i,n,s,l){e<=s+this.length&&t>=s&&l(this.blockAt(0,i,n,s))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ke extends tf{constructor(e,t){super(e,t,ne.Text);this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof Ke||n instanceof $e&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof $e?n=new Ke(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):Me.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(e,n.heights[n.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class $e extends Me{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,n=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:n,lineHeight:this.height/(n-i+1)}}blockAt(e,t,i,n){let{firstLine:s,lastLine:l,lineHeight:o}=this.lines(t,n),a=Math.max(0,Math.min(l-s,Math.floor((e-i)/o))),{from:h,length:u}=t.line(s+a);return new ei(h,u,i+o*a,o,ne.Text)}lineAt(e,t,i,n,s){if(t==ie.ByHeight)return this.blockAt(e,i,n,s);if(t==ie.ByPosNoHeight){let{from:f,to:c}=i.lineAt(e);return new ei(f,c-f,0,0,ne.Text)}let{firstLine:l,lineHeight:o}=this.lines(i,s),{from:a,length:h,number:u}=i.lineAt(e);return new ei(a,h,n+o*(u-l),o,ne.Text)}forEachLine(e,t,i,n,s,l){let{firstLine:o,lineHeight:a}=this.lines(i,s);for(let h=Math.max(e,s),u=Math.min(s+this.length,t);h<=u;){let f=i.lineAt(h);h==e&&(n+=a*(f.number-o)),l(new ei(f.from,f.length,n,a,ne.Text)),n+=a,h=f.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let s=i[i.length-1];s instanceof $e?i[i.length-1]=new $e(s.length+n):i.push(null,new $e(n-1))}if(e>0){let s=i[0];s instanceof $e?i[0]=new $e(e+s.length):i.unshift(new $e(e-1),null)}return Me.of(i)}decomposeLeft(e,t){t.push(new $e(e-1),null)}decomposeRight(e,t){t.push(null,new $e(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let s=t+this.length;if(n&&n.from<=t+this.length&&n.more){let l=[],o=Math.max(t,n.from),a=-1,h=e.heightChanged;for(n.from>t&&l.push(new $e(n.from-t-1).updateHeight(e,t));o<=s&&n.more;){let f=e.doc.lineAt(o).length;l.length&&l.push(null);let c=n.heights[n.index++];a==-1?a=c:Math.abs(c-a)>=vn&&(a=-2);let d=new Ke(f,c);d.outdated=!1,l.push(d),o+=f+1}o<=s&&l.push(null,new $e(s-o).updateHeight(e,o));let u=Me.of(l);return e.heightChanged=h||a<0||Math.abs(u.height-this.height)>=vn||Math.abs(a-this.lines(e.doc,t).lineHeight)>=vn,u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Jm extends Me{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0));this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,s,n+this.left.length+this.break)}lineAt(e,t,i,n,s){let l=n+this.left.height,o=s+this.left.length+this.break,a=t==ie.ByHeight?e<l:e<o,h=a?this.left.lineAt(e,t,i,n,s):this.right.lineAt(e,t,i,l,o);if(this.break||(a?h.to<o:h.from>o))return h;let u=t==ie.ByPosNoHeight?ie.ByPosNoHeight:ie.ByPos;return a?h.join(this.right.lineAt(o,u,i,l,o)):this.left.lineAt(o,u,i,n,s).join(h)}forEachLine(e,t,i,n,s,l){let o=n+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,s,l),t>=a&&this.right.forEachLine(e,t,i,o,a,l);else{let h=this.lineAt(a,ie.ByPos,i,n,s);e<h.from&&this.left.forEachLine(e,h.from-1,i,n,s,l),h.to>=e&&h.from<=t&&l(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,o,a,l)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let s=[];e>0&&this.decomposeLeft(e,s);let l=s.length;for(let o of i)s.push(o);if(e>0&&rf(s,l-1),t<this.length){let o=s.length;this.decomposeRight(t,s),rf(s,o)}return Me.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Me.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:s,right:l}=this,o=t+s.length+this.break,a=null;return n&&n.from<=t+s.length&&n.more?a=s=s.updateHeight(e,t,i,n):s.updateHeight(e,t,i),n&&n.from<=o+l.length&&n.more?a=l=l.updateHeight(e,o,i,n):l.updateHeight(e,o,i),a?this.balanced(s,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function rf(r,e){let t,i;r[e]==null&&(t=r[e-1])instanceof $e&&(i=r[e+1])instanceof $e&&r.splice(e-1,3,new $e(t.length+1+i.length))}const e0=5;class Gl{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Ke?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Ke(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0;n<0&&(n=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new tf(s,n,i.type)):(s||n>=e0)&&this.addLineDeco(n,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ke(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new $e(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ke)return e;let t=new Ke(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==ne.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=ne.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Ke)&&!this.isCovered?this.nodes.push(new Ke(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof Ke&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let s=new Gl(i,e);return be.spans(t,i,n,s,0),s.finish(i)}}function t0(r,e,t){let i=new i0;return be.compare(r,e,t,i,0),i.changes}class i0{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&Xl(e,t,this.changes,5)}}function r0(r,e){let t=r.getBoundingClientRect(),i=Math.max(0,t.left),n=Math.min(innerWidth,t.right),s=Math.max(0,t.top),l=Math.min(innerHeight,t.bottom),o=r.ownerDocument.body;for(let a=r.parentNode;a&&a!=o;)if(a.nodeType==1){let h=a,u=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&u.overflow!="visible"){let f=h.getBoundingClientRect();i=Math.max(i,f.left),n=Math.min(n,f.right),s=Math.max(s,f.top),l=Math.min(l,f.bottom)}a=u.position=="absolute"||u.position=="fixed"?h.offsetParent:h.parentNode}else if(a.nodeType==11)a=a.host;else break;return{left:i-t.left,right:Math.max(i,n)-t.left,top:s-(t.top+e),bottom:Math.max(s,l)-(t.top+e)}}function n0(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class ql{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],s=t[i];if(n.from!=s.from||n.to!=s.to||n.size!=s.size)return!1}return!0}draw(e){return V.replace({widget:new s0(this.size,e)}).range(this.from,this.to)}}class s0 extends Gi{constructor(e,t){super();this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class nf{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new Hm,this.scaler=of,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=oe.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(Pr).filter(t=>typeof t!="function"),this.heightMap=Me.empty().applyChanges(this.stateDeco,Y.empty,this.heightOracle.setDoc(e.doc),[new _t(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=V.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:s,to:l})=>n>=s&&n<=l)){let{from:s,to:l}=this.lineBlockAt(n);e.push(new $n(s,l))}}this.viewports=e.sort((i,n)=>i.from-n.from),this.scaler=this.heightMap.height<=7e6?of:new a0(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Ar(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Pr).filter(h=>typeof h!="function");let n=e.changedRanges,s=_t.extendWithRanges(n,t0(i,this.stateDeco,e?e.changes:xe.empty(this.state.doc.length))),l=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=l&&(e.flags|=2);let o=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<o.from||t.range.head>o.to)||!this.viewportIsAppropriate(o))&&(o=this.getViewport(0,t));let a=!e.changes.empty||e.flags&2||o.from!=this.viewport.from||o.to!=this.viewport.to;this.viewport=o,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?oe.RTL:oe.LTR;let l=this.heightOracle.mustRefreshForWrapping(s),o=l||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,h=0,u=parseInt(i.paddingTop)||0,f=parseInt(i.paddingBottom)||0;(this.paddingTop!=u||this.paddingBottom!=f)&&(this.paddingTop=u,this.paddingBottom=f,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(o=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let c=(this.printing?n0:r0)(t,this.paddingTop),d=c.top-this.pixelViewport.top,p=c.bottom-this.pixelViewport.bottom;this.pixelViewport=c;let k=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(k!=this.inView&&(this.inView=k,k&&(o=!0)),!this.inView)return 0;let w=t.clientWidth;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=w,this.editorHeight=e.scrollDOM.clientHeight,a|=8),o){let P=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(P)&&(l=!0),l||n.lineWrapping&&Math.abs(w-this.contentDOMWidth)>n.charWidth){let{lineHeight:v,charWidth:m}=e.docView.measureTextSize();l=n.refresh(s,v,m,w/m,P),l&&(e.docView.minWidth=0,a|=8)}d>0&&p>0?h=Math.max(d,p):d<0&&p<0&&(h=Math.min(d,p)),n.heightChanged=!1;for(let v of this.viewports){let m=v.from==this.viewport.from?P:e.docView.measureVisibleLineHeights(v);this.heightMap=this.heightMap.updateHeight(n,0,l,new Km(v.from,m))}n.heightChanged&&(a|=2)}let S=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return S&&(this.viewport=this.getViewport(h,this.scrollTarget)),this.updateForViewport(),(a&2||S)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,s=this.state.doc,{visibleTop:l,visibleBottom:o}=this,a=new $n(n.lineAt(l-i*1e3,ie.ByHeight,s,0,0).from,n.lineAt(o+(1-i)*1e3,ie.ByHeight,s,0,0).to);if(t){let{head:h}=t.range;if(h<a.from||h>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=n.lineAt(h,ie.ByPos,s,0,0),c;t.y=="center"?c=(f.top+f.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&h<a.from?c=f.top:c=f.bottom-u,a=new $n(n.lineAt(c-1e3/2,ie.ByHeight,s,0,0).from,n.lineAt(c+u+1e3/2,ie.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new $n(this.heightMap.lineAt(i,ie.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(n,ie.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,ie.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(t,ie.ByPos,this.state.doc,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||n<=l-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=o+Math.max(10,Math.min(i,250)))&&n>l-2*1e3&&s<o+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new ql(t.mapPos(n.from),t.mapPos(n.to),n.size));return i}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=oe.LTR)return t;for(let i of this.viewportLines){if(i.length<4e3)continue;let n=l0(i.from,i.to,this.stateDeco);if(n.total<4e3)continue;let s,l;if(this.heightOracle.lineWrapping){let h=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;s=Tn(n,(this.visibleTop-i.top-h)/i.height),l=Tn(n,(this.visibleBottom-i.top+h)/i.height)}else{let h=n.total*this.heightOracle.charWidth,u=2e3*this.heightOracle.charWidth;s=Tn(n,(this.pixelViewport.left-u)/h),l=Tn(n,(this.pixelViewport.right+u)/h)}let o=[];s>i.from&&o.push({from:i.from,to:s}),l<i.to&&o.push({from:l,to:i.to});let a=this.state.selection.main;a.from>=i.from&&a.from<=i.to&&lf(o,a.from-10,a.from+10),!a.empty&&a.to>=i.from&&a.to<=i.to&&lf(o,a.to-10,a.to+10);for(let{from:h,to:u}of o)u-h>1e3&&t.push(o0(e,f=>f.from>=i.from&&f.to<=i.to&&Math.abs(f.from-h)<1e3&&Math.abs(f.to-u)<1e3)||new ql(h,u,this.gapSize(i,h,u,n)))}return t}gapSize(e,t,i,n){let s=sf(n,i)-sf(n,t);return this.heightOracle.lineWrapping?e.height*s:n.total*this.heightOracle.charWidth*s}updateLineGaps(e){ql.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=V.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];be.spans(e,this.viewport.from,this.viewport.to,{span(n,s){t.push({from:n,to:s})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((n,s)=>n.from!=t[s].from||n.to!=t[s].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ar(this.heightMap.lineAt(e,ie.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Ar(this.heightMap.lineAt(this.scaler.fromDOM(e),ie.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Ar(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class $n{constructor(e,t){this.from=e,this.to=t}}function l0(r,e,t){let i=[],n=r,s=0;return be.spans(t,r,e,{span(){},point(l,o){l>n&&(i.push({from:n,to:l}),s+=l-n),n=o}},20),n<e&&(i.push({from:n,to:e}),s+=e-n),{total:s,ranges:i}}function Tn({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(r*t);for(let n=0;;n++){let{from:s,to:l}=e[n],o=l-s;if(i<=o)return s+i;i-=o}}function sf(r,e){let t=0;for(let{from:i,to:n}of r.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/r.total}function lf(r,e,t){for(let i=0;i<r.length;i++){let n=r[i];if(n.from<t&&n.to>e){let s=[];n.from<e&&s.push({from:n.from,to:e}),n.to>t&&s.push({from:t,to:n.to}),r.splice(i,1,...s),i+=s.length-1}}}function o0(r,e){for(let t of r)if(e(t))return t}const of={toDOM(r){return r},fromDOM(r){return r},scale:1};class a0{constructor(e,t,i){let n=0,s=0,l=0;this.viewports=i.map(({from:o,to:a})=>{let h=t.lineAt(o,ie.ByPos,e,0,0).top,u=t.lineAt(a,ie.ByPos,e,0,0).bottom;return n+=u-h,{from:o,to:a,top:h,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let o of this.viewports)o.domTop=l+(o.top-s)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return n+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,n=s.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-n)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,n=s.domBottom}}}function Ar(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),i=e.toDOM(r.bottom);return new ei(r.from,r.length,t,i-t,Array.isArray(r.type)?r.type.map(n=>Ar(n,e)):r.type)}const Pn=U.define({combine:r=>r.join(" ")}),Yl=U.define({combine:r=>r.indexOf(!0)>-1}),Fl=qt.newName(),af=qt.newName(),hf=qt.newName(),uf={"&light":"."+af,"&dark":"."+hf};function Hl(r,e,t){return new qt(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return r;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):r+" "+i}})}const h0=Hl("."+Fl,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},uf),u0={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Kl=L.ie&&L.ie_version<=11;class f0{constructor(e,t,i){this.view=e,this.onChange=t,this.onScrollChanged=i,this.active=!1,this.selectionRange=new dm,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let s of n)this.queue.push(s);(L.ie&&L.ie_version<=11||L.ios&&e.composing)&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),Kl&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,i=this.selectionRange;if(t.state.facet($r)?t.root.activeElement!=this.dom:!Sl(t.dom,i))return;let n=i.anchorNode&&t.docView.nearest(i.anchorNode);n&&n.ignoreEvent(e)||((L.ie&&L.ie_version<=11||L.android&&L.chrome)&&!t.state.selection.main.empty&&i.focusNode&&mn(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=gn(e),i=L.safari&&e.nodeType==11&&um()==this.view.contentDOM&&c0(this.view)||t;return this.selectionRange.eq(i)?!1:(this.selectionRange.setRange(i),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,u0),Kl&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),Kl&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame(()=>{let i=this.delayedAndroidKey;this.delayedAndroidKey=null;let n=this.view.state;this.readSelectionRange(),Sr(this.view.contentDOM,i.key,i.keyCode)?this.processRecords():this.flush(),this.view.state==n&&this.view.update([])}),(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let s of e){let l=this.readMutation(s);!l||(l.typeOver&&(n=!0),t==-1?{from:t,to:i}=l:(t=Math.min(l.from,t),i=Math.max(l.to,i)))}return{from:t,to:i,typeOver:n}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:i,typeOver:n}=this.processRecords(),s=this.selectionChanged&&Sl(this.dom,this.selectionRange);if(t<0&&!s)return;this.selectionChanged=!1;let l=this.view.state;this.onChange(t,i,n),this.view.state==l&&this.view.update([])}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=ff(t,e.previousSibling||e.target.previousSibling,-1),n=ff(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resize)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function ff(r,e,t){for(;e;){let i=ue.get(e);if(i&&i.parent==r)return i;let n=e.parentNode;e=n!=r.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function c0(r){let e=null;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(r.contentDOM.addEventListener("beforeinput",t,!0),document.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,n=e.startOffset,s=e.endContainer,l=e.endOffset,o=r.docView.domAtPos(r.state.selection.main.anchor);return mn(o.node,o.offset,s,l)&&([i,n,s,l]=[s,l,i,n]),{anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:l}}function d0(r,e,t,i){let n,s,l=r.state.selection.main;if(e>-1){let o=r.docView.domBoundsAround(e,t,0);if(!o||r.state.readOnly)return;let{from:a,to:h}=o,u=r.docView.impreciseHead||r.docView.impreciseAnchor?[]:O0(r),f=new vu(u,r.state);f.readRange(o.startDOM,o.endDOM);let c=l.from,d=null;(r.inputState.lastKeyCode===8&&r.inputState.lastKeyTime>Date.now()-100||L.android&&f.text.length<h-a)&&(c=l.to,d="end");let p=p0(r.state.doc.sliceString(a,h,Jt),f.text,c-a,d);p&&(L.chrome&&r.inputState.lastKeyCode==13&&p.toB==p.from+2&&f.text.slice(p.from,p.toB)==Jt+Jt&&p.toB--,n={from:a+p.from,to:a+p.toA,insert:Y.of(f.text.slice(p.from,p.toB).split(Jt))}),s=g0(u,a)}else if(r.hasFocus||!r.state.facet($r)){let o=r.observer.selectionRange,{impreciseHead:a,impreciseAnchor:h}=r.docView,u=a&&a.node==o.focusNode&&a.offset==o.focusOffset||!Ui(r.contentDOM,o.focusNode)?r.state.selection.main.head:r.docView.posFromDOM(o.focusNode,o.focusOffset),f=h&&h.node==o.anchorNode&&h.offset==o.anchorOffset||!Ui(r.contentDOM,o.anchorNode)?r.state.selection.main.anchor:r.docView.posFromDOM(o.anchorNode,o.anchorOffset);(u!=l.head||f!=l.anchor)&&(s=_.single(f,u))}if(!(!n&&!s)){if(!n&&i&&!l.empty&&s&&s.main.empty?n={from:l.from,to:l.to,insert:r.state.doc.slice(l.from,l.to)}:n&&n.from>=l.from&&n.to<=l.to&&(n.from!=l.from||n.to!=l.to)&&l.to-l.from-(n.to-n.from)<=4?n={from:l.from,to:l.to,insert:r.state.doc.slice(l.from,n.from).append(n.insert).append(r.state.doc.slice(n.to,l.to))}:L.mac&&n&&n.from==n.to&&n.from==l.head-1&&n.insert.toString()=="."&&(n={from:l.from,to:l.to,insert:Y.of([" "])}),n){let o=r.state;if(L.ios&&r.inputState.flushIOSKey(r)||L.android&&(n.from==l.from&&n.to==l.to&&n.insert.length==1&&n.insert.lines==2&&Sr(r.contentDOM,"Enter",13)||n.from==l.from-1&&n.to==l.to&&n.insert.length==0&&Sr(r.contentDOM,"Backspace",8)||n.from==l.from&&n.to==l.to+1&&n.insert.length==0&&Sr(r.contentDOM,"Delete",46)))return;let a=n.insert.toString();if(r.state.facet(Ou).some(f=>f(r,n.from,n.to,a)))return;r.inputState.composing>=0&&r.inputState.composing++;let h;if(n.from>=l.from&&n.to<=l.to&&n.to-n.from>=(l.to-l.from)/3&&(!s||s.main.empty&&s.main.from==n.from+n.insert.length)&&r.inputState.composing<0){let f=l.from<n.from?o.sliceDoc(l.from,n.from):"",c=l.to>n.to?o.sliceDoc(n.to,l.to):"";h=o.replaceSelection(r.state.toText(f+n.insert.sliceString(0,void 0,r.state.lineBreak)+c))}else{let f=o.changes(n),c=s&&!o.selection.main.eq(s.main)&&s.main.to<=f.newLength?s.main:void 0;if(o.selection.ranges.length>1&&r.inputState.composing>=0&&n.to<=l.to&&n.to>=l.to-10){let d=r.state.sliceDoc(n.from,n.to),p=Au(r)||r.state.doc.lineAt(l.head),k=l.to-n.to,w=l.to-l.from;h=o.changeByRange(S=>{if(S.from==l.from&&S.to==l.to)return{changes:f,range:c||S.map(f)};let P=S.to-k,v=P-d.length;if(S.to-S.from!=w||r.state.sliceDoc(v,P)!=d||p&&S.to>=p.from&&S.from<=p.to)return{range:S};let m=o.changes({from:v,to:P,insert:n.insert}),Q=S.to-l.to;return{changes:m,range:c?_.range(Math.max(0,c.anchor+Q),Math.max(0,c.head+Q)):S.map(m)}})}else h={changes:f,selection:c&&o.selection.replaceRange(c)}}let u="input.type";r.composing&&(u+=".compose",r.inputState.compositionFirstChange&&(u+=".start",r.inputState.compositionFirstChange=!1)),r.dispatch(h,{scrollIntoView:!0,userEvent:u})}else if(s&&!s.main.eq(l)){let o=!1,a="select";r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(o=!0),a=r.inputState.lastSelectionOrigin),r.dispatch({selection:s,scrollIntoView:o,userEvent:a})}}}function p0(r,e,t,i){let n=Math.min(r.length,e.length),s=0;for(;s<n&&r.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==n&&r.length==e.length)return null;let l=r.length,o=e.length;for(;l>0&&o>0&&r.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(i=="end"){let a=Math.max(0,s-Math.min(l,o));t-=l+a-s}return l<s&&r.length<e.length?(s-=t<=s&&t>=l?s-t:0,o=s+(o-l),l=s):o<s&&(s-=t<=s&&t>=o?s-t:0,l=s+(l-o),o=s),{from:s,toA:l,toB:o}}function O0(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:s}=r.observer.selectionRange;return t&&(e.push(new Tu(t,i)),(n!=t||s!=i)&&e.push(new Tu(n,s))),e}function g0(r,e){if(r.length==0)return null;let t=r[0].pos,i=r.length==2?r[1].pos:t;return t>-1&&i>-1?_.single(t+e,i+e):null}class G{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this.root=e.root||pm(e.parent)||document,this.viewState=new nf(e.state||F.create()),this.plugins=this.state.facet(Tr).map(t=>new El(t));for(let t of this.plugins)t.update(this);this.observer=new f0(this,(t,i,n)=>{d0(this,t,i,n)},t=>{this.inputState.runScrollHandlers(this,t),this.observer.intersecting&&this.measure()}),this.inputState=new Bm(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Pu(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof me?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,s=this.state;for(let o of e){if(o.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=o.state}if(this.destroyed){this.viewState.state=s;return}if(s.facet(F.phrases)!=this.state.facet(F.phrases))return this.setState(s);n=Sn.create(this,s,e);let l=this.viewState.scrollTarget;try{this.updateState=2;for(let o of e){if(l&&(l=l.map(o.changes)),o.scrollIntoView){let{main:a}=o.state.selection;l=new wn(a.empty?a:_.cursor(a.head,a.head>a.anchor?-1:1))}for(let a of o.effects)a.is(mu)&&(l=a.value)}this.viewState.update(n,l),this.bidiCache=Cn.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(Cr)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(o=>o.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(Pn)!=n.state.facet(Pn)&&(this.viewState.mustMeasureContent=!0),(t||i||l||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!n.empty)for(let o of this.state.facet(Nl))o(n)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new nf(e),this.plugins=e.facet(Tr).map(i=>new El(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new Pu(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Tr),i=e.state.facet(Tr);if(t!=i){let n=[];for(let s of i){let l=t.indexOf(s);if(l<0)n.push(new El(s));else{let o=this.plugins[l];o.mustUpdate=e,n.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=n,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let i=0;;i++){this.updateState=1;let n=this.viewport,s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(i>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let l=[];s&4||([this.measureRequests,l]=[l,this.measureRequests]);let o=l.map(f=>{try{return f.read(this)}catch(c){return Kt(this.state,c),cf}}),a=Sn.create(this,this.state,[]),h=!1,u=!1;a.flags|=s,t?t.flags|=s:t=a,this.updateState=2,a.empty||(this.updatePlugins(a),this.inputState.update(a),this.updateAttrs(),h=this.docView.update(a));for(let f=0;f<l.length;f++)if(o[f]!=cf)try{let c=l[f];c.write&&c.write(o[f],this)}catch(c){Kt(this.state,c)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=!0),h&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!u&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let i of this.state.facet(Nl))i(t)}get themeClasses(){return Fl+" "+(this.state.facet(Yl)?hf:af)+" "+this.state.facet(Pn)}updateAttrs(){let e=df(this,bu,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet($r)?"true":"false",class:"cm-content",style:`${L.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),df(this,ku,t);let i=this.observer.ignore(()=>{let n=zl(this.contentDOM,this.contentAttrs,t),s=zl(this.dom,this.editorAttrs,e);return n||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(G.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Cr),qt.mount(this.root,this.styleModules.concat(h0).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Ul(this,e,Du(this,e,t,i))}moveByGroup(e,t){return Ul(this,e,Du(this,e,t,i=>Nm(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return Dm(this,e,t,i)}moveVertically(e,t,i){return Ul(this,e,Em(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),zu(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),s=this.bidiSpans(n),l=s[qi.find(s,e-n.from,-1,t)];return kn(i,l.dir==oe.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(gu)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>m0)return wu(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let i=Sm(e.text,t);return this.bidiCache.push(new Cn(e.from,e.to,t,i)),i}get hasFocus(){var e;return(document.hasFocus()||L.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Vh(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return mu.of(new wn(typeof e=="number"?_.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Be.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=qt.newName(),n=[Pn.of(i),Cr.of(Hl(`.${i}`,e))];return t&&t.dark&&n.push(Yl.of(!0)),n}static baseTheme(e){return hn.lowest(Cr.of(Hl("."+Fl,e,uf)))}}G.styleModule=Cr,G.inputHandler=Ou,G.perLineTextDirection=gu,G.exceptionSink=pu,G.updateListener=Nl,G.editable=$r,G.mouseSelectionStyle=du,G.dragMovesSelection=cu,G.clickAddsSelectionRange=fu,G.decorations=Pr,G.atomicRanges=yu,G.scrollMargins=xu,G.darkTheme=Yl,G.contentAttributes=ku,G.editorAttributes=bu,G.lineWrapping=G.contentAttributes.of({class:"cm-lineWrapping"}),G.announce=he.define();const m0=4096,cf={};class Cn{constructor(e,t,i,n){this.from=e,this.to=t,this.dir=i,this.order=n}static update(e,t){if(t.empty)return e;let i=[],n=e.length?e[e.length-1].dir:oe.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let l=e[s];l.dir==n&&!t.touchesRange(l.from,l.to)&&i.push(new Cn(t.mapPos(l.from,1),t.mapPos(l.to,-1),l.dir,l.order))}return i}}function df(r,e,t){for(let i=r.state.facet(e),n=i.length-1;n>=0;n--){let s=i[n],l=typeof s=="function"?s(r):s;l&&_l(l,t)}return t}const b0=L.mac?"mac":L.windows?"win":L.linux?"linux":"key";function k0(r,e){const t=r.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let n,s,l,o;for(let a=0;a<t.length-1;++a){const h=t[a];if(/^(cmd|meta|m)$/i.test(h))o=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))l=!0;else if(/^mod$/i.test(h))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return n&&(i="Alt-"+i),s&&(i="Ctrl-"+i),o&&(i="Meta-"+i),l&&(i="Shift-"+i),i}function Jl(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}const y0=G.domEventHandlers({keydown(r,e){return S0(x0(e.state),r,e,"editor")}}),An=U.define({enables:y0}),pf=new WeakMap;function x0(r){let e=r.facet(An),t=pf.get(e);return t||pf.set(e,t=w0(e.reduce((i,n)=>i.concat(n),[]))),t}let ti=null;const Q0=4e3;function w0(r,e=b0){let t=Object.create(null),i=Object.create(null),n=(l,o)=>{let a=i[l];if(a==null)i[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},s=(l,o,a,h)=>{let u=t[l]||(t[l]=Object.create(null)),f=o.split(/ (?!$)/).map(p=>k0(p,e));for(let p=1;p<f.length;p++){let k=f.slice(0,p).join(" ");n(k,!0),u[k]||(u[k]={preventDefault:!0,commands:[w=>{let S=ti={view:w,prefix:k,scope:l};return setTimeout(()=>{ti==S&&(ti=null)},Q0),!0}]})}let c=f.join(" ");n(c,!1);let d=u[c]||(u[c]={preventDefault:!1,commands:[]});d.commands.push(a),h&&(d.preventDefault=!0)};for(let l of r){let o=l[e]||l.key;if(!!o)for(let a of l.scope?l.scope.split(" "):["editor"])s(a,o,l.run,l.preventDefault),l.shift&&s(a,"Shift-"+o,l.shift,l.preventDefault)}return t}function S0(r,e,t,i){let n=hm(e),s=n.length==1&&n!=" ",l="",o=!1;ti&&ti.view==t&&ti.scope==i&&(l=ti.prefix+" ",(o=Eu.indexOf(e.keyCode)<0)&&(ti=null));let a=f=>{if(f){for(let c of f.commands)if(c(t))return!0;f.preventDefault&&(o=!0)}return!1},h=r[i],u;if(h){if(a(h[l+Jl(n,e,!s)]))return!0;if(s&&(e.shiftKey||e.altKey||e.metaKey)&&(u=Yt[e.keyCode])&&u!=n){if(a(h[l+Jl(u,e,!0)]))return!0}else if(s&&e.shiftKey&&a(h[l+Jl(n,e,!0)]))return!0}return o}const Of=!L.ios,Rr=U.define({combine(r){return Ih(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function v0(r={}){return[Rr.of(r),$0,T0]}class gf{constructor(e,t,i,n,s){this.left=e,this.top=t,this.width=i,this.height=n,this.className=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const $0=Be.fromClass(class{constructor(r){this.view=r,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=r.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=r.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),r.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Rr).cursorBlinkRate+"ms"}update(r){let e=r.startState.facet(Rr)!=r.state.facet(Rr);(e||r.selectionSet||r.geometryChanged||r.viewportChanged)&&this.view.requestMeasure(this.measureReq),r.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:r}=this.view,e=r.facet(Rr),t=r.selection.ranges.map(n=>n.empty?[]:P0(this.view,n)).reduce((n,s)=>n.concat(s)),i=[];for(let n of r.selection.ranges){let s=n==r.selection.main;if(n.empty?!s||Of:e.drawRangeCursor){let l=C0(this.view,n,s);l&&i.push(l)}}return{rangePieces:t,cursors:i}}drawSel({rangePieces:r,cursors:e}){if(r.length!=this.rangePieces.length||r.some((t,i)=>!t.eq(this.rangePieces[i]))){this.selectionLayer.textContent="";for(let t of r)this.selectionLayer.appendChild(t.draw());this.rangePieces=r}if(e.length!=this.cursors.length||e.some((t,i)=>!t.eq(this.cursors[i]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(const i of e)this.cursorLayer.appendChild(i.draw())}else e.forEach((i,n)=>i.adjust(t[n]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),mf={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Of&&(mf[".cm-line"].caretColor="transparent !important");const T0=hn.highest(G.theme(mf));function bf(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==oe.LTR?e.left:e.right-r.scrollDOM.clientWidth)-r.scrollDOM.scrollLeft,top:e.top-r.scrollDOM.scrollTop}}function kf(r,e,t){let i=_.cursor(e);return{from:Math.max(t.from,r.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,r.moveToLineBoundary(i,!0,!0).from),type:ne.Text}}function yf(r,e){let t=r.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==ne.Text))return i}return t}function P0(r,e){if(e.to<=r.viewport.from||e.from>=r.viewport.to)return[];let t=Math.max(e.from,r.viewport.from),i=Math.min(e.to,r.viewport.to),n=r.textDirection==oe.LTR,s=r.contentDOM,l=s.getBoundingClientRect(),o=bf(r),a=window.getComputedStyle(s.firstChild),h=l.left+parseInt(a.paddingLeft)+Math.min(0,parseInt(a.textIndent)),u=l.right-parseInt(a.paddingRight),f=yf(r,t),c=yf(r,i),d=f.type==ne.Text?f:null,p=c.type==ne.Text?c:null;if(r.lineWrapping&&(d&&(d=kf(r,t,d)),p&&(p=kf(r,i,p))),d&&p&&d.from==p.from)return w(S(e.from,e.to,d));{let v=d?S(e.from,null,d):P(f,!1),m=p?S(null,e.to,p):P(c,!0),Q=[];return(d||f).to<(p||c).from-1?Q.push(k(h,v.bottom,u,m.top)):v.bottom<m.top&&r.elementAtHeight((v.bottom+m.top)/2).type==ne.Text&&(v.bottom=m.top=(v.bottom+m.top)/2),w(v).concat(Q).concat(w(m))}function k(v,m,Q,O){return new gf(v-o.left,m-o.top-.01,Q-v,O-m+.01,"cm-selectionBackground")}function w({top:v,bottom:m,horizontal:Q}){let O=[];for(let g=0;g<Q.length;g+=2)O.push(k(Q[g],v,Q[g+1],m));return O}function S(v,m,Q){let O=1e9,g=-1e9,T=[];function y(C,A,B,N,z){let K=r.coordsAtPos(C,C==Q.to?-2:2),D=r.coordsAtPos(B,B==Q.from?2:-2);O=Math.min(K.top,D.top,O),g=Math.max(K.bottom,D.bottom,g),z==oe.LTR?T.push(n&&A?h:K.left,n&&N?u:D.right):T.push(!n&&N?h:D.left,!n&&A?u:K.right)}let b=v!=null?v:Q.from,$=m!=null?m:Q.to;for(let C of r.visibleRanges)if(C.to>b&&C.from<$)for(let A=Math.max(C.from,b),B=Math.min(C.to,$);;){let N=r.state.doc.lineAt(A);for(let z of r.bidiSpans(N)){let K=z.from+N.from,D=z.to+N.from;if(K>=B)break;D>A&&y(Math.max(K,A),v==null&&K<=b,Math.min(D,B),m==null&&D>=$,z.dir)}if(A=N.to+1,A>=B)break}return T.length==0&&y(b,v==null,$,m==null,r.textDirection),{top:O,bottom:g,horizontal:T}}function P(v,m){let Q=l.top+(m?v.top:v.bottom);return{top:Q,bottom:Q,horizontal:[]}}}function C0(r,e,t){let i=r.coordsAtPos(e.head,e.assoc||1);if(!i)return null;let n=bf(r);return new gf(i.left-n.left,i.top-n.top,-1,i.bottom-i.top,t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}function xf(r,e,t,i,n){e.lastIndex=0;for(let s=r.iterRange(t,i),l=t,o;!s.next().done;l+=s.value.length)if(!s.lineBreak)for(;o=e.exec(s.value);)n(l+o.index,l+o.index+o[0].length,o)}function A0(r,e){let t=r.visibleRanges;if(t.length==1&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let i=[];for(let{from:n,to:s}of t)n=Math.max(r.state.doc.lineAt(n).from,n-e),s=Math.min(r.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=s:i.push({from:n,to:s});return i}class Qf{constructor(e){let{regexp:t,decoration:i,boundary:n,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=t,this.getDeco=typeof i=="function"?i:()=>i,this.boundary=n,this.maxLength=s}createDeco(e){let t=new Gt;for(let{from:i,to:n}of A0(e,this.maxLength))xf(e.state.doc,this.regexp,i,n,(s,l,o)=>t.add(s,l,this.getDeco(o,e,s)));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((s,l,o,a)=>{a>e.view.viewport.from&&o<e.view.viewport.to&&(i=Math.min(o,i),n=Math.max(a,n))}),e.viewportChanged||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let s of e.visibleRanges){let l=Math.max(s.from,i),o=Math.min(s.to,n);if(o>l){let a=e.state.doc.lineAt(l),h=a.to<o?e.state.doc.lineAt(o):a,u=Math.max(s.from,a.from),f=Math.min(s.to,h.to);if(this.boundary){for(;l>a.from;l--)if(this.boundary.test(a.text[l-1-a.from])){u=l;break}for(;o<h.to;o++)if(this.boundary.test(h.text[o-h.from])){f=o;break}}let c=[],d;if(a==h)for(this.regexp.lastIndex=u-a.from;(d=this.regexp.exec(a.text))&&d.index<f-a.from;){let p=d.index+a.from;c.push(this.getDeco(d,e,p).range(p,p+d[0].length))}else xf(e.state.doc,this.regexp,u,f,(p,k,w)=>c.push(this.getDeco(w,e,p).range(p,k)));t=t.update({filterFrom:u,filterTo:f,filter:(p,k)=>p<u||k>f,add:c})}}return t}}class R0 extends Gi{constructor(e){super();this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}ignoreEvent(){return!1}}function W0(r){return Be.fromClass(class{constructor(e){this.view=e,this.placeholder=V.set([V.widget({widget:new R0(r),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?V.none:this.placeholder}},{decorations:e=>e.decorations})}class Yi extends mi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Yi.prototype.elementClass="",Yi.prototype.toDOM=void 0,Yi.prototype.mapMode=_e.TrackBefore,Yi.prototype.startSide=Yi.prototype.endSide=-1,Yi.prototype.point=!0;const _0=1024;let I0=0;class eo{constructor(e,t){this.from=e,this.to=t}}class ee{constructor(e={}){this.id=I0++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=nt.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}ee.closedBy=new ee({deserialize:r=>r.split(" ")}),ee.openedBy=new ee({deserialize:r=>r.split(" ")}),ee.group=new ee({deserialize:r=>r.split(" ")}),ee.contextHash=new ee({perNode:!0}),ee.lookAhead=new ee({perNode:!0}),ee.mounted=new ee({perNode:!0});const z0=Object.create(null);class nt{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):z0,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new nt(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ee.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(ee.group),s=-1;s<(n?n.length:0);s++){let l=t[s<0?i.name:n[s]];if(l)return l}}}}nt.none=new nt("",Object.create(null),0,8);const Rn=new WeakMap,wf=new WeakMap;var Pe;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Pe||(Pe={}));class Ce{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=this.prop(ee.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new In(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Rn.get(this)||this.topNode,s=new In(n);return s.moveTo(e,t),Rn.set(this,s._tree),s}get topNode(){return new It(this,0,0,null)}resolve(e,t=0){let i=Fi(Rn.get(this)||this.topNode,e,t,!1);return Rn.set(this,i),i}resolveInner(e,t=0){let i=Fi(wf.get(this)||this.topNode,e,t,!0);return wf.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let l=this.cursor((e.mode||0)|Pe.IncludeAnonymous);;){let o=!1;if(l.from<=s&&l.to>=n&&(l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;o=!0}for(;o&&i&&!l.type.isAnonymous&&i(l),!l.nextSibling();){if(!l.parent())return;o=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:ro(nt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new Ce(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new Ce(nt.none,t,i,n)))}static build(e){return D0(e)}}Ce.empty=new Ce(nt.none,[],[],0);class to{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new to(this.buffer,this.index)}}class yi{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return nt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let l=[];for(;e<i;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,t,i,n,s){let{buffer:l}=this,o=-1;for(let a=e;a!=t&&!(Sf(s,n,l[a+1],l[a+2])&&(o=a,i>0));a=l[a+3]);return o}slice(e,t,i,n){let s=this.buffer,l=new Uint16Array(t-e);for(let o=e,a=0;o<t;)l[a++]=s[o++],l[a++]=s[o++]-i,l[a++]=s[o++]-i,l[a++]=s[o++]-e;return new yi(l,n-i,this.set)}}function Sf(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function vf(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function Fi(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let l=!i&&r instanceof It&&r.index<0?null:r.parent;if(!l)return r;r=l}let s=i?0:Pe.IgnoreOverlays;if(i)for(let l=r,o=l.parent;o;l=o,o=l.parent)l instanceof It&&l.index<0&&((n=o.enter(e,t,s))===null||n===void 0?void 0:n.from)!=l.from&&(r=o);for(;;){let l=r.enter(e,t,s);if(!l)return r;r=l}}class It{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,h=t>0?o.length:-1;e!=h;e+=t){let u=o[e],f=a[e]+l.from;if(!!Sf(n,i,f,f+u.length)){if(u instanceof yi){if(s&Pe.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new ii(new X0(l,u,e,f),null,c)}else if(s&Pe.IncludeAnonymous||!u.type.isAnonymous||io(u)){let c;if(!(s&Pe.IgnoreMounts)&&u.props&&(c=u.prop(ee.mounted))&&!c.overlay)return new It(c.tree,f,e,l);let d=new It(u,f,e,l);return s&Pe.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&Pe.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+t:e=t<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Pe.IgnoreOverlays)&&(n=this._tree.prop(ee.mounted))&&n.overlay){let s=e-this.from;for(let{from:l,to:o}of n.overlay)if((t>0?l<=s:l<s)&&(t<0?o>=s:o>s))return new It(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new In(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Fi(this,e,t,!1)}resolveInner(e,t=0){return Fi(this,e,t,!0)}enterUnfinishedNodesBefore(e){return vf(this,e)}getChild(e,t=null,i=null){let n=Wn(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return Wn(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return _n(this,e)}}function Wn(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function _n(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class X0{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class ii{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new ii(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Pe.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new ii(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ii(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ii(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new In(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let l=i.buffer[this.index+1],o=i.buffer[this.index+2];e.push(i.slice(n,s,l,o)),t.push(0)}return new Ce(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Fi(this,e,t,!1)}resolveInner(e,t=0){return Fi(this,e,t,!0)}enterUnfinishedNodesBefore(e){return vf(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=Wn(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return Wn(this,e,t,i)}get node(){return this}matchContext(e){return _n(this,e)}}class In{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof It)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof It?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Pe.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Pe.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Pe.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,l=e<0?-1:i._tree.children.length;s!=l;s+=e){let o=i._tree.children[s];if(this.mode&Pe.IncludeAnonymous||o instanceof yi||!o.type.isAnonymous||io(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==n){if(n==this.index)return l;t=l,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new ii(this.buffer,t,this.stack[n]);return this.bufferNode=new ii(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return _n(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return _n(this.node,e,n);let l=i[t.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[n]&&e[n]!=l.name)return!1;n--}}return!0}}function io(r){return r.children.some(e=>e instanceof yi||!e.type.isAnonymous||io(e))}function D0(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=_0,reused:s=[],minRepeatType:l=i.types.length}=r,o=Array.isArray(t)?new to(t,t.length):t,a=i.types,h=0,u=0;function f(m,Q,O,g,T){let{id:y,start:b,end:$,size:C}=o,A=u;for(;C<0;)if(o.next(),C==-1){let D=s[y];O.push(D),g.push(b-m);return}else if(C==-3){h=y;return}else if(C==-4){u=y;return}else throw new RangeError(`Unrecognized record size: ${C}`);let B=a[y],N,z,K=b-m;if($-b<=n&&(z=k(o.pos-Q,T))){let D=new Uint16Array(z.size-z.skip),W=o.pos-z.size,E=D.length;for(;o.pos>W;)E=w(z.start,D,E);N=new yi(D,$-z.start,i),K=z.start-m}else{let D=o.pos-C;o.next();let W=[],E=[],M=y>=l?y:-1,Z=0,j=$;for(;o.pos>D;)M>=0&&o.id==M&&o.size>=0?(o.end<=j-n&&(d(W,E,b,Z,o.end,j,M,A),Z=W.length,j=o.end),o.next()):f(b,D,W,E,M);if(M>=0&&Z>0&&Z<W.length&&d(W,E,b,Z,b,j,M,A),W.reverse(),E.reverse(),M>-1&&Z>0){let ge=c(B);N=ro(B,W,E,0,W.length,0,$-b,ge,ge)}else N=p(B,W,E,$-b,A-$)}O.push(N),g.push(K)}function c(m){return(Q,O,g)=>{let T=0,y=Q.length-1,b,$;if(y>=0&&(b=Q[y])instanceof Ce){if(!y&&b.type==m&&b.length==g)return b;($=b.prop(ee.lookAhead))&&(T=O[y]+b.length+$)}return p(m,Q,O,g,T)}}function d(m,Q,O,g,T,y,b,$){let C=[],A=[];for(;m.length>g;)C.push(m.pop()),A.push(Q.pop()+O-T);m.push(p(i.types[b],C,A,y-T,$-y)),Q.push(T-O)}function p(m,Q,O,g,T=0,y){if(h){let b=[ee.contextHash,h];y=y?[b].concat(y):[b]}if(T>25){let b=[ee.lookAhead,T];y=y?[b].concat(y):[b]}return new Ce(m,Q,O,g,y)}function k(m,Q){let O=o.fork(),g=0,T=0,y=0,b=O.end-n,$={size:0,start:0,skip:0};e:for(let C=O.pos-m;O.pos>C;){let A=O.size;if(O.id==Q&&A>=0){$.size=g,$.start=T,$.skip=y,y+=4,g+=4,O.next();continue}let B=O.pos-A;if(A<0||B<C||O.start<b)break;let N=O.id>=l?4:0,z=O.start;for(O.next();O.pos>B;){if(O.size<0)if(O.size==-3)N+=4;else break e;else O.id>=l&&(N+=4);O.next()}T=z,g+=A,y+=N}return(Q<0||g==m)&&($.size=g,$.start=T,$.skip=y),$.size>4?$:void 0}function w(m,Q,O){let{id:g,start:T,end:y,size:b}=o;if(o.next(),b>=0&&g<l){let $=O;if(b>4){let C=o.pos-(b-4);for(;o.pos>C;)O=w(m,Q,O)}Q[--O]=$,Q[--O]=y-m,Q[--O]=T-m,Q[--O]=g}else b==-3?h=g:b==-4&&(u=g);return O}let S=[],P=[];for(;o.pos>0;)f(r.start||0,r.bufferStart||0,S,P,-1);let v=(e=r.length)!==null&&e!==void 0?e:S.length?P[0]+S[0].length:0;return new Ce(a[r.topID],S.reverse(),P.reverse(),v)}const $f=new WeakMap;function zn(r,e){if(!r.isAnonymous||e instanceof yi||e.type!=r)return 1;let t=$f.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof Ce)){t=1;break}t+=zn(r,i)}$f.set(e,t)}return t}function ro(r,e,t,i,n,s,l,o,a){let h=0;for(let p=i;p<n;p++)h+=zn(r,e[p]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(p,k,w,S,P){for(let v=w;v<S;){let m=v,Q=k[v],O=zn(r,p[v]);for(v++;v<S;v++){let g=zn(r,p[v]);if(O+g>=u)break;O+=g}if(v==m+1){if(O>u){let g=p[m];d(g.children,g.positions,0,g.children.length,k[m]+P);continue}f.push(p[m])}else{let g=k[v-1]+p[v-1].length-Q;f.push(ro(r,p,k,m,v,Q,g,null,a))}c.push(Q+P-s)}}return d(e,t,i,n,0),(o||a)(f,c,l)}class xi{constructor(e,t,i,n,s=!1,l=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new xi(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,h=0;;o++){let u=o<t.length?t[o]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;l&&l.from<f;){let c=l;if(a>=c.from||f<=c.to||h){let d=Math.max(c.from,a)-h,p=Math.min(c.to,f)-h;c=d>=p?null:new xi(d,p,c.tree,c.offset+h,o>0,!!u)}if(c&&n.push(c),l.to>f)break;l=s<e.length?e[s++]:null}if(!u)break;a=u.toA,h=u.toA-u.toB}return n}}class N0{startParse(e,t,i){return typeof e=="string"&&(e=new E0(e)),i=i?i.length?i.map(n=>new eo(n.from,n.to)):[new eo(0,0)]:[new eo(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class E0{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ee({perNode:!0});const B0=1024;let M0=0;class fe{constructor(e={}){this.id=M0++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=zt.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}fe.closedBy=new fe({deserialize:r=>r.split(" ")}),fe.openedBy=new fe({deserialize:r=>r.split(" ")}),fe.group=new fe({deserialize:r=>r.split(" ")}),fe.contextHash=new fe({perNode:!0}),fe.lookAhead=new fe({perNode:!0}),fe.mounted=new fe({perNode:!0});const L0=Object.create(null);class zt{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):L0,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new zt(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(fe.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(fe.group),s=-1;s<(n?n.length:0);s++){let l=t[s<0?i.name:n[s]];if(l)return l}}}}zt.none=new zt("",Object.create(null),0,8);const Xn=new WeakMap,Tf=new WeakMap;var Xe;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Xe||(Xe={}));class wt{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=this.prop(fe.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new En(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Xn.get(this)||this.topNode,s=new En(n);return s.moveTo(e,t),Xn.set(this,s._tree),s}get topNode(){return new Xt(this,0,0,null)}resolve(e,t=0){let i=Hi(Xn.get(this)||this.topNode,e,t,!1);return Xn.set(this,i),i}resolveInner(e,t=0){let i=Hi(Tf.get(this)||this.topNode,e,t,!0);return Tf.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let l=this.cursor((e.mode||0)|Xe.IncludeAnonymous);;){let o=!1;if(l.from<=s&&l.to>=n&&(l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;o=!0}for(;o&&i&&!l.type.isAnonymous&&i(l),!l.nextSibling();){if(!l.parent())return;o=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:lo(zt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new wt(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new wt(zt.none,t,i,n)))}static build(e){return U0(e)}}wt.empty=new wt(zt.none,[],[],0);class no{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new no(this.buffer,this.index)}}class Qi{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return zt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let l=[];for(;e<i;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,t,i,n,s){let{buffer:l}=this,o=-1;for(let a=e;a!=t&&!(Pf(s,n,l[a+1],l[a+2])&&(o=a,i>0));a=l[a+3]);return o}slice(e,t,i,n){let s=this.buffer,l=new Uint16Array(t-e);for(let o=e,a=0;o<t;)l[a++]=s[o++],l[a++]=s[o++]-i,l[a++]=s[o++]-i,l[a++]=s[o++]-e;return new Qi(l,n-i,this.set)}}function Pf(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Cf(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function Hi(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let l=!i&&r instanceof Xt&&r.index<0?null:r.parent;if(!l)return r;r=l}let s=i?0:Xe.IgnoreOverlays;if(i)for(let l=r,o=l.parent;o;l=o,o=l.parent)l instanceof Xt&&l.index<0&&((n=o.enter(e,t,s))===null||n===void 0?void 0:n.from)!=l.from&&(r=o);for(;;){let l=r.enter(e,t,s);if(!l)return r;r=l}}class Xt{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,h=t>0?o.length:-1;e!=h;e+=t){let u=o[e],f=a[e]+l.from;if(!!Pf(n,i,f,f+u.length)){if(u instanceof Qi){if(s&Xe.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new ri(new Z0(l,u,e,f),null,c)}else if(s&Xe.IncludeAnonymous||!u.type.isAnonymous||so(u)){let c;if(!(s&Xe.IgnoreMounts)&&u.props&&(c=u.prop(fe.mounted))&&!c.overlay)return new Xt(c.tree,f,e,l);let d=new Xt(u,f,e,l);return s&Xe.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&Xe.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+t:e=t<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Xe.IgnoreOverlays)&&(n=this._tree.prop(fe.mounted))&&n.overlay){let s=e-this.from;for(let{from:l,to:o}of n.overlay)if((t>0?l<=s:l<s)&&(t<0?o>=s:o>s))return new Xt(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new En(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Hi(this,e,t,!1)}resolveInner(e,t=0){return Hi(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Cf(this,e)}getChild(e,t=null,i=null){let n=Dn(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return Dn(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Nn(this,e)}}function Dn(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function Nn(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class Z0{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class ri{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new ri(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Xe.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new ri(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ri(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ri(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new En(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let l=i.buffer[this.index+1],o=i.buffer[this.index+2];e.push(i.slice(n,s,l,o)),t.push(0)}return new wt(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Hi(this,e,t,!1)}resolveInner(e,t=0){return Hi(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Cf(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=Dn(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return Dn(this,e,t,i)}get node(){return this}matchContext(e){return Nn(this,e)}}class En{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Xt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Xt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Xe.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Xe.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Xe.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,l=e<0?-1:i._tree.children.length;s!=l;s+=e){let o=i._tree.children[s];if(this.mode&Xe.IncludeAnonymous||o instanceof Qi||!o.type.isAnonymous||so(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==n){if(n==this.index)return l;t=l,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new ri(this.buffer,t,this.stack[n]);return this.bufferNode=new ri(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return Nn(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return Nn(this.node,e,n);let l=i[t.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[n]&&e[n]!=l.name)return!1;n--}}return!0}}function so(r){return r.children.some(e=>e instanceof Qi||!e.type.isAnonymous||so(e))}function U0(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=B0,reused:s=[],minRepeatType:l=i.types.length}=r,o=Array.isArray(t)?new no(t,t.length):t,a=i.types,h=0,u=0;function f(m,Q,O,g,T){let{id:y,start:b,end:$,size:C}=o,A=u;for(;C<0;)if(o.next(),C==-1){let D=s[y];O.push(D),g.push(b-m);return}else if(C==-3){h=y;return}else if(C==-4){u=y;return}else throw new RangeError(`Unrecognized record size: ${C}`);let B=a[y],N,z,K=b-m;if($-b<=n&&(z=k(o.pos-Q,T))){let D=new Uint16Array(z.size-z.skip),W=o.pos-z.size,E=D.length;for(;o.pos>W;)E=w(z.start,D,E);N=new Qi(D,$-z.start,i),K=z.start-m}else{let D=o.pos-C;o.next();let W=[],E=[],M=y>=l?y:-1,Z=0,j=$;for(;o.pos>D;)M>=0&&o.id==M&&o.size>=0?(o.end<=j-n&&(d(W,E,b,Z,o.end,j,M,A),Z=W.length,j=o.end),o.next()):f(b,D,W,E,M);if(M>=0&&Z>0&&Z<W.length&&d(W,E,b,Z,b,j,M,A),W.reverse(),E.reverse(),M>-1&&Z>0){let ge=c(B);N=lo(B,W,E,0,W.length,0,$-b,ge,ge)}else N=p(B,W,E,$-b,A-$)}O.push(N),g.push(K)}function c(m){return(Q,O,g)=>{let T=0,y=Q.length-1,b,$;if(y>=0&&(b=Q[y])instanceof wt){if(!y&&b.type==m&&b.length==g)return b;($=b.prop(fe.lookAhead))&&(T=O[y]+b.length+$)}return p(m,Q,O,g,T)}}function d(m,Q,O,g,T,y,b,$){let C=[],A=[];for(;m.length>g;)C.push(m.pop()),A.push(Q.pop()+O-T);m.push(p(i.types[b],C,A,y-T,$-y)),Q.push(T-O)}function p(m,Q,O,g,T=0,y){if(h){let b=[fe.contextHash,h];y=y?[b].concat(y):[b]}if(T>25){let b=[fe.lookAhead,T];y=y?[b].concat(y):[b]}return new wt(m,Q,O,g,y)}function k(m,Q){let O=o.fork(),g=0,T=0,y=0,b=O.end-n,$={size:0,start:0,skip:0};e:for(let C=O.pos-m;O.pos>C;){let A=O.size;if(O.id==Q&&A>=0){$.size=g,$.start=T,$.skip=y,y+=4,g+=4,O.next();continue}let B=O.pos-A;if(A<0||B<C||O.start<b)break;let N=O.id>=l?4:0,z=O.start;for(O.next();O.pos>B;){if(O.size<0)if(O.size==-3)N+=4;else break e;else O.id>=l&&(N+=4);O.next()}T=z,g+=A,y+=N}return(Q<0||g==m)&&($.size=g,$.start=T,$.skip=y),$.size>4?$:void 0}function w(m,Q,O){let{id:g,start:T,end:y,size:b}=o;if(o.next(),b>=0&&g<l){let $=O;if(b>4){let C=o.pos-(b-4);for(;o.pos>C;)O=w(m,Q,O)}Q[--O]=$,Q[--O]=y-m,Q[--O]=T-m,Q[--O]=g}else b==-3?h=g:b==-4&&(u=g);return O}let S=[],P=[];for(;o.pos>0;)f(r.start||0,r.bufferStart||0,S,P,-1);let v=(e=r.length)!==null&&e!==void 0?e:S.length?P[0]+S[0].length:0;return new wt(a[r.topID],S.reverse(),P.reverse(),v)}const Af=new WeakMap;function Bn(r,e){if(!r.isAnonymous||e instanceof Qi||e.type!=r)return 1;let t=Af.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof wt)){t=1;break}t+=Bn(r,i)}Af.set(e,t)}return t}function lo(r,e,t,i,n,s,l,o,a){let h=0;for(let p=i;p<n;p++)h+=Bn(r,e[p]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(p,k,w,S,P){for(let v=w;v<S;){let m=v,Q=k[v],O=Bn(r,p[v]);for(v++;v<S;v++){let g=Bn(r,p[v]);if(O+g>=u)break;O+=g}if(v==m+1){if(O>u){let g=p[m];d(g.children,g.positions,0,g.children.length,k[m]+P);continue}f.push(p[m])}else{let g=k[v-1]+p[v-1].length-Q;f.push(lo(r,p,k,m,v,Q,g,null,a))}c.push(Q+P-s)}}return d(e,t,i,n,0),(o||a)(f,c,l)}new fe({perNode:!0});let j0=0;class Le{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=j0++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Le([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new Mn;return t=>t.modified.indexOf(e)>-1?t:Mn.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}}let V0=0;class Mn{constructor(){this.instances=[],this.id=V0++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(o=>o.base==e&&G0(t,o.modified));if(i)return i;let n=[],s=new Le(n,e,t);for(let o of t)o.instances.push(s);let l=Rf(t);for(let o of e.set)for(let a of l)n.push(Mn.get(o,a));return s}}function G0(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function Rf(r){let e=[r];for(let t=0;t<r.length;t++)for(let i of Rf(r.slice(0,t).concat(r.slice(t+1))))e.push(i);return e}function Dt(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let s=[],l=2,o=n;for(let f=0;;){if(o=="..."&&f>0&&f+3==n.length){l=1;break}let c=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!c)throw new RangeError("Invalid path: "+n);if(s.push(c[0]=="*"?"":c[0][0]=='"'?JSON.parse(c[0]):c[0]),f+=c[0].length,f==n.length)break;let d=n[f++];if(f==n.length&&d=="!"){l=0;break}if(d!="/")throw new RangeError("Invalid path: "+n);o=n.slice(f)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let u=new Y0(i,l,a>0?s.slice(0,a):null);e[h]=u.sort(e[h])}}return q0.add(e)}const q0=new fe;class Y0{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function Wf(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let l of s.tag)t[l.id]=s.class;let{scope:i,all:n=null}=e||{};return{style:s=>{let l=n;for(let o of s)for(let a of o.set){let h=t[a.id];if(h){l=l?l+" "+h:h;break}}return l},scope:i}}const I=Le.define,Ln=I(),ni=I(),_f=I(ni),If=I(ni),si=I(),Zn=I(si),oo=I(si),St=I(),wi=I(St),vt=I(),$t=I(),ao=I(),Wr=I(ao),Un=I(),x={comment:Ln,lineComment:I(Ln),blockComment:I(Ln),docComment:I(Ln),name:ni,variableName:I(ni),typeName:_f,tagName:I(_f),propertyName:If,attributeName:I(If),className:I(ni),labelName:I(ni),namespace:I(ni),macroName:I(ni),literal:si,string:Zn,docString:I(Zn),character:I(Zn),attributeValue:I(Zn),number:oo,integer:I(oo),float:I(oo),bool:I(si),regexp:I(si),escape:I(si),color:I(si),url:I(si),keyword:vt,self:I(vt),null:I(vt),atom:I(vt),unit:I(vt),modifier:I(vt),operatorKeyword:I(vt),controlKeyword:I(vt),definitionKeyword:I(vt),moduleKeyword:I(vt),operator:$t,derefOperator:I($t),arithmeticOperator:I($t),logicOperator:I($t),bitwiseOperator:I($t),compareOperator:I($t),updateOperator:I($t),definitionOperator:I($t),typeOperator:I($t),controlOperator:I($t),punctuation:ao,separator:I(ao),bracket:Wr,angleBracket:I(Wr),squareBracket:I(Wr),paren:I(Wr),brace:I(Wr),content:St,heading:wi,heading1:I(wi),heading2:I(wi),heading3:I(wi),heading4:I(wi),heading5:I(wi),heading6:I(wi),contentSeparator:I(St),list:I(St),quote:I(St),emphasis:I(St),strong:I(St),link:I(St),monospace:I(St),strikethrough:I(St),inserted:I(),deleted:I(),changed:I(),invalid:I(),meta:Un,documentMeta:I(Un),annotation:I(Un),processingInstruction:I(Un),definition:Le.defineModifier(),constant:Le.defineModifier(),function:Le.defineModifier(),standard:Le.defineModifier(),local:Le.defineModifier(),special:Le.defineModifier()};Wf([{tag:x.link,class:"tok-link"},{tag:x.heading,class:"tok-heading"},{tag:x.emphasis,class:"tok-emphasis"},{tag:x.strong,class:"tok-strong"},{tag:x.keyword,class:"tok-keyword"},{tag:x.atom,class:"tok-atom"},{tag:x.bool,class:"tok-bool"},{tag:x.url,class:"tok-url"},{tag:x.labelName,class:"tok-labelName"},{tag:x.inserted,class:"tok-inserted"},{tag:x.deleted,class:"tok-deleted"},{tag:x.literal,class:"tok-literal"},{tag:x.string,class:"tok-string"},{tag:x.number,class:"tok-number"},{tag:[x.regexp,x.escape,x.special(x.string)],class:"tok-string2"},{tag:x.variableName,class:"tok-variableName"},{tag:x.local(x.variableName),class:"tok-variableName tok-local"},{tag:x.definition(x.variableName),class:"tok-variableName tok-definition"},{tag:x.special(x.variableName),class:"tok-variableName2"},{tag:x.definition(x.propertyName),class:"tok-propertyName tok-definition"},{tag:x.typeName,class:"tok-typeName"},{tag:x.namespace,class:"tok-namespace"},{tag:x.className,class:"tok-className"},{tag:x.macroName,class:"tok-macroName"},{tag:x.propertyName,class:"tok-propertyName"},{tag:x.operator,class:"tok-operator"},{tag:x.comment,class:"tok-comment"},{tag:x.meta,class:"tok-meta"},{tag:x.invalid,class:"tok-invalid"},{tag:x.punctuation,class:"tok-punctuation"}]);var ho;const Ki=new ee;function zf(r){return U.define({combine:r?e=>e.concat(r):void 0})}class Je{constructor(e,t,i=[]){this.data=e,F.prototype.hasOwnProperty("tree")||Object.defineProperty(F.prototype,"tree",{get(){return ke(this)}}),this.parser=t,this.extension=[tr.of(this),F.languageData.of((n,s,l)=>n.facet(Xf(n,s,l)))].concat(i)}isActiveAt(e,t,i=-1){return Xf(e,t,i)==this.data}findRegions(e){let t=e.facet(tr);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(s,l)=>{if(s.prop(Ki)==this.data){i.push({from:l,to:l+s.length});return}let o=s.prop(ee.mounted);if(o){if(o.tree.prop(Ki)==this.data){if(o.overlay)for(let a of o.overlay)i.push({from:a.from+l,to:a.to+l});else i.push({from:l,to:l+s.length});return}else if(o.overlay){let a=i.length;if(n(o.tree,o.overlay[0].from+l),i.length>a)return}}for(let a=0;a<s.children.length;a++){let h=s.children[a];h instanceof Ce&&n(h,s.positions[a]+l)}};return n(ke(e),0),i}get allowsNesting(){return!0}}Je.setState=he.define();function Xf(r,e,t){let i=r.facet(tr);if(!i)return null;let n=i.data;if(i.allowsNesting)for(let s=ke(r).topNode;s;s=s.enter(e,t,Pe.ExcludeBuffers))n=s.type.prop(Ki)||n;return n}class Ji extends Je{constructor(e,t){super(e,t);this.parser=t}static define(e){let t=zf(e.languageData);return new Ji(t,e.parser.configure({props:[Ki.add(i=>i.isTop?t:void 0)]}))}configure(e){return new Ji(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function ke(r){let e=r.field(Je.state,!1);return e?e.tree:Ce.empty}function uo(r,e,t=50){var i;let n=(i=r.field(Je.state,!1))===null||i===void 0?void 0:i.context;return n&&(n.isDone(e)||n.work(t,e))?n.tree:null}class F0{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let _r=null;class Ir{constructor(e,t,i=[],n,s,l,o,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=s,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Ir(e,t,[],Ce.empty,0,i,[],null)}startParse(){return this.parser.startParse(new F0(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ce.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(xi.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(xi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=_r;_r=this;try{return e()}finally{_r=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Df(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:s,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((h,u,f,c)=>a.push({fromA:h,toA:u,fromB:f,toB:c})),i=xi.applyChanges(i,a),n=Ce.empty,s=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let h of this.skipped){let u=e.mapPos(h.from,1),f=e.mapPos(h.to,-1);u<f&&o.push({from:u,to:f})}}}return new Ir(this.parser,t,i,n,s,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:s}=this.skipped[i];n<e.to&&s>e.from&&(this.fragments=Df(this.fragments,n,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends N0{createParse(t,i,n){let s=n[0].from,l=n[n.length-1].to;return{parsedPos:s,advance(){let a=_r;if(a){for(let h of n)a.tempSkipped.push(h);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new Ce(nt.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return _r}}function Df(r,e,t){return xi.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class er{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new er(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Ir.create(e.facet(tr).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new er(i)}}Je.state=Wt.define({create:er.init,update(r,e){for(let t of e.effects)if(t.is(Je.setState))return t.value;return e.startState.facet(tr)!=e.state.facet(tr)?er.init(e.state):r.apply(e)}});let Nf=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(Nf=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const fo=typeof navigator!="undefined"&&((ho=navigator.scheduling)===null||ho===void 0?void 0:ho.isInputPending)?()=>navigator.scheduling.isInputPending():null,H0=Be.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Je.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Je.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Nf(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,s=i.field(Je.state);if(s.tree==s.context.tree&&s.context.isDone(n+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!fo?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<n&&i.doc.length>n+1e3,a=s.context.work(()=>fo&&fo()||Date.now()>l,n+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Je.setState.of(new er(s.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Kt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),tr=U.define({combine(r){return r.length?r[0]:null},enables:[Je.state,H0]});class zr{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class jn{constructor(e,t,i,n,s,l=void 0){this.name=e,this.alias=t,this.extensions=i,this.filename=n,this.loadFunc=s,this.support=l,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:i}=e;if(!t){if(!i)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(i)}return new jn(e.name,(e.alias||[]).concat(e.name).map(n=>n.toLowerCase()),e.extensions||[],e.filename,t,i)}static matchFilename(e,t){for(let n of e)if(n.filename&&n.filename.test(t))return n;let i=/\.([^.]+)$/.exec(t);if(i){for(let n of e)if(n.extensions.indexOf(i[1])>-1)return n}return null}static matchLanguageName(e,t,i=!0){t=t.toLowerCase();for(let n of e)if(n.alias.some(s=>s==t))return n;if(i)for(let n of e)for(let s of n.alias){let l=t.indexOf(s);if(l>-1&&(s.length>2||!/\w/.test(t[l-1])&&!/\w/.test(t[l+s.length])))return n}return null}}const K0=U.define(),co=U.define({combine:r=>{if(!r.length)return"  ";if(!/^(?: +|\t+)$/.test(r[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return r[0]}});function po(r){let e=r.facet(co);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function Ef(r,e){let t="",i=r.tabSize;if(r.facet(co).charCodeAt(0)==9)for(;e>=i;)t+="	",e-=i;for(let n=0;n<e;n++)t+=" ";return t}function J0(r,e){r instanceof F&&(r=new Oo(r));for(let i of r.state.facet(K0)){let n=i(r,e);if(n!=null)return n}let t=ke(r.state);return t?e1(r,t,e):null}class Oo{constructor(e,t={}){this.state=e,this.options=t,this.unit=po(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:s}=this.options;return n!=null&&n>=i.from&&n<=i.to?s&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,t);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,t=1){let{text:i,from:n}=this.lineAt(e,t),s=this.countColumn(i,e-n),l=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return l>-1&&(s+=l-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,t=e.length){return Eh(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:n}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let l=s(n);if(l>-1)return l}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Xr=new ee;function e1(r,e,t){return Bf(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,r)}function t1(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function i1(r){let e=r.type.prop(Xr);if(e)return e;let t=r.firstChild,i;if(t&&(i=t.type.prop(ee.closedBy))){let n=r.lastChild,s=n&&i.indexOf(n.name)>-1;return l=>Mf(l,!0,1,void 0,s&&!t1(l)?n.from:void 0)}return r.parent==null?r1:null}function Bf(r,e,t){for(;r;r=r.parent){let i=i1(r);if(i)return i(go.create(t,e,r))}return null}function r1(){return 0}class go extends Oo{constructor(e,t,i){super(e.state,e.options);this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new go(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(n1(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?Bf(e,this.pos,this.base):0}}function n1(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function s1(r){let e=r.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let n=r.options.simulateBreak,s=r.state.doc.lineAt(t.from),l=n==null||n<=s.from?s.to:Math.min(s.to,n);for(let o=t.to;;){let a=e.childAfter(o);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<l?t:null;o=a.to}}function l1({closing:r,align:e=!0,units:t=1}){return i=>Mf(i,e,t,r)}function Mf(r,e,t,i,n){let s=r.textAfter,l=s.match(/^\s*/)[0].length,o=i&&s.slice(l,l+i.length)==i||n==r.pos+l,a=e?s1(r):null;return a?o?r.column(a.from):r.column(a.to):r.baseIndent+(o?0:r.unit*t)}const o1=r=>r.baseIndent;function Vn({except:r,units:e=1}={}){return t=>{let i=r&&r.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const Gn=new ee;function Lf(r){let e=r.firstChild,t=r.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?r.to:t.from}:null}class mo{constructor(e,t){let i;function n(o){let a=qt.newName();return(i||(i=Object.create(null)))["."+a]=o,a}const s=typeof t.all=="string"?t.all:t.all?n(t.all):void 0,l=t.scope;this.scope=l instanceof Je?o=>o.prop(Ki)==l.data:l?o=>o==l:void 0,this.style=Wf(e.map(o=>({tag:o.tag,class:o.class||n(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=i?new qt(i):null,this.themeType=t.themeType}static define(e,t){return new mo(e,t||{})}}const a1=Object.create(null),Zf=[nt.none],Uf=[],h1=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])h1[r]=u1(a1,e);function bo(r,e){Uf.indexOf(r)>-1||(Uf.push(r),console.warn(e))}function u1(r,e){let t=null;for(let s of e.split(".")){let l=r[s]||x[s];l?typeof l=="function"?t?t=l(t):bo(s,`Modifier ${s} used at start of tag`):t?bo(s,`Tag ${s} used as modifier`):t=l:bo(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),n=nt.define({id:Zf.length,name:i,props:[Dt({[i]:t})]});return Zf.push(n),n.id}const f1=1024;let c1=0;class ce{constructor(e={}){this.id=c1++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Nt.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}ce.closedBy=new ce({deserialize:r=>r.split(" ")}),ce.openedBy=new ce({deserialize:r=>r.split(" ")}),ce.group=new ce({deserialize:r=>r.split(" ")}),ce.contextHash=new ce({perNode:!0}),ce.lookAhead=new ce({perNode:!0}),ce.mounted=new ce({perNode:!0});const d1=Object.create(null);class Nt{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):d1,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new Nt(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ce.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(ce.group),s=-1;s<(n?n.length:0);s++){let l=t[s<0?i.name:n[s]];if(l)return l}}}}Nt.none=new Nt("",Object.create(null),0,8);const qn=new WeakMap,jf=new WeakMap;var De;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(De||(De={}));class Tt{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=this.prop(ce.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Hn(this.topNode,e)}cursorAt(e,t=0,i=0){let n=qn.get(this)||this.topNode,s=new Hn(n);return s.moveTo(e,t),qn.set(this,s._tree),s}get topNode(){return new Et(this,0,0,null)}resolve(e,t=0){let i=ir(qn.get(this)||this.topNode,e,t,!1);return qn.set(this,i),i}resolveInner(e,t=0){let i=ir(jf.get(this)||this.topNode,e,t,!0);return jf.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let l=this.cursor((e.mode||0)|De.IncludeAnonymous);;){let o=!1;if(l.from<=s&&l.to>=n&&(l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;o=!0}for(;o&&i&&!l.type.isAnonymous&&i(l),!l.nextSibling();){if(!l.parent())return;o=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:xo(Nt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new Tt(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new Tt(Nt.none,t,i,n)))}static build(e){return O1(e)}}Tt.empty=new Tt(Nt.none,[],[],0);class ko{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ko(this.buffer,this.index)}}class Si{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Nt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let l=[];for(;e<i;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,t,i,n,s){let{buffer:l}=this,o=-1;for(let a=e;a!=t&&!(Vf(s,n,l[a+1],l[a+2])&&(o=a,i>0));a=l[a+3]);return o}slice(e,t,i,n){let s=this.buffer,l=new Uint16Array(t-e);for(let o=e,a=0;o<t;)l[a++]=s[o++],l[a++]=s[o++]-i,l[a++]=s[o++]-i,l[a++]=s[o++]-e;return new Si(l,n-i,this.set)}}function Vf(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Gf(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function ir(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let l=!i&&r instanceof Et&&r.index<0?null:r.parent;if(!l)return r;r=l}let s=i?0:De.IgnoreOverlays;if(i)for(let l=r,o=l.parent;o;l=o,o=l.parent)l instanceof Et&&l.index<0&&((n=o.enter(e,t,s))===null||n===void 0?void 0:n.from)!=l.from&&(r=o);for(;;){let l=r.enter(e,t,s);if(!l)return r;r=l}}class Et{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,h=t>0?o.length:-1;e!=h;e+=t){let u=o[e],f=a[e]+l.from;if(!!Vf(n,i,f,f+u.length)){if(u instanceof Si){if(s&De.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new li(new p1(l,u,e,f),null,c)}else if(s&De.IncludeAnonymous||!u.type.isAnonymous||yo(u)){let c;if(!(s&De.IgnoreMounts)&&u.props&&(c=u.prop(ce.mounted))&&!c.overlay)return new Et(c.tree,f,e,l);let d=new Et(u,f,e,l);return s&De.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&De.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+t:e=t<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&De.IgnoreOverlays)&&(n=this._tree.prop(ce.mounted))&&n.overlay){let s=e-this.from;for(let{from:l,to:o}of n.overlay)if((t>0?l<=s:l<s)&&(t<0?o>=s:o>s))return new Et(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Hn(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return ir(this,e,t,!1)}resolveInner(e,t=0){return ir(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Gf(this,e)}getChild(e,t=null,i=null){let n=Yn(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return Yn(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Fn(this,e)}}function Yn(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function Fn(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class p1{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class li{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new li(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&De.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new li(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new li(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new li(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Hn(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let l=i.buffer[this.index+1],o=i.buffer[this.index+2];e.push(i.slice(n,s,l,o)),t.push(0)}return new Tt(this.type,e,t,this.to-this.from)}resolve(e,t=0){return ir(this,e,t,!1)}resolveInner(e,t=0){return ir(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Gf(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=Yn(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return Yn(this,e,t,i)}get node(){return this}matchContext(e){return Fn(this,e)}}class Hn{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Et)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Et?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&De.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&De.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&De.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,l=e<0?-1:i._tree.children.length;s!=l;s+=e){let o=i._tree.children[s];if(this.mode&De.IncludeAnonymous||o instanceof Si||!o.type.isAnonymous||yo(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==n){if(n==this.index)return l;t=l,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new li(this.buffer,t,this.stack[n]);return this.bufferNode=new li(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return Fn(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return Fn(this.node,e,n);let l=i[t.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[n]&&e[n]!=l.name)return!1;n--}}return!0}}function yo(r){return r.children.some(e=>e instanceof Si||!e.type.isAnonymous||yo(e))}function O1(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=f1,reused:s=[],minRepeatType:l=i.types.length}=r,o=Array.isArray(t)?new ko(t,t.length):t,a=i.types,h=0,u=0;function f(m,Q,O,g,T){let{id:y,start:b,end:$,size:C}=o,A=u;for(;C<0;)if(o.next(),C==-1){let D=s[y];O.push(D),g.push(b-m);return}else if(C==-3){h=y;return}else if(C==-4){u=y;return}else throw new RangeError(`Unrecognized record size: ${C}`);let B=a[y],N,z,K=b-m;if($-b<=n&&(z=k(o.pos-Q,T))){let D=new Uint16Array(z.size-z.skip),W=o.pos-z.size,E=D.length;for(;o.pos>W;)E=w(z.start,D,E);N=new Si(D,$-z.start,i),K=z.start-m}else{let D=o.pos-C;o.next();let W=[],E=[],M=y>=l?y:-1,Z=0,j=$;for(;o.pos>D;)M>=0&&o.id==M&&o.size>=0?(o.end<=j-n&&(d(W,E,b,Z,o.end,j,M,A),Z=W.length,j=o.end),o.next()):f(b,D,W,E,M);if(M>=0&&Z>0&&Z<W.length&&d(W,E,b,Z,b,j,M,A),W.reverse(),E.reverse(),M>-1&&Z>0){let ge=c(B);N=xo(B,W,E,0,W.length,0,$-b,ge,ge)}else N=p(B,W,E,$-b,A-$)}O.push(N),g.push(K)}function c(m){return(Q,O,g)=>{let T=0,y=Q.length-1,b,$;if(y>=0&&(b=Q[y])instanceof Tt){if(!y&&b.type==m&&b.length==g)return b;($=b.prop(ce.lookAhead))&&(T=O[y]+b.length+$)}return p(m,Q,O,g,T)}}function d(m,Q,O,g,T,y,b,$){let C=[],A=[];for(;m.length>g;)C.push(m.pop()),A.push(Q.pop()+O-T);m.push(p(i.types[b],C,A,y-T,$-y)),Q.push(T-O)}function p(m,Q,O,g,T=0,y){if(h){let b=[ce.contextHash,h];y=y?[b].concat(y):[b]}if(T>25){let b=[ce.lookAhead,T];y=y?[b].concat(y):[b]}return new Tt(m,Q,O,g,y)}function k(m,Q){let O=o.fork(),g=0,T=0,y=0,b=O.end-n,$={size:0,start:0,skip:0};e:for(let C=O.pos-m;O.pos>C;){let A=O.size;if(O.id==Q&&A>=0){$.size=g,$.start=T,$.skip=y,y+=4,g+=4,O.next();continue}let B=O.pos-A;if(A<0||B<C||O.start<b)break;let N=O.id>=l?4:0,z=O.start;for(O.next();O.pos>B;){if(O.size<0)if(O.size==-3)N+=4;else break e;else O.id>=l&&(N+=4);O.next()}T=z,g+=A,y+=N}return(Q<0||g==m)&&($.size=g,$.start=T,$.skip=y),$.size>4?$:void 0}function w(m,Q,O){let{id:g,start:T,end:y,size:b}=o;if(o.next(),b>=0&&g<l){let $=O;if(b>4){let C=o.pos-(b-4);for(;o.pos>C;)O=w(m,Q,O)}Q[--O]=$,Q[--O]=y-m,Q[--O]=T-m,Q[--O]=g}else b==-3?h=g:b==-4&&(u=g);return O}let S=[],P=[];for(;o.pos>0;)f(r.start||0,r.bufferStart||0,S,P,-1);let v=(e=r.length)!==null&&e!==void 0?e:S.length?P[0]+S[0].length:0;return new Tt(a[r.topID],S.reverse(),P.reverse(),v)}const qf=new WeakMap;function Kn(r,e){if(!r.isAnonymous||e instanceof Si||e.type!=r)return 1;let t=qf.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof Tt)){t=1;break}t+=Kn(r,i)}qf.set(e,t)}return t}function xo(r,e,t,i,n,s,l,o,a){let h=0;for(let p=i;p<n;p++)h+=Kn(r,e[p]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(p,k,w,S,P){for(let v=w;v<S;){let m=v,Q=k[v],O=Kn(r,p[v]);for(v++;v<S;v++){let g=Kn(r,p[v]);if(O+g>=u)break;O+=g}if(v==m+1){if(O>u){let g=p[m];d(g.children,g.positions,0,g.children.length,k[m]+P);continue}f.push(p[m])}else{let g=k[v-1]+p[v-1].length-Q;f.push(xo(r,p,k,m,v,Q,g,null,a))}c.push(Q+P-s)}}return d(e,t,i,n,0),(o||a)(f,c,l)}new ce({perNode:!0});const Qo=gi.define(),g1=gi.define(),m1=U.define(),b1=U.define({combine(r){return Ih(r,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function k1(r){let e=0;return r.iterChangedRanges((t,i)=>e=i),e}const y1=Wt.define({create(){return Pt.empty},update(r,e){let t=e.state.facet(b1),i=e.annotation(Qo);if(i){let a=e.docChanged?_.single(k1(e.changes)):void 0,h=Ze.fromTransaction(e,a),u=i.side,f=u==0?r.undone:r.done;return h?f=es(f,f.length,t.minDepth,h):f=Ff(f,e.startState.selection),new Pt(u==0?i.rest:f,u==0?f:i.rest)}let n=e.annotation(g1);if((n=="full"||n=="before")&&(r=r.isolate()),e.annotation(me.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let s=Ze.fromTransaction(e),l=e.annotation(me.time),o=e.annotation(me.userEvent);return s?r=r.addChanges(s,l,o,t.newGroupDelay,t.minDepth):e.selection&&(r=r.addSelection(e.startState.selection,l,o,t.newGroupDelay)),(n=="full"||n=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new Pt(r.done.map(Ze.fromJSON),r.undone.map(Ze.fromJSON))}});function Jn(r,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let n=t.field(y1,!1);if(!n)return!1;let s=n.pop(r,t,e);return s?(i(s),!0):!1}}const x1=Jn(0,!1),Q1=Jn(1,!1),w1=Jn(0,!0),S1=Jn(1,!0);class Ze{constructor(e,t,i,n,s){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=s}setSelAfter(e){return new Ze(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new Ze(e.changes&&xe.fromJSON(e.changes),[],e.mapped&&Rt.fromJSON(e.mapped),e.startSelection&&_.fromJSON(e.startSelection),e.selectionsAfter.map(_.fromJSON))}static fromTransaction(e,t){let i=st;for(let n of e.startState.facet(m1)){let s=n(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Ze(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,st)}static selection(e){return new Ze(void 0,st,void 0,void 0,e)}}function es(r,e,t,i){let n=e+1>t+20?e-t-1:0,s=r.slice(n,e);return s.push(i),s}function v1(r,e){let t=[],i=!1;return r.iterChangedRanges((n,s)=>t.push(n,s)),e.iterChangedRanges((n,s,l,o)=>{for(let a=0;a<t.length;){let h=t[a++],u=t[a++];o>=h&&l<=u&&(i=!0)}}),i}function $1(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function Yf(r,e){return r.length?e.length?r.concat(e):r:e}const st=[],T1=200;function Ff(r,e){if(r.length){let t=r[r.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-T1));return i.length&&i[i.length-1].eq(e)?r:(i.push(e),es(r,r.length-1,1e9,t.setSelAfter(i)))}else return[Ze.selection([e])]}function P1(r){let e=r[r.length-1],t=r.slice();return t[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function wo(r,e){if(!r.length)return r;let t=r.length,i=st;for(;t;){let n=C1(r[t-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let s=r.slice(0,t);return s[t-1]=n,s}else e=n.mapped,t--,i=n.selectionsAfter}return i.length?[Ze.selection(i)]:st}function C1(r,e,t){let i=Yf(r.selectionsAfter.length?r.selectionsAfter.map(o=>o.map(e)):st,t);if(!r.changes)return Ze.selection(i);let n=r.changes.map(e),s=e.mapDesc(r.changes,!0),l=r.mapped?r.mapped.composeDesc(s):s;return new Ze(n,he.mapEffects(r.effects,e),l,r.startSelection.map(s),i)}const A1=/^(input\.type|delete)($|\.)/;class Pt{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new Pt(this.done,this.undone):this}addChanges(e,t,i,n,s){let l=this.done,o=l[l.length-1];return o&&o.changes&&!o.changes.empty&&e.changes&&(!i||A1.test(i))&&(!o.selectionsAfter.length&&t-this.prevTime<n&&v1(o.changes,e.changes)||i=="input.type.compose")?l=es(l,l.length-1,s,new Ze(e.changes.compose(o.changes),Yf(e.effects,o.effects),o.mapped,o.startSelection,st)):l=es(l,l.length,s,e),new Pt(l,st,t,i)}addSelection(e,t,i,n){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:st;return s.length>0&&t-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&$1(s[s.length-1],e)?this:new Pt(Ff(this.done,e),this.undone,t,i)}addMapping(e){return new Pt(wo(this.done,e),wo(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let s=n[n.length-1];if(i&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Qo.of({side:e,rest:P1(n)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=n.length==1?st:n.slice(0,n.length-1);return s.mapped&&(l=wo(l,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Qo.of({side:e,rest:l}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Pt.empty=new Pt(st,st);const R1=[{key:"Mod-z",run:x1,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Q1,preventDefault:!0},{key:"Mod-u",run:w1,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:S1,preventDefault:!0}];function So(r,e){return _.create(r.ranges.map(e),r.mainIndex)}function vi(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function $i({state:r,dispatch:e},t){let i=So(r.selection,t);return i.eq(r.selection)?!1:(e(vi(r,i)),!0)}function ts(r,e){return _.cursor(e?r.to:r.from)}function Hf(r,e){return $i(r,t=>t.empty?r.moveByChar(t,e):ts(t,e))}function oi(r){return r.textDirectionAt(r.state.selection.main.head)==oe.LTR}const Kf=r=>Hf(r,!oi(r)),Jf=r=>Hf(r,oi(r));function ec(r,e){return $i(r,t=>t.empty?r.moveByGroup(t,e):ts(t,e))}const W1=r=>ec(r,!oi(r)),_1=r=>ec(r,oi(r));function tc(r,e){return $i(r,t=>{if(!t.empty)return ts(t,e);let i=r.moveVertically(t,e);return i.head!=t.head?i:r.moveToLineBoundary(t,e)})}const ic=r=>tc(r,!1),rc=r=>tc(r,!0);function nc(r,e){let{state:t}=r,i=So(t.selection,o=>o.empty?r.moveVertically(o,e,Math.min(r.dom.clientHeight,innerHeight)):ts(o,e));if(i.eq(t.selection))return!1;let n=r.coordsAtPos(t.selection.main.head),s=r.scrollDOM.getBoundingClientRect(),l;return n&&n.top>s.top&&n.bottom<s.bottom&&n.top-s.top<=r.scrollDOM.scrollHeight-r.scrollDOM.scrollTop-r.scrollDOM.clientHeight&&(l=G.scrollIntoView(i.main.head,{y:"start",yMargin:n.top-s.top})),r.dispatch(vi(t,i),{effects:l}),!0}const sc=r=>nc(r,!1),vo=r=>nc(r,!0);function is(r,e,t){let i=r.lineBlockAt(e.head),n=r.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?i.to:i.from)&&(n=r.moveToLineBoundary(e,t,!1)),!t&&n.head==i.from&&i.length){let s=/^\s*/.exec(r.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(n=_.cursor(i.from+s))}return n}const lc=r=>$i(r,e=>is(r,e,!0)),oc=r=>$i(r,e=>is(r,e,!1)),I1=r=>$i(r,e=>_.cursor(r.lineBlockAt(e.head).from,1)),z1=r=>$i(r,e=>_.cursor(r.lineBlockAt(e.head).to,-1));function ai(r,e){let t=So(r.state.selection,i=>{let n=e(i);return _.range(i.anchor,n.head,n.goalColumn)});return t.eq(r.state.selection)?!1:(r.dispatch(vi(r.state,t)),!0)}function ac(r,e){return ai(r,t=>r.moveByChar(t,e))}const hc=r=>ac(r,!oi(r)),uc=r=>ac(r,oi(r));function fc(r,e){return ai(r,t=>r.moveByGroup(t,e))}const X1=r=>fc(r,!oi(r)),D1=r=>fc(r,oi(r));function cc(r,e){return ai(r,t=>r.moveVertically(t,e))}const dc=r=>cc(r,!1),pc=r=>cc(r,!0);function Oc(r,e){return ai(r,t=>r.moveVertically(t,e,Math.min(r.dom.clientHeight,innerHeight)))}const gc=r=>Oc(r,!1),mc=r=>Oc(r,!0),bc=r=>ai(r,e=>is(r,e,!0)),kc=r=>ai(r,e=>is(r,e,!1)),N1=r=>ai(r,e=>_.cursor(r.lineBlockAt(e.head).from)),E1=r=>ai(r,e=>_.cursor(r.lineBlockAt(e.head).to)),yc=({state:r,dispatch:e})=>(e(vi(r,{anchor:0})),!0),xc=({state:r,dispatch:e})=>(e(vi(r,{anchor:r.doc.length})),!0),Qc=({state:r,dispatch:e})=>(e(vi(r,{anchor:r.selection.main.anchor,head:0})),!0),wc=({state:r,dispatch:e})=>(e(vi(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),B1=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0);function rs({state:r,dispatch:e},t){if(r.readOnly)return!1;let i="delete.selection",n=r.changeByRange(s=>{let{from:l,to:o}=s;if(l==o){let a=t(l);a<l?i="delete.backward":a>l&&(i="delete.forward"),l=Math.min(l,a),o=Math.max(o,a)}return l==o?{range:s}:{changes:{from:l,to:o},range:_.cursor(l)}});return n.changes.empty?!1:(e(r.update(n,{scrollIntoView:!0,userEvent:i})),!0)}function ns(r,e,t){if(r instanceof G)for(let i of r.state.facet(G.atomicRanges).map(n=>n(r)))i.between(e,e,(n,s)=>{n<e&&s>e&&(e=t?s:n)});return e}const Sc=(r,e)=>rs(r,t=>{let{state:i}=r,n=i.doc.lineAt(t),s,l;if(!e&&t>n.from&&t<n.from+200&&!/[^ \t]/.test(s=n.text.slice(0,t-n.from))){if(s[s.length-1]=="	")return t-1;let o=Eh(s,i.tabSize),a=o%po(i)||po(i);for(let h=0;h<a&&s[s.length-1-h]==" ";h++)t--;l=t}else l=Fe(n.text,t-n.from,e,e)+n.from,l==t&&n.number!=(e?i.doc.lines:1)&&(l+=e?1:-1);return ns(r,l,e)}),$o=r=>Sc(r,!1),vc=r=>Sc(r,!0),$c=(r,e)=>rs(r,t=>{let i=t,{state:n}=r,s=n.doc.lineAt(i),l=n.charCategorizer(i);for(let o=null;;){if(i==(e?s.to:s.from)){i==t&&s.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=Fe(s.text,i-s.from,e)+s.from,h=s.text.slice(Math.min(i,a)-s.from,Math.max(i,a)-s.from),u=l(h);if(o!=null&&u!=o)break;(h!=" "||i!=t)&&(o=u),i=a}return ns(r,i,e)}),Tc=r=>$c(r,!1),M1=r=>$c(r,!0),Pc=r=>rs(r,e=>{let t=r.lineBlockAt(e).to;return ns(r,e<t?t:Math.min(r.state.doc.length,e+1),!0)}),L1=r=>rs(r,e=>{let t=r.lineBlockAt(e).from;return ns(r,e>t?t:Math.max(0,e-1),!1)}),Z1=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Y.of(["",""])},range:_.cursor(i.from)}));return e(r.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},U1=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>{if(!i.empty||i.from==0||i.from==r.doc.length)return{range:i};let n=i.from,s=r.doc.lineAt(n),l=n==s.from?n-1:Fe(s.text,n-s.from,!1)+s.from,o=n==s.to?n+1:Fe(s.text,n-s.from,!0)+s.from;return{changes:{from:l,to:o,insert:r.doc.slice(n,o).append(r.doc.slice(l,n))},range:_.cursor(o)}});return t.changes.empty?!1:(e(r.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function j1(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ke(r).resolveInner(e),i=t.childBefore(e),n=t.childAfter(e),s;return i&&n&&i.to<=e&&n.from>=e&&(s=i.type.prop(ce.closedBy))&&s.indexOf(n.name)>-1&&r.doc.lineAt(i.to).from==r.doc.lineAt(n.from).from?{from:i.to,to:n.from}:null}const V1=G1(!1);function G1(r){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:s,to:l}=n,o=e.doc.lineAt(s),a=!r&&s==l&&j1(e,s);r&&(s=l=(l<=o.to?o:e.doc.lineAt(l)).to);let h=new Oo(e,{simulateBreak:s,simulateDoubleBreak:!!a}),u=J0(h,s);for(u==null&&(u=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:s,to:l}=a:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let f=["",Ef(e,u)];return a&&f.push(Ef(e,h.lineIndent(o.from,-1))),{changes:{from:s,to:l,insert:Y.of(f)},range:_.cursor(s+1+f[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}const q1=[{key:"Ctrl-b",run:Kf,shift:hc,preventDefault:!0},{key:"Ctrl-f",run:Jf,shift:uc},{key:"Ctrl-p",run:ic,shift:dc},{key:"Ctrl-n",run:rc,shift:pc},{key:"Ctrl-a",run:I1,shift:N1},{key:"Ctrl-e",run:z1,shift:E1},{key:"Ctrl-d",run:vc},{key:"Ctrl-h",run:$o},{key:"Ctrl-k",run:Pc},{key:"Ctrl-Alt-h",run:Tc},{key:"Ctrl-o",run:Z1},{key:"Ctrl-t",run:U1},{key:"Ctrl-v",run:vo}],Y1=[{key:"ArrowLeft",run:Kf,shift:hc,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:W1,shift:X1},{mac:"Cmd-ArrowLeft",run:oc,shift:kc},{key:"ArrowRight",run:Jf,shift:uc,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:_1,shift:D1},{mac:"Cmd-ArrowRight",run:lc,shift:bc},{key:"ArrowUp",run:ic,shift:dc,preventDefault:!0},{mac:"Cmd-ArrowUp",run:yc,shift:Qc},{mac:"Ctrl-ArrowUp",run:sc,shift:gc},{key:"ArrowDown",run:rc,shift:pc,preventDefault:!0},{mac:"Cmd-ArrowDown",run:xc,shift:wc},{mac:"Ctrl-ArrowDown",run:vo,shift:mc},{key:"PageUp",run:sc,shift:gc},{key:"PageDown",run:vo,shift:mc},{key:"Home",run:oc,shift:kc,preventDefault:!0},{key:"Mod-Home",run:yc,shift:Qc},{key:"End",run:lc,shift:bc,preventDefault:!0},{key:"Mod-End",run:xc,shift:wc},{key:"Enter",run:V1},{key:"Mod-a",run:B1},{key:"Backspace",run:$o,shift:$o},{key:"Delete",run:vc},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Tc},{key:"Mod-Delete",mac:"Alt-Delete",run:M1},{mac:"Mod-Backspace",run:L1},{mac:"Mod-Delete",run:Pc}].concat(q1.map(r=>({mac:r.key,run:r.run,shift:r.shift})));var Cc="1.13.3",Ac=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},ss=Array.prototype,To=Object.prototype,Rc=typeof Symbol!="undefined"?Symbol.prototype:null,F1=ss.push,Dr=ss.slice,Nr=To.toString,H1=To.hasOwnProperty,Wc=typeof ArrayBuffer!="undefined",K1=typeof DataView!="undefined",J1=Array.isArray,_c=Object.keys,Ic=Object.create,zc=Wc&&ArrayBuffer.isView,eb=isNaN,tb=isFinite,Xc=!{toString:null}.propertyIsEnumerable("toString"),Dc=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ib=Math.pow(2,53)-1;function Ue(r,e){return e=e==null?r.length-1:+e,function(){for(var t=Math.max(arguments.length-e,0),i=Array(t),n=0;n<t;n++)i[n]=arguments[n+e];switch(e){case 0:return r.call(this,i);case 1:return r.call(this,arguments[0],i);case 2:return r.call(this,arguments[0],arguments[1],i)}var s=Array(e+1);for(n=0;n<e;n++)s[n]=arguments[n];return s[e]=i,r.apply(this,s)}}function Ti(r){var e=typeof r;return e==="function"||e==="object"&&!!r}function rb(r){return r===null}function Nc(r){return r===void 0}function Ec(r){return r===!0||r===!1||Nr.call(r)==="[object Boolean]"}function nb(r){return!!(r&&r.nodeType===1)}function Ae(r){var e="[object "+r+"]";return function(t){return Nr.call(t)===e}}var Po=Ae("String"),Bc=Ae("Number"),sb=Ae("Date"),lb=Ae("RegExp"),ob=Ae("Error"),Mc=Ae("Symbol"),Lc=Ae("ArrayBuffer"),Zc=Ae("Function"),ab=Ac.document&&Ac.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof ab!="function"&&(Zc=function(r){return typeof r=="function"||!1});var Ne=Zc,Uc=Ae("Object"),jc=K1&&Uc(new DataView(new ArrayBuffer(8))),Co=typeof Map!="undefined"&&Uc(new Map),hb=Ae("DataView");function ub(r){return r!=null&&Ne(r.getInt8)&&Lc(r.buffer)}var ls=jc?ub:hb,Pi=J1||Ae("Array");function hi(r,e){return r!=null&&H1.call(r,e)}var Ao=Ae("Arguments");(function(){Ao(arguments)||(Ao=function(r){return hi(r,"callee")})})();var Ro=Ao;function fb(r){return!Mc(r)&&tb(r)&&!isNaN(parseFloat(r))}function Vc(r){return Bc(r)&&eb(r)}function Gc(r){return function(){return r}}function qc(r){return function(e){var t=r(e);return typeof t=="number"&&t>=0&&t<=ib}}function Yc(r){return function(e){return e==null?void 0:e[r]}}var os=Yc("byteLength"),cb=qc(os),db=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function pb(r){return zc?zc(r)&&!ls(r):cb(r)&&db.test(Nr.call(r))}var Fc=Wc?pb:Gc(!1),je=Yc("length");function Ob(r){for(var e={},t=r.length,i=0;i<t;++i)e[r[i]]=!0;return{contains:function(n){return e[n]===!0},push:function(n){return e[n]=!0,r.push(n)}}}function Hc(r,e){e=Ob(e);var t=Dc.length,i=r.constructor,n=Ne(i)&&i.prototype||To,s="constructor";for(hi(r,s)&&!e.contains(s)&&e.push(s);t--;)s=Dc[t],s in r&&r[s]!==n[s]&&!e.contains(s)&&e.push(s)}function we(r){if(!Ti(r))return[];if(_c)return _c(r);var e=[];for(var t in r)hi(r,t)&&e.push(t);return Xc&&Hc(r,e),e}function gb(r){if(r==null)return!0;var e=je(r);return typeof e=="number"&&(Pi(r)||Po(r)||Ro(r))?e===0:je(we(r))===0}function Kc(r,e){var t=we(e),i=t.length;if(r==null)return!i;for(var n=Object(r),s=0;s<i;s++){var l=t[s];if(e[l]!==n[l]||!(l in n))return!1}return!0}function H(r){if(r instanceof H)return r;if(!(this instanceof H))return new H(r);this._wrapped=r}H.VERSION=Cc,H.prototype.value=function(){return this._wrapped},H.prototype.valueOf=H.prototype.toJSON=H.prototype.value,H.prototype.toString=function(){return String(this._wrapped)};function Jc(r){return new Uint8Array(r.buffer||r,r.byteOffset||0,os(r))}var ed="[object DataView]";function Wo(r,e,t,i){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var n=typeof r;return n!=="function"&&n!=="object"&&typeof e!="object"?!1:td(r,e,t,i)}function td(r,e,t,i){r instanceof H&&(r=r._wrapped),e instanceof H&&(e=e._wrapped);var n=Nr.call(r);if(n!==Nr.call(e))return!1;if(jc&&n=="[object Object]"&&ls(r)){if(!ls(e))return!1;n=ed}switch(n){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r===1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return Rc.valueOf.call(r)===Rc.valueOf.call(e);case"[object ArrayBuffer]":case ed:return td(Jc(r),Jc(e),t,i)}var s=n==="[object Array]";if(!s&&Fc(r)){var l=os(r);if(l!==os(e))return!1;if(r.buffer===e.buffer&&r.byteOffset===e.byteOffset)return!0;s=!0}if(!s){if(typeof r!="object"||typeof e!="object")return!1;var o=r.constructor,a=e.constructor;if(o!==a&&!(Ne(o)&&o instanceof o&&Ne(a)&&a instanceof a)&&"constructor"in r&&"constructor"in e)return!1}t=t||[],i=i||[];for(var h=t.length;h--;)if(t[h]===r)return i[h]===e;if(t.push(r),i.push(e),s){if(h=r.length,h!==e.length)return!1;for(;h--;)if(!Wo(r[h],e[h],t,i))return!1}else{var u=we(r),f;if(h=u.length,we(e).length!==h)return!1;for(;h--;)if(f=u[h],!(hi(e,f)&&Wo(r[f],e[f],t,i)))return!1}return t.pop(),i.pop(),!0}function mb(r,e){return Wo(r,e)}function Er(r){if(!Ti(r))return[];var e=[];for(var t in r)e.push(t);return Xc&&Hc(r,e),e}function _o(r){var e=je(r);return function(t){if(t==null)return!1;var i=Er(t);if(je(i))return!1;for(var n=0;n<e;n++)if(!Ne(t[r[n]]))return!1;return r!==nd||!Ne(t[Io])}}var Io="forEach",id="has",zo=["clear","delete"],rd=["get",id,"set"],bb=zo.concat(Io,rd),nd=zo.concat(rd),kb=["add"].concat(zo,Io,id),yb=Co?_o(bb):Ae("Map"),xb=Co?_o(nd):Ae("WeakMap"),Qb=Co?_o(kb):Ae("Set"),wb=Ae("WeakSet");function rr(r){for(var e=we(r),t=e.length,i=Array(t),n=0;n<t;n++)i[n]=r[e[n]];return i}function Sb(r){for(var e=we(r),t=e.length,i=Array(t),n=0;n<t;n++)i[n]=[e[n],r[e[n]]];return i}function sd(r){for(var e={},t=we(r),i=0,n=t.length;i<n;i++)e[r[t[i]]]=t[i];return e}function Xo(r){var e=[];for(var t in r)Ne(r[t])&&e.push(t);return e.sort()}function Do(r,e){return function(t){var i=arguments.length;if(e&&(t=Object(t)),i<2||t==null)return t;for(var n=1;n<i;n++)for(var s=arguments[n],l=r(s),o=l.length,a=0;a<o;a++){var h=l[a];(!e||t[h]===void 0)&&(t[h]=s[h])}return t}}var ld=Do(Er),as=Do(we),od=Do(Er,!0);function vb(){return function(){}}function ad(r){if(!Ti(r))return{};if(Ic)return Ic(r);var e=vb();e.prototype=r;var t=new e;return e.prototype=null,t}function $b(r,e){var t=ad(r);return e&&as(t,e),t}function Tb(r){return Ti(r)?Pi(r)?r.slice():ld({},r):r}function Pb(r,e){return e(r),r}function hd(r){return Pi(r)?r:[r]}H.toPath=hd;function Br(r){return H.toPath(r)}function No(r,e){for(var t=e.length,i=0;i<t;i++){if(r==null)return;r=r[e[i]]}return t?r:void 0}function ud(r,e,t){var i=No(r,Br(e));return Nc(i)?t:i}function Cb(r,e){e=Br(e);for(var t=e.length,i=0;i<t;i++){var n=e[i];if(!hi(r,n))return!1;r=r[n]}return!!t}function Eo(r){return r}function Mr(r){return r=as({},r),function(e){return Kc(e,r)}}function Bo(r){return r=Br(r),function(e){return No(e,r)}}function Lr(r,e,t){if(e===void 0)return r;switch(t==null?3:t){case 1:return function(i){return r.call(e,i)};case 3:return function(i,n,s){return r.call(e,i,n,s)};case 4:return function(i,n,s,l){return r.call(e,i,n,s,l)}}return function(){return r.apply(e,arguments)}}function fd(r,e,t){return r==null?Eo:Ne(r)?Lr(r,e,t):Ti(r)&&!Pi(r)?Mr(r):Bo(r)}function Mo(r,e){return fd(r,e,1/0)}H.iteratee=Mo;function Ve(r,e,t){return H.iteratee!==Mo?H.iteratee(r,e):fd(r,e,t)}function Ab(r,e,t){e=Ve(e,t);for(var i=we(r),n=i.length,s={},l=0;l<n;l++){var o=i[l];s[o]=e(r[o],o,r)}return s}function cd(){}function Rb(r){return r==null?cd:function(e){return ud(r,e)}}function Wb(r,e,t){var i=Array(Math.max(0,r));e=Lr(e,t,1);for(var n=0;n<r;n++)i[n]=e(n);return i}function Lo(r,e){return e==null&&(e=r,r=0),r+Math.floor(Math.random()*(e-r+1))}var Zr=Date.now||function(){return new Date().getTime()};function dd(r){var e=function(s){return r[s]},t="(?:"+we(r).join("|")+")",i=RegExp(t),n=RegExp(t,"g");return function(s){return s=s==null?"":""+s,i.test(s)?s.replace(n,e):s}}var pd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},_b=dd(pd),Ib=sd(pd),zb=dd(Ib),Xb=H.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Zo=/(.)^/,Db={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Nb=/\\|'|\r|\n|\u2028|\u2029/g;function Eb(r){return"\\"+Db[r]}var Bb=/^\s*(\w|\$)+\s*$/;function Mb(r,e,t){!e&&t&&(e=t),e=od({},e,H.templateSettings);var i=RegExp([(e.escape||Zo).source,(e.interpolate||Zo).source,(e.evaluate||Zo).source].join("|")+"|$","g"),n=0,s="__p+='";r.replace(i,function(h,u,f,c,d){return s+=r.slice(n,d).replace(Nb,Eb),n=d+h.length,u?s+=`'+
((__t=(`+u+`))==null?'':_.escape(__t))+
'`:f?s+=`'+
((__t=(`+f+`))==null?'':__t)+
'`:c&&(s+=`';
`+c+`
__p+='`),h}),s+=`';
`;var l=e.variable;if(l){if(!Bb.test(l))throw new Error("variable is not a bare identifier: "+l)}else s=`with(obj||{}){
`+s+`}
`,l="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var o;try{o=new Function(l,"_",s)}catch(h){throw h.source=s,h}var a=function(h){return o.call(this,h,H)};return a.source="function("+l+`){
`+s+"}",a}function Lb(r,e,t){e=Br(e);var i=e.length;if(!i)return Ne(t)?t.call(r):t;for(var n=0;n<i;n++){var s=r==null?void 0:r[e[n]];s===void 0&&(s=t,n=i),r=Ne(s)?s.call(r):s}return r}var Zb=0;function Ub(r){var e=++Zb+"";return r?r+e:e}function jb(r){var e=H(r);return e._chain=!0,e}function Od(r,e,t,i,n){if(!(i instanceof e))return r.apply(t,n);var s=ad(r.prototype),l=r.apply(s,n);return Ti(l)?l:s}var nr=Ue(function(r,e){var t=nr.placeholder,i=function(){for(var n=0,s=e.length,l=Array(s),o=0;o<s;o++)l[o]=e[o]===t?arguments[n++]:e[o];for(;n<arguments.length;)l.push(arguments[n++]);return Od(r,i,this,this,l)};return i});nr.placeholder=H;var gd=Ue(function(r,e,t){if(!Ne(r))throw new TypeError("Bind must be called on a function");var i=Ue(function(n){return Od(r,i,e,this,t.concat(n))});return i}),et=qc(je);function Ci(r,e,t,i){if(i=i||[],!e&&e!==0)e=1/0;else if(e<=0)return i.concat(r);for(var n=i.length,s=0,l=je(r);s<l;s++){var o=r[s];if(et(o)&&(Pi(o)||Ro(o)))if(e>1)Ci(o,e-1,t,i),n=i.length;else for(var a=0,h=o.length;a<h;)i[n++]=o[a++];else t||(i[n++]=o)}return i}var Vb=Ue(function(r,e){e=Ci(e,!1,!1);var t=e.length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var i=e[t];r[i]=gd(r[i],r)}return r});function Gb(r,e){var t=function(i){var n=t.cache,s=""+(e?e.apply(this,arguments):i);return hi(n,s)||(n[s]=r.apply(this,arguments)),n[s]};return t.cache={},t}var md=Ue(function(r,e,t){return setTimeout(function(){return r.apply(null,t)},e)}),qb=nr(md,H,1);function bd(r,e,t){var i,n,s,l,o=0;t||(t={});var a=function(){o=t.leading===!1?0:Zr(),i=null,l=r.apply(n,s),i||(n=s=null)},h=function(){var u=Zr();!o&&t.leading===!1&&(o=u);var f=e-(u-o);return n=this,s=arguments,f<=0||f>e?(i&&(clearTimeout(i),i=null),o=u,l=r.apply(n,s),i||(n=s=null)):!i&&t.trailing!==!1&&(i=setTimeout(a,f)),l};return h.cancel=function(){clearTimeout(i),o=0,i=n=s=null},h}function kd(r,e,t){var i,n,s,l,o,a=function(){var u=Zr()-n;e>u?i=setTimeout(a,e-u):(i=null,t||(l=r.apply(o,s)),i||(s=o=null))},h=Ue(function(u){return o=this,s=u,n=Zr(),i||(i=setTimeout(a,e),t&&(l=r.apply(o,s))),l});return h.cancel=function(){clearTimeout(i),i=s=o=null},h}function Yb(r,e){return nr(e,r)}function Uo(r){return function(){return!r.apply(this,arguments)}}function Fb(){var r=arguments,e=r.length-1;return function(){for(var t=e,i=r[e].apply(this,arguments);t--;)i=r[t].call(this,i);return i}}function Hb(r,e){return function(){if(--r<1)return e.apply(this,arguments)}}function yd(r,e){var t;return function(){return--r>0&&(t=e.apply(this,arguments)),r<=1&&(e=null),t}}var Kb=nr(yd,2);function xd(r,e,t){e=Ve(e,t);for(var i=we(r),n,s=0,l=i.length;s<l;s++)if(n=i[s],e(r[n],n,r))return n}function Qd(r){return function(e,t,i){t=Ve(t,i);for(var n=je(e),s=r>0?0:n-1;s>=0&&s<n;s+=r)if(t(e[s],s,e))return s;return-1}}var jo=Qd(1),wd=Qd(-1);function Sd(r,e,t,i){t=Ve(t,i,1);for(var n=t(e),s=0,l=je(r);s<l;){var o=Math.floor((s+l)/2);t(r[o])<n?s=o+1:l=o}return s}function vd(r,e,t){return function(i,n,s){var l=0,o=je(i);if(typeof s=="number")r>0?l=s>=0?s:Math.max(s+o,l):o=s>=0?Math.min(s+1,o):s+o+1;else if(t&&s&&o)return s=t(i,n),i[s]===n?s:-1;if(n!==n)return s=e(Dr.call(i,l,o),Vc),s>=0?s+l:-1;for(s=r>0?l:o-1;s>=0&&s<o;s+=r)if(i[s]===n)return s;return-1}}var $d=vd(1,jo,Sd),Jb=vd(-1,wd);function Vo(r,e,t){var i=et(r)?jo:xd,n=i(r,e,t);if(n!==void 0&&n!==-1)return r[n]}function ek(r,e){return Vo(r,Mr(e))}function Bt(r,e,t){e=Lr(e,t);var i,n;if(et(r))for(i=0,n=r.length;i<n;i++)e(r[i],i,r);else{var s=we(r);for(i=0,n=s.length;i<n;i++)e(r[s[i]],s[i],r)}return r}function Ai(r,e,t){e=Ve(e,t);for(var i=!et(r)&&we(r),n=(i||r).length,s=Array(n),l=0;l<n;l++){var o=i?i[l]:l;s[l]=e(r[o],o,r)}return s}function Td(r){var e=function(t,i,n,s){var l=!et(t)&&we(t),o=(l||t).length,a=r>0?0:o-1;for(s||(n=t[l?l[a]:a],a+=r);a>=0&&a<o;a+=r){var h=l?l[a]:a;n=i(n,t[h],h,t)}return n};return function(t,i,n,s){var l=arguments.length>=3;return e(t,Lr(i,s,4),n,l)}}var Go=Td(1),Pd=Td(-1);function sr(r,e,t){var i=[];return e=Ve(e,t),Bt(r,function(n,s,l){e(n,s,l)&&i.push(n)}),i}function tk(r,e,t){return sr(r,Uo(Ve(e)),t)}function Cd(r,e,t){e=Ve(e,t);for(var i=!et(r)&&we(r),n=(i||r).length,s=0;s<n;s++){var l=i?i[s]:s;if(!e(r[l],l,r))return!1}return!0}function Ad(r,e,t){e=Ve(e,t);for(var i=!et(r)&&we(r),n=(i||r).length,s=0;s<n;s++){var l=i?i[s]:s;if(e(r[l],l,r))return!0}return!1}function Mt(r,e,t,i){return et(r)||(r=rr(r)),(typeof t!="number"||i)&&(t=0),$d(r,e,t)>=0}var ik=Ue(function(r,e,t){var i,n;return Ne(e)?n=e:(e=Br(e),i=e.slice(0,-1),e=e[e.length-1]),Ai(r,function(s){var l=n;if(!l){if(i&&i.length&&(s=No(s,i)),s==null)return;l=s[e]}return l==null?l:l.apply(s,t)})});function qo(r,e){return Ai(r,Bo(e))}function rk(r,e){return sr(r,Mr(e))}function Rd(r,e,t){var i=-1/0,n=-1/0,s,l;if(e==null||typeof e=="number"&&typeof r[0]!="object"&&r!=null){r=et(r)?r:rr(r);for(var o=0,a=r.length;o<a;o++)s=r[o],s!=null&&s>i&&(i=s)}else e=Ve(e,t),Bt(r,function(h,u,f){l=e(h,u,f),(l>n||l===-1/0&&i===-1/0)&&(i=h,n=l)});return i}function nk(r,e,t){var i=1/0,n=1/0,s,l;if(e==null||typeof e=="number"&&typeof r[0]!="object"&&r!=null){r=et(r)?r:rr(r);for(var o=0,a=r.length;o<a;o++)s=r[o],s!=null&&s<i&&(i=s)}else e=Ve(e,t),Bt(r,function(h,u,f){l=e(h,u,f),(l<n||l===1/0&&i===1/0)&&(i=h,n=l)});return i}var sk=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Wd(r){return r?Pi(r)?Dr.call(r):Po(r)?r.match(sk):et(r)?Ai(r,Eo):rr(r):[]}function _d(r,e,t){if(e==null||t)return et(r)||(r=rr(r)),r[Lo(r.length-1)];var i=Wd(r),n=je(i);e=Math.max(Math.min(e,n),0);for(var s=n-1,l=0;l<e;l++){var o=Lo(l,s),a=i[l];i[l]=i[o],i[o]=a}return i.slice(0,e)}function lk(r){return _d(r,1/0)}function ok(r,e,t){var i=0;return e=Ve(e,t),qo(Ai(r,function(n,s,l){return{value:n,index:i++,criteria:e(n,s,l)}}).sort(function(n,s){var l=n.criteria,o=s.criteria;if(l!==o){if(l>o||l===void 0)return 1;if(l<o||o===void 0)return-1}return n.index-s.index}),"value")}function hs(r,e){return function(t,i,n){var s=e?[[],[]]:{};return i=Ve(i,n),Bt(t,function(l,o){var a=i(l,o,t);r(s,l,a)}),s}}var ak=hs(function(r,e,t){hi(r,t)?r[t].push(e):r[t]=[e]}),hk=hs(function(r,e,t){r[t]=e}),uk=hs(function(r,e,t){hi(r,t)?r[t]++:r[t]=1}),fk=hs(function(r,e,t){r[t?0:1].push(e)},!0);function ck(r){return r==null?0:et(r)?r.length:we(r).length}function dk(r,e,t){return e in t}var Id=Ue(function(r,e){var t={},i=e[0];if(r==null)return t;Ne(i)?(e.length>1&&(i=Lr(i,e[1])),e=Er(r)):(i=dk,e=Ci(e,!1,!1),r=Object(r));for(var n=0,s=e.length;n<s;n++){var l=e[n],o=r[l];i(o,l,r)&&(t[l]=o)}return t}),pk=Ue(function(r,e){var t=e[0],i;return Ne(t)?(t=Uo(t),e.length>1&&(i=e[1])):(e=Ai(Ci(e,!1,!1),String),t=function(n,s){return!Mt(e,s)}),Id(r,t,i)});function zd(r,e,t){return Dr.call(r,0,Math.max(0,r.length-(e==null||t?1:e)))}function Yo(r,e,t){return r==null||r.length<1?e==null||t?void 0:[]:e==null||t?r[0]:zd(r,r.length-e)}function us(r,e,t){return Dr.call(r,e==null||t?1:e)}function Ok(r,e,t){return r==null||r.length<1?e==null||t?void 0:[]:e==null||t?r[r.length-1]:us(r,Math.max(0,r.length-e))}function gk(r){return sr(r,Boolean)}function mk(r,e){return Ci(r,e,!1)}var Xd=Ue(function(r,e){return e=Ci(e,!0,!0),sr(r,function(t){return!Mt(e,t)})}),bk=Ue(function(r,e){return Xd(r,e)});function Fo(r,e,t,i){Ec(e)||(i=t,t=e,e=!1),t!=null&&(t=Ve(t,i));for(var n=[],s=[],l=0,o=je(r);l<o;l++){var a=r[l],h=t?t(a,l,r):a;e&&!t?((!l||s!==h)&&n.push(a),s=h):t?Mt(s,h)||(s.push(h),n.push(a)):Mt(n,a)||n.push(a)}return n}var kk=Ue(function(r){return Fo(Ci(r,!0,!0))});function yk(r){for(var e=[],t=arguments.length,i=0,n=je(r);i<n;i++){var s=r[i];if(!Mt(e,s)){var l;for(l=1;l<t&&Mt(arguments[l],s);l++);l===t&&e.push(s)}}return e}function Ho(r){for(var e=r&&Rd(r,je).length||0,t=Array(e),i=0;i<e;i++)t[i]=qo(r,i);return t}var xk=Ue(Ho);function Qk(r,e){for(var t={},i=0,n=je(r);i<n;i++)e?t[r[i]]=e[i]:t[r[i][0]]=r[i][1];return t}function wk(r,e,t){e==null&&(e=r||0,r=0),t||(t=e<r?-1:1);for(var i=Math.max(Math.ceil((e-r)/t),0),n=Array(i),s=0;s<i;s++,r+=t)n[s]=r;return n}function Sk(r,e){if(e==null||e<1)return[];for(var t=[],i=0,n=r.length;i<n;)t.push(Dr.call(r,i,i+=e));return t}function Ko(r,e){return r._chain?H(e).chain():e}function Dd(r){return Bt(Xo(r),function(e){var t=H[e]=r[e];H.prototype[e]=function(){var i=[this._wrapped];return F1.apply(i,arguments),Ko(this,t.apply(H,i))}}),H}Bt(["pop","push","reverse","shift","sort","splice","unshift"],function(r){var e=ss[r];H.prototype[r]=function(){var t=this._wrapped;return t!=null&&(e.apply(t,arguments),(r==="shift"||r==="splice")&&t.length===0&&delete t[0]),Ko(this,t)}}),Bt(["concat","join","slice"],function(r){var e=ss[r];H.prototype[r]=function(){var t=this._wrapped;return t!=null&&(t=e.apply(t,arguments)),Ko(this,t)}});var vk=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Cc,restArguments:Ue,isObject:Ti,isNull:rb,isUndefined:Nc,isBoolean:Ec,isElement:nb,isString:Po,isNumber:Bc,isDate:sb,isRegExp:lb,isError:ob,isSymbol:Mc,isArrayBuffer:Lc,isDataView:ls,isArray:Pi,isFunction:Ne,isArguments:Ro,isFinite:fb,isNaN:Vc,isTypedArray:Fc,isEmpty:gb,isMatch:Kc,isEqual:mb,isMap:yb,isWeakMap:xb,isSet:Qb,isWeakSet:wb,keys:we,allKeys:Er,values:rr,pairs:Sb,invert:sd,functions:Xo,methods:Xo,extend:ld,extendOwn:as,assign:as,defaults:od,create:$b,clone:Tb,tap:Pb,get:ud,has:Cb,mapObject:Ab,identity:Eo,constant:Gc,noop:cd,toPath:hd,property:Bo,propertyOf:Rb,matcher:Mr,matches:Mr,times:Wb,random:Lo,now:Zr,escape:_b,unescape:zb,templateSettings:Xb,template:Mb,result:Lb,uniqueId:Ub,chain:jb,iteratee:Mo,partial:nr,bind:gd,bindAll:Vb,memoize:Gb,delay:md,defer:qb,throttle:bd,debounce:kd,wrap:Yb,negate:Uo,compose:Fb,after:Hb,before:yd,once:Kb,findKey:xd,findIndex:jo,findLastIndex:wd,sortedIndex:Sd,indexOf:$d,lastIndexOf:Jb,find:Vo,detect:Vo,findWhere:ek,each:Bt,forEach:Bt,map:Ai,collect:Ai,reduce:Go,foldl:Go,inject:Go,reduceRight:Pd,foldr:Pd,filter:sr,select:sr,reject:tk,every:Cd,all:Cd,some:Ad,any:Ad,contains:Mt,includes:Mt,include:Mt,invoke:ik,pluck:qo,where:rk,max:Rd,min:nk,shuffle:lk,sample:_d,sortBy:ok,groupBy:ak,indexBy:hk,countBy:uk,partition:fk,toArray:Wd,size:ck,pick:Id,omit:pk,first:Yo,head:Yo,take:Yo,initial:zd,last:Ok,rest:us,tail:us,drop:us,compact:gk,flatten:mk,without:bk,uniq:Fo,unique:Fo,union:kk,intersection:yk,difference:Xd,unzip:Ho,transpose:Ho,zip:xk,object:Qk,range:wk,chunk:Sk,mixin:Dd,default:H},Symbol.toStringTag,{value:"Module"})),Nd=Dd(vk);Nd._=Nd;class $k{emit(e,...t){this._callbacks=this._callbacks||{};const i=this._callbacks[e];return i&&i.forEach(n=>n.apply(this,t)),this}off(e,t){if(!arguments.length)this._callbacks={};else{const i=this._callbacks?this._callbacks[e]:null;i&&(t?this._callbacks[e]=i.filter(n=>n!==t):delete this._callbacks[e])}return this}on(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]=this._callbacks[e]||[],this._callbacks[e].push(t),this}}function Tk(r,e,t){const i=ke(r.state),n=[i.resolve(t,-1),i.resolve(t,1)];for(let s of n)do if(e.exists(s.name))return s.name;while(s=s.parent);return"Paragraph"}function Ed(r,e){const i=[ke(r.state).resolve(e,0)];for(let n of i)do if(n.name==="Kirbytag")return n;while(n=n.parent);return!1}function Jo(r,e,t,i=!1){const{state:n}=r,{doc:s}=n,{head:l,from:o,to:a}=n.selection.main,h=i?uo(n,a,500):ke(n);let u=[];if(console.log("tree",h),o!==a){let f=s.lineAt(o),c=f.number,d=f.number,p=[],k=[],w=!1,S=[];do{let{from:P,to:v,text:m}=f,Q=c===d,O=P,g=v-m.match(/\s*$/)[0].length,T=[];m.match(/^\s*$/)||(h.iterate({enter:({name:y,from:b,to:$})=>{let C;if(e.exists(y)){u.includes(y)||p.push(y),e.hasMark(y)&&(C=f.text.match(e.mark(y)))&&(O+=C[0].length);return}if(!w){if(O=Math.max(O,o),g=Math.min(g,a),!t.exists(y))return;b<=O&&$>=g&&(T.includes(y)||T.push(y),t.hasMark(y)&&(O+=t.mark(y).length,g-=t.mark(y).length))}},from:P,to:v}),w||(T.length===0&&(k=[],w=!0),Q?k=T:(k=k.filter(y=>T.includes(y)),k.length===0&&(w=!0))))}while(++c<=s.lines&&(f=s.line(c))&&f.from<a);u=[...p,...k,...S]}else h.iterate({enter:({name:f,from:c,to:d})=>{let p;e.exists(f)&&u.push(f),l>c&&l<d&&(p=!0),p&&t.exists(f)&&u.push(f)},from:o,to:a});if(!u.includes("Kirbytag")){let f=!!Ed(r,o);!n.selection.main.empty&&!f&&(f=Ed(r,a)),f&&u.push("Kirbytag")}return u}function Pk(r,e,t){const{head:i,from:n,to:s}=r.state.selection.main,l=r.state,o=ke(l),a=[];return o.iterate({enter:({node:h,from:u,to:f})=>{let c;n!==s?u<=n&&s<=f&&(c=!0):i>u&&i<f&&(c=!0),c&&t.exists(h.name)&&a.push({node:h,from:u,to:f})},from:n,to:s}),a.reverse()}function Bd(r,e,t){return r.charCategorizer(e)(r.sliceDoc(e,t))!=yt.Word}function Ck(r){return r.state.selection.main.head>0?r.moveByChar(r.state.selection.main,r.textDirection!=oe.LTR):null}function Ak(r){return r.state.selection.main.head<r.state.doc.length?r.moveByChar(r.state.selection.main,r.textDirection==oe.LTR):null}function Rk(r){return r.state.selection.main.head>0?r.moveByGroup(r.state.selection.main,r.textDirection!=oe.LTR):null}function Wk(r){return r.state.selection.main.head<r.state.doc.length?r.moveByGroup(r.state.selection.main,r.textDirection==oe.LTR):null}function _k(r,e,t){const i=r.state;let{from:n,to:s,anchor:l,head:o,empty:a}=i.selection.main;const h=i.doc.lineAt(n),u=i.doc.lineAt(s),f=uo(i,u.to,500),c=[];for(let S=h.number,P=u.number;S<=P;S++){const v=i.doc.line(S);let m=null,Q=null,O=null;f.iterate({enter:({node:g,from:T,to:y})=>{if(e.exists(g.name)?m=g.name:e.markTokenExists(g.name)&&(Q=Ei(mt({},g),{from:T,to:y}),m==="OrderedList"&&(O=parseInt(v.text.slice(T-v.from,y-v.from),10))),m&&Q)return!1},from:v.from,to:v.to}),c.push({line:v,block:m,mark:Q,listNumber:O})}const d=c.filter(({block:S})=>S!==t).length===0;let p=n,k=s-n,w;if(d)w=c.map(({line:S,block:P,mark:v},m)=>{if(!v)return S.text;const Q=S.text.match(e.mark(P)),O=Q?Q[0].length:0;return m===0?(p+=n>=S.from+O?-O:S.from-n,n<S.from+O&&(k-=O-(n-S.from))):k+=s>=S.from+O?-O:S.from-s,S.text.substring(O)});else{let S=1;w=c.map(({line:P,block:v,listNumber:m},Q)=>{Q===0&&m!==null&&(S=m);const O=e.mark(v)?P.text.match(e.mark(v)):null,g=O?O[0].length:0,T=e.render(t,S++);return a?(p+=T.length-g,k=0):Q===0?(p+=n>P.from+g||P.length===0?T.length-g:0,n<=P.from+g&&(k+=T.length-g)):k+=T.length-g,T+P.text.substring(g)})}r.dispatch({changes:{from:h.from,to:u.to,insert:w.join(i.lineBreak)}}),o>l?(o=p+k,o=Math.min(r.state.doc.length,o),l=Math.max(p,0)):(l=p+k,l=Math.min(r.state.doc.length,l),o=Math.max(p,0)),r.dispatch({selection:{anchor:l,head:o}})}function ea(r,e,t,i){const s=r.state.selection.main,l=s.head,o=t.get(i).mark,a=Pk(r,e,t),h=a.reduce((f,{node:c})=>[...f,c.name],[]),u=h.indexOf(i);if(u!==-1)if(u===0){let{from:f,to:c}=a[0],d,p=s.head;const w=r.state.sliceDoc(f,c).split(/(\s+)/),S=w.length,P=p>f&&p<=f+w[0].length,v=p>=c-w[S-1].length&&p<c;if(P&&v)d=r.state.sliceDoc(f+o.length,c-o.length),p-=o.length;else if(P)d=[w[0].slice(o.length),w[1],o,...w.slice(2)].join(""),p-=o.length;else if(v)d=[...w.slice(0,S-2),o,w[S-2],w[S-1].slice(0,-1*o.length)].join(""),p+=o.length;else if(!P&&!v){let m=0,Q=p-f;for(let O=0,g=0;m<S;m++){const T=/\S/.test(w[m]);if(O+=m>0?w[m-1].length:0,g+=w[m].length,T&&Q>=O&&Q<=g)break}d=[...w.slice(0,m-1),o,...w.slice(m-1,m+2),o,...w.slice(m+2)].join(""),p+=o.length}d&&r.dispatch({changes:{from:f,to:c,insert:d},selection:{anchor:p}})}else{for(let f of h)ea(r,e,t,f);for(let f of h.reverse().slice(1))ea(r,e,t,f)}else{let f=l,c=l,d="";const p=Ck(r),k=p!==null?Rk(r):null,w=!p||Bd(r.state,p.from,l),S=Ak(r),P=S!==null?Wk(r):null,v=!S||Bd(r.state,l,S.from);w&&v?d=o+o:w&&!v?(c=P.to,d=o+r.state.sliceDoc(l,P.to)+o):v&&!w?(f=k.from,d=o+r.state.sliceDoc(k.from,l)+o):!w&&!v?(f=k.from,c=P.to,d=o+r.state.sliceDoc(k.from,P.to)+o):console.warn("Cthulhu!"),r.dispatch({changes:{from:f,to:c,insert:d},selection:{anchor:l+o.length}})}}function Ik(r,e,t){let i="",n=[],s="",l=o=>{let a=o?o.marks:[],h=s;if(s="",o&&a.some(p=>t.exists(p)&&t.get(p).expelEnclosingWhitespace)){let[p,k,w,S]=/^(\s*)(.*?)(\s*)$/.exec(o.text);h+=k,s=S,(k||S)&&(o=w?{text:w,marks:a}:null,o||(a=n))}let u=a.length&&a[a.length-1],f=u&&t.get(u).escape===!1,c=a.length-(f?1:0);e:for(let p=0;p<c;p++){let k=a[p];if(!t.get(k).mixable)break;for(let w=0;w<n.length;w++){let S=n[w];if(!t.get(S).mixable)break;if(k===S){p>w?a=a.slice(0,w).concat(k).concat(a.slice(w,p)).concat(a.slice(p+1,c)):w>p&&(a=a.slice(0,p).concat(a.slice(p+1,w)).concat(k).concat(a.slice(w,c)));continue e}}}let d=0;for(;d<Math.min(n.length,c)&&a[d]===n[d];)++d;for(;d<n.length;)i+=t.get(n.pop()).mark;if(h&&(i+=h),o){for(;n.length<c;){let p=a[n.length];n.push(p),i+=t.get(p).mark}f?i+=t.mark(u)+o.text+t.mark(u):i+=o.text}};return r.forEach(l),l(null,null,r.length),i}function zk(r,e,t,i,n,s){const l=r.state,o=l.doc.line(i),a=l.selection.main,h=[];uo(l,o.to,500).iterate({enter:({name:p,from:k,to:w})=>{(t.hasMark(p)||t.markTokenExists(p))&&h.push({name:p,from:k,to:w})},from:o.from,to:o.to});let u=[],f=o.from;for(let p of Array.from(o.text)){let k=[],w=!1;f+=p.length;for(let S of h)f>S.from&&f<=S.to&&(k.push(S.name),t.markTokenExists(S.name)&&(w=!0));if(f>a.from&&f<=a.to){const S=k.includes(n);s==="add"?S||k.push(n):S&&(k=k.filter(P=>P!==n))}u.push({char:p,marks:k,isSyntax:w})}u=u.filter(({isSyntax:p})=>!p);let c=0;for(let p of e.types){let k=e.hasMark(p)&&o.text.match(e.mark(p));if(k){c=k[0].length;break}}u=u.map(({char:p,marks:k},w)=>w<c?{char:p,marks:[]}:{char:p,marks:k});const d=[];for(let p=0,k=u.length,w="",S=null;p<k;p++){const P=u[p].marks;S!==null&&(S.length!==P.length||!S.every((v,m)=>P[m]===v))&&(d.push({text:w,marks:S}),w=""),w+=u[p].char,S=P,p===k-1&&d.push({text:w,marks:P})}return Ik(d,e,t)}function Xk(r,e,t,i){const n=Jo(r,e,t,!0).includes(i)?"remove":"add",s=r.state,l=s.selection.main,o=s.doc.lineAt(l.from),a=s.doc.lineAt(l.to),h=[];let{anchor:u,head:f}=l,c=0;for(let k=o.number;k<=a.number;k++)c+=s.doc.line(k).text.length,h.push(zk(r,e,t,k,i,n));let d=h.join(r.state.lineBreak),p=d.length-c;r.dispatch({changes:{insert:d,from:o.from,to:a.to}}),f>u?(f+=p,f=Math.min(r.state.doc.length,f),u=Math.max(u,0)):(u+=p,u=Math.min(r.state.doc.length,u),f=Math.max(f,0)),r.dispatch({selection:{anchor:u,head:f}})}function Dk(r,e,t,i){return r.state.selection.main.empty?ea(r,e,t,i):Xk(r,e,t,i)}let[ut,ta]=typeof navigator!="undefined"?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}];const ia=/Edge\/(\d+)/.exec(ut.userAgent),Md=/MSIE \d/.test(ut.userAgent),ra=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ut.userAgent),fs=!!(Md||ra||ia),Ld=!fs&&/gecko\/(\d+)/i.test(ut.userAgent),na=!fs&&/Chrome\/(\d+)/.exec(ut.userAgent),Zd="webkitFontSmoothing"in ta.documentElement.style,Ud=!fs&&/Apple Computer/.test(ut.vendor);var Ri={mac:/Mac/.test(ut.platform),ie:fs,ie_version:Md?ta.documentMode||6:ra?+ra[1]:ia?+ia[1]:0,gecko:Ld,gecko_version:Ld?+(/Firefox\/(\d+)/.exec(ut.userAgent)||[0,0])[1]:0,chrome:!!na,chrome_version:na?+na[1]:0,ios:Ud&&(/Mobile\/\w+/.test(ut.userAgent)||ut.maxTouchPoints>2),android:/Android\b/.test(ut.userAgent),webkit:Zd,safari:Ud,webkit_version:Zd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:ta.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Ur=typeof navigator=="undefined"?"key":/Mac/.test(navigator.platform)?"mac":/Win/.test(navigator.platform)?"win":/Linux|X11/.test(navigator.platform)?"linux":"key";function Nk(r,e,t=" (",i=")"){let n=r[Ur]?r[Ur]:r.key?r.key:null;if(n===null)return"";const s=n.split(/-(?!$)/);let l=s[s.length-1];l==="Space"&&(l=Ur==="mac"?"\u2423":e("markdown.key.space"));let o,a,h,u;for(let f=0;f<s.length-1;++f){const c=s[f];if(/^(cmd|meta|m)$/i.test(c))u=!0;else if(/^a(lt)?$/i.test(c))o=!0;else if(/^(c|ctrl|control)$/i.test(c))a=!0;else if(/^s(hift)?$/i.test(c))h=!0;else if(/^mod$/i.test(c))Ur==="mac"?u=!0:a=!0;else throw new Error("Unrecognized modifier name: "+c)}return Ur==="mac"?(u&&(l="\u2318"+l),o&&(l="\u2325"+l),h&&(l="\u21E7"+l),a&&(l="\u2303"+l),t+l.toUpperCase()+i):(h&&(l=e("markdown.key.shift")+"+"+l),a&&(l=e("markdown.key.ctrl")+"+"+l),o&&(l=e("markdown.key.alt")+"+"+l),u&&(l=e("markdown.key.meta")+"+"+l),t+l+i)}function jd(r,...e){return e.forEach(t=>{let i=Object.keys(t).reduce((n,s)=>(n[s]=Object.getOwnPropertyDescriptor(t,s),n),{});Object.getOwnPropertySymbols(t).forEach(n=>{let s=Object.getOwnPropertyDescriptor(t,n);s.enumerable&&(i[n]=s)}),Object.defineProperties(r,i)}),r}class tt{constructor(e={}){this.configure(e),this._init=!1}configure(e={}){if(this._init)throw"Extensions cannot be configured after they have been initalized.";this.options=mt(mt({},this.defaults),e)}init(){return this._init=!0}bindEditor(e){this.editor=e}bindInput(e){this.input=e}formatKeyName(e,t,i){return Nk(e,this.input.$t,t,i)}get name(){return null}get type(){return"extension"}get defaults(){return{input:null}}plugins(){return[]}get syntax(){return null}static factory(e){const t=new tt;return jd(t,e),t}}let Vd=!1;function jr(r){const e=Ri.mac||Ri.ios?r.metaKey:r.ctrlKey;e!==Vd&&(e?document.documentElement.setAttribute("data-markdown-modkey","true"):document.documentElement.removeAttribute("data-markdown-modkey"),Vd=e)}window.addEventListener("keydown",jr),window.addEventListener("keyup",jr),window.addEventListener("onpagehide",()=>jr({metaKey:!1,ctrlKey:!1})),window.addEventListener("blur",()=>jr({metaKey:!1,ctrlKey:!1})),document.addEventListener("visibilitychange",()=>document.hidden?jr({metaKey:!1,ctrlKey:!1}):null);function Gd(r,e){const t=new Gt;for(let{from:i,to:n}of e.visibleRanges)ke(e.state).iterate({enter:({name:s,from:l,to:o})=>{if(s==="URL"){const[,a,h,u]=e.state.doc.sliceString(l,o).match(/^(<?)(.*?)(>?)$/);t.add(l+a.length,o-u.length,V.mark({class:"cm-url",attributes:{"data-url":h}}))}else if(s==="Kirbytag"){const a=e.state.doc.sliceString(l,o).match(/^\((image|file|link|email)(:\s*)([^\s)]+)/);if(!a)return;const[,h,u,f]=a;let c=null;if(["file","image"].includes(h))if(ln(f))c={"data-url":f};else if(!f.includes("/"))c={"data-panel-url":`${r.input.$store.getters["content/model"]().api}/files/${f}`};else{let d=f.lastIndexOf("/");c={"data-panel-url":`/pages/${f.substr(0,d)}/files/${f.substr(d+1)}`}}else["link","video","gist"].includes(h)?ln(f)||f.startsWith("/")?c={"data-url":f}:h==="link"&&(c={"data-panel-url":`/pages/${f.replace("/","+")}`}):h==="email"&&(c={"data-url":`mailto:${f}`,"data-sametab":!0});c&&t.add(l+1+h.length+u.length,l+a[0].length,V.mark({class:"cm-url cm-kirbytag-url",attributes:c}))}},from:i,to:n});return t.finish()}class Ek extends tt{plugins(){const e=this;return[Be.fromClass(class{constructor(i){this.decorations=Gd(e,i)}update(i){(i.docChanged||i.viewportChanged)&&(this.decorations=Gd(e,i.view))}},{decorations:i=>i.decorations,eventHandlers:{click(i){if(i.metaKey){const n=i.target.classList.contains("cm-url")?i.target:i.target.closest(".cm-url");if(!n||/^[a-z]+:\/\/$/.test(n.dataset.url))return;if(n.dataset.panelUrl){e.input.$go(n.dataset.panelUrl);return}n.dataset.sametab?window.location.href=n.dataset.url:window.open(n.dataset.url,"_blank","noopener,noreferrer")}}}})]}get token(){return"URL"}get tokenType(){return"inline"}get type(){return"language"}}const Bk=bd((r,e)=>{const t=e.posAtCoords({x:r.clientX,y:r.clientY});e.dispatch({selection:{anchor:t}})},50);class Mk extends tt{plugins(){return[Be.define(e=>{},{eventHandlers:{dragover:Bk}})]}get type(){return"theme"}}class Lk{constructor(e){this.defs=e.reduce((t,i)=>(t[i.token]=t[i.token]?Object.assign(t[i.token],i):i,t),{}),this.markTokens=e.reduce((t,i)=>t.includes(i.markToken)?t:[...t,i.markToken],[]),this.blockTypes=Object.keys(this.defs)}get(e){return this.defs[e]}exists(e){return typeof this.defs[e]!="undefined"}hasMark(e){return this.exists(e)?typeof this.get(e).mark!="undefined":!1}mark(e){return this.exists(e)?this.get(e).mark:null}markTokenExists(e){return this.markTokens.includes(e)}get types(){return this.blockTypes}render(e,t){const i=this.get(e);return typeof i.render=="function"?i.render(t):i.render}}class Zk{constructor(e){this.defs=e.reduce((t,i)=>(t[i.token]=t[i.token]?Object.assign(t[i.token],i):i,t),{}),this.markTokens=e.reduce((t,i)=>t.includes(i.markToken)?t:[...t,i.markToken],[])}get(e){return this.defs[e]}exists(e){return typeof this.defs[e]!="undefined"}hasMark(e){return this.exists(e)?typeof this.get(e).mark!="undefined":!1}mark(e){return this.exists(e)?this.get(e).mark:null}markTokenExists(e){return this.markTokens.includes(e)}}class Uk{constructor(e=[],t,i){e.forEach(n=>{n.bindEditor(t),n.bindInput(i),n.init()}),this.extensions=e}getPluginsByType(e="extension"){return this.extensions.filter(t=>t.type===e).reduce((t,i)=>[...t,...i.plugins()],[])}getButtons(){return this.extensions.filter(e=>e.type==="button").reduce((e,t)=>[...e,t],[])}getDialogs(){return this.extensions.filter(e=>e.dialog).reduce((e,t)=>[...e,t],[])}getFormats(e){const t=this.extensions.filter(i=>i.syntax).reduce((i,n)=>{let s=n.syntax;return s=Array.isArray(s)?s:[s],s=s.filter(l=>l.type===e),i.push(...s),i},[]);return e==="block"?new Lk(t):new Zk(t)}getKeymap(){return this.extensions.filter(e=>e.keys).reduce((e,t)=>[...e,...t.keys()],[])}}const jk=/x/.unicode!=null?"gu":"g",Vk=[" ","\xA0","\xAD","\u200B","	"],Gk=new RegExp(`( {2}$)|([${Vk.join("")}])`,jk);class qk extends tt{plugins(){const e=new Qf({regexp:Gk,decoration:t=>t[1]?V.mark({class:"cm-hardbreak"}):V.mark({class:"cm-invisible-char",attributes:{"data-code":t[2].charCodeAt(0)}})});return[Be.define(t=>({decorations:e.createDeco(t),update(i){this.decorations=e.updateDeco(i,this.decorations)}}),{decorations:t=>t.decorations})]}get type(){return"invisibles"}}const Yk=1024;let Fk=0;class lt{constructor(e,t){this.from=e,this.to=t}}class J{constructor(e={}){this.id=Fk++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ee.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}J.closedBy=new J({deserialize:r=>r.split(" ")}),J.openedBy=new J({deserialize:r=>r.split(" ")}),J.group=new J({deserialize:r=>r.split(" ")}),J.contextHash=new J({perNode:!0}),J.lookAhead=new J({perNode:!0}),J.mounted=new J({perNode:!0});class Hk{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}}const Kk=Object.create(null);class Ee{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):Kk,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new Ee(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(J.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(J.group),s=-1;s<(n?n.length:0);s++){let l=t[s<0?i.name:n[s]];if(l)return l}}}}Ee.none=new Ee("",Object.create(null),0,8);class cs{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let s of e){let l=s(i);l&&(n||(n=Object.assign({},i.props)),n[l[0].id]=l[1])}t.push(n?new Ee(i.name,n,i.id,i.flags):i)}return new cs(t)}}const ds=new WeakMap,qd=new WeakMap;var Oe;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Oe||(Oe={}));class ye{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=this.prop(J.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Vr(this.topNode,e)}cursorAt(e,t=0,i=0){let n=ds.get(this)||this.topNode,s=new Vr(n);return s.moveTo(e,t),ds.set(this,s._tree),s}get topNode(){return new Ct(this,0,0,null)}resolve(e,t=0){let i=lr(ds.get(this)||this.topNode,e,t,!1);return ds.set(this,i),i}resolveInner(e,t=0){let i=lr(qd.get(this)||this.topNode,e,t,!0);return qd.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let l=this.cursor((e.mode||0)|Oe.IncludeAnonymous);;){let o=!1;if(l.from<=s&&l.to>=n&&(l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;o=!0}for(;o&&i&&!l.type.isAnonymous&&i(l),!l.nextSibling();){if(!l.parent())return;o=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:oa(Ee.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new ye(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new ye(Ee.none,t,i,n)))}static build(e){return ey(e)}}ye.empty=new ye(Ee.none,[],[],0);class sa{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new sa(this.buffer,this.index)}}class Wi{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Ee.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let l=[];for(;e<i;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,t,i,n,s){let{buffer:l}=this,o=-1;for(let a=e;a!=t&&!(Yd(s,n,l[a+1],l[a+2])&&(o=a,i>0));a=l[a+3]);return o}slice(e,t,i,n){let s=this.buffer,l=new Uint16Array(t-e);for(let o=e,a=0;o<t;)l[a++]=s[o++],l[a++]=s[o++]-i,l[a++]=s[o++]-i,l[a++]=s[o++]-e;return new Wi(l,n-i,this.set)}}function Yd(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Fd(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function lr(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let l=!i&&r instanceof Ct&&r.index<0?null:r.parent;if(!l)return r;r=l}let s=i?0:Oe.IgnoreOverlays;if(i)for(let l=r,o=l.parent;o;l=o,o=l.parent)l instanceof Ct&&l.index<0&&((n=o.enter(e,t,s))===null||n===void 0?void 0:n.from)!=l.from&&(r=o);for(;;){let l=r.enter(e,t,s);if(!l)return r;r=l}}class Ct{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,h=t>0?o.length:-1;e!=h;e+=t){let u=o[e],f=a[e]+l.from;if(!!Yd(n,i,f,f+u.length)){if(u instanceof Wi){if(s&Oe.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new ui(new Jk(l,u,e,f),null,c)}else if(s&Oe.IncludeAnonymous||!u.type.isAnonymous||la(u)){let c;if(!(s&Oe.IgnoreMounts)&&u.props&&(c=u.prop(J.mounted))&&!c.overlay)return new Ct(c.tree,f,e,l);let d=new Ct(u,f,e,l);return s&Oe.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&Oe.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+t:e=t<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Oe.IgnoreOverlays)&&(n=this._tree.prop(J.mounted))&&n.overlay){let s=e-this.from;for(let{from:l,to:o}of n.overlay)if((t>0?l<=s:l<s)&&(t<0?o>=s:o>s))return new Ct(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Vr(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return lr(this,e,t,!1)}resolveInner(e,t=0){return lr(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Fd(this,e)}getChild(e,t=null,i=null){let n=ps(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return ps(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Os(this,e)}}function ps(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function Os(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class Jk{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class ui{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new ui(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Oe.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new ui(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ui(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ui(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Vr(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let l=i.buffer[this.index+1],o=i.buffer[this.index+2];e.push(i.slice(n,s,l,o)),t.push(0)}return new ye(this.type,e,t,this.to-this.from)}resolve(e,t=0){return lr(this,e,t,!1)}resolveInner(e,t=0){return lr(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Fd(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=ps(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return ps(this,e,t,i)}get node(){return this}matchContext(e){return Os(this,e)}}class Vr{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ct)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Ct?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Oe.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Oe.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Oe.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,l=e<0?-1:i._tree.children.length;s!=l;s+=e){let o=i._tree.children[s];if(this.mode&Oe.IncludeAnonymous||o instanceof Wi||!o.type.isAnonymous||la(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==n){if(n==this.index)return l;t=l,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new ui(this.buffer,t,this.stack[n]);return this.bufferNode=new ui(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return Os(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return Os(this.node,e,n);let l=i[t.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[n]&&e[n]!=l.name)return!1;n--}}return!0}}function la(r){return r.children.some(e=>e instanceof Wi||!e.type.isAnonymous||la(e))}function ey(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=Yk,reused:s=[],minRepeatType:l=i.types.length}=r,o=Array.isArray(t)?new sa(t,t.length):t,a=i.types,h=0,u=0;function f(m,Q,O,g,T){let{id:y,start:b,end:$,size:C}=o,A=u;for(;C<0;)if(o.next(),C==-1){let D=s[y];O.push(D),g.push(b-m);return}else if(C==-3){h=y;return}else if(C==-4){u=y;return}else throw new RangeError(`Unrecognized record size: ${C}`);let B=a[y],N,z,K=b-m;if($-b<=n&&(z=k(o.pos-Q,T))){let D=new Uint16Array(z.size-z.skip),W=o.pos-z.size,E=D.length;for(;o.pos>W;)E=w(z.start,D,E);N=new Wi(D,$-z.start,i),K=z.start-m}else{let D=o.pos-C;o.next();let W=[],E=[],M=y>=l?y:-1,Z=0,j=$;for(;o.pos>D;)M>=0&&o.id==M&&o.size>=0?(o.end<=j-n&&(d(W,E,b,Z,o.end,j,M,A),Z=W.length,j=o.end),o.next()):f(b,D,W,E,M);if(M>=0&&Z>0&&Z<W.length&&d(W,E,b,Z,b,j,M,A),W.reverse(),E.reverse(),M>-1&&Z>0){let ge=c(B);N=oa(B,W,E,0,W.length,0,$-b,ge,ge)}else N=p(B,W,E,$-b,A-$)}O.push(N),g.push(K)}function c(m){return(Q,O,g)=>{let T=0,y=Q.length-1,b,$;if(y>=0&&(b=Q[y])instanceof ye){if(!y&&b.type==m&&b.length==g)return b;($=b.prop(J.lookAhead))&&(T=O[y]+b.length+$)}return p(m,Q,O,g,T)}}function d(m,Q,O,g,T,y,b,$){let C=[],A=[];for(;m.length>g;)C.push(m.pop()),A.push(Q.pop()+O-T);m.push(p(i.types[b],C,A,y-T,$-y)),Q.push(T-O)}function p(m,Q,O,g,T=0,y){if(h){let b=[J.contextHash,h];y=y?[b].concat(y):[b]}if(T>25){let b=[J.lookAhead,T];y=y?[b].concat(y):[b]}return new ye(m,Q,O,g,y)}function k(m,Q){let O=o.fork(),g=0,T=0,y=0,b=O.end-n,$={size:0,start:0,skip:0};e:for(let C=O.pos-m;O.pos>C;){let A=O.size;if(O.id==Q&&A>=0){$.size=g,$.start=T,$.skip=y,y+=4,g+=4,O.next();continue}let B=O.pos-A;if(A<0||B<C||O.start<b)break;let N=O.id>=l?4:0,z=O.start;for(O.next();O.pos>B;){if(O.size<0)if(O.size==-3)N+=4;else break e;else O.id>=l&&(N+=4);O.next()}T=z,g+=A,y+=N}return(Q<0||g==m)&&($.size=g,$.start=T,$.skip=y),$.size>4?$:void 0}function w(m,Q,O){let{id:g,start:T,end:y,size:b}=o;if(o.next(),b>=0&&g<l){let $=O;if(b>4){let C=o.pos-(b-4);for(;o.pos>C;)O=w(m,Q,O)}Q[--O]=$,Q[--O]=y-m,Q[--O]=T-m,Q[--O]=g}else b==-3?h=g:b==-4&&(u=g);return O}let S=[],P=[];for(;o.pos>0;)f(r.start||0,r.bufferStart||0,S,P,-1);let v=(e=r.length)!==null&&e!==void 0?e:S.length?P[0]+S[0].length:0;return new ye(a[r.topID],S.reverse(),P.reverse(),v)}const Hd=new WeakMap;function gs(r,e){if(!r.isAnonymous||e instanceof Wi||e.type!=r)return 1;let t=Hd.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof ye)){t=1;break}t+=gs(r,i)}Hd.set(e,t)}return t}function oa(r,e,t,i,n,s,l,o,a){let h=0;for(let p=i;p<n;p++)h+=gs(r,e[p]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(p,k,w,S,P){for(let v=w;v<S;){let m=v,Q=k[v],O=gs(r,p[v]);for(v++;v<S;v++){let g=gs(r,p[v]);if(O+g>=u)break;O+=g}if(v==m+1){if(O>u){let g=p[m];d(g.children,g.positions,0,g.children.length,k[m]+P);continue}f.push(p[m])}else{let g=k[v-1]+p[v-1].length-Q;f.push(oa(r,p,k,m,v,Q,g,null,a))}c.push(Q+P-s)}}return d(e,t,i,n,0),(o||a)(f,c,l)}class Gr{constructor(e,t,i,n,s=!1,l=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new Gr(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,h=0;;o++){let u=o<t.length?t[o]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;l&&l.from<f;){let c=l;if(a>=c.from||f<=c.to||h){let d=Math.max(c.from,a)-h,p=Math.min(c.to,f)-h;c=d>=p?null:new Gr(d,p,c.tree,c.offset+h,o>0,!!u)}if(c&&n.push(c),l.to>f)break;l=s<e.length?e[s++]:null}if(!u)break;a=u.toA,h=u.toA-u.toB}return n}}class ty{startParse(e,t,i){return typeof e=="string"&&(e=new iy(e)),i=i?i.length?i.map(n=>new lt(n.from,n.to)):[new lt(0,0)]:[new lt(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class iy{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function ry(r){return(e,t,i,n)=>new sy(e,r,t,i,n)}class Kd{constructor(e,t,i,n,s){this.parser=e,this.parse=t,this.overlay=i,this.target=n,this.ranges=s}}class ny{constructor(e,t,i,n,s,l,o){this.parser=e,this.predicate=t,this.mounts=i,this.index=n,this.start=s,this.target=l,this.prev=o,this.depth=0,this.ranges=[]}}const aa=new J({perNode:!0});class sy{constructor(e,t,i,n,s){this.nest=t,this.input=i,this.fragments=n,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let i=this.baseParse.advance();if(!i)return null;if(this.baseParse=null,this.baseTree=i,this.startInner(),this.stoppedAt!=null)for(let n of this.inner)n.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let i=this.baseTree;return this.stoppedAt!=null&&(i=new ye(i.type,i.children,i.positions,i.length,i.propValues.concat([[aa,this.stoppedAt]]))),i}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let i=Object.assign(Object.create(null),e.target.props);i[J.mounted.id]=new Hk(t,e.overlay,e.parser),e.target.props=i}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].ranges[0].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new ay(this.fragments),t=null,i=null,n=new Vr(new Ct(this.baseTree,this.ranges[0].from,0,null),Oe.IncludeAnonymous|Oe.IgnoreMounts);e:for(let s,l;this.stoppedAt==null||n.from<this.stoppedAt;){let o=!0,a;if(e.hasNode(n)){if(t){let h=t.mounts.find(u=>u.frag.from<=n.from&&u.frag.to>=n.to&&u.mount.overlay);if(h)for(let u of h.mount.overlay){let f=u.from+h.pos,c=u.to+h.pos;f>=n.from&&c<=n.to&&!t.ranges.some(d=>d.from<c&&d.to>f)&&t.ranges.push({from:f,to:c})}}o=!1}else if(i&&(l=ly(i.ranges,n.from,n.to)))o=l!=2;else if(!n.type.isAnonymous&&n.from<n.to&&(s=this.nest(n,this.input))){n.tree||oy(n);let h=e.findMounts(n.from,s.parser);if(typeof s.overlay=="function")t=new ny(s.parser,s.overlay,h,this.inner.length,n.from,n.tree,t);else{let u=tp(this.ranges,s.overlay||[new lt(n.from,n.to)]);u.length&&this.inner.push(new Kd(s.parser,s.parser.startParse(this.input,ip(h,u),u),s.overlay?s.overlay.map(f=>new lt(f.from-n.from,f.to-n.from)):null,n.tree,u)),s.overlay?u.length&&(i={ranges:u,depth:0,prev:i}):o=!1}}else t&&(a=t.predicate(n))&&(a===!0&&(a=new lt(n.from,n.to)),a.from<a.to&&t.ranges.push(a));if(o&&n.firstChild())t&&t.depth++,i&&i.depth++;else for(;!n.nextSibling();){if(!n.parent())break e;if(t&&!--t.depth){let h=tp(this.ranges,t.ranges);h.length&&this.inner.splice(t.index,0,new Kd(t.parser,t.parser.startParse(this.input,ip(t.mounts,h),h),t.ranges.map(u=>new lt(u.from-t.start,u.to-t.start)),t.target,h)),t=t.prev}i&&!--i.depth&&(i=i.prev)}}}}function ly(r,e,t){for(let i of r){if(i.from>=t)break;if(i.to>e)return i.from<=e&&i.to>=t?2:1}return 0}function Jd(r,e,t,i,n,s){if(e<t){let l=r.buffer[e+1],o=r.buffer[t-2];i.push(r.slice(e,t,l,o)),n.push(l-s)}}function oy(r){let{node:e}=r,t=0;do r.parent(),t++;while(!r.tree);let i=0,n=r.tree,s=0;for(;s=n.positions[i]+r.from,!(s<=e.from&&s+n.children[i].length>=e.to);i++);let l=n.children[i],o=l.buffer;function a(h,u,f,c,d){let p=h;for(;o[p+2]+s<=e.from;)p=o[p+3];let k=[],w=[];Jd(l,h,p,k,w,c);let S=o[p+1],P=o[p+2],v=S+s==e.from&&P+s==e.to&&o[p]==e.type.id;return k.push(v?e.toTree():a(p+4,o[p+3],l.set.types[o[p]],S,P-S)),w.push(S-c),Jd(l,o[p+3],u,k,w,c),new ye(f,k,w,d)}n.children[i]=a(0,o.length,Ee.none,0,l.length);for(let h=0;h<=t;h++)r.childAfter(e.from)}class ep{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(Oe.IncludeAnonymous|Oe.IgnoreMounts)}moveTo(e){let{cursor:t}=this,i=e-this.offset;for(;!this.done&&t.from<i;)t.to>=e&&t.enter(i,1,Oe.IgnoreOverlays|Oe.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof ye)t=t.children[0];else break}return!1}}class ay{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let i=this.curFrag=e[0];this.curTo=(t=i.tree.prop(aa))!==null&&t!==void 0?t:i.to,this.inner=new ep(i.tree,-i.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(aa))!==null&&e!==void 0?e:t.to,this.inner=new ep(t.tree,-t.offset)}}findMounts(e,t){var i;let n=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let l=(i=s.tree)===null||i===void 0?void 0:i.prop(J.mounted);if(l&&l.parser==t)for(let o=this.fragI;o<this.fragments.length;o++){let a=this.fragments[o];if(a.from>=s.to)break;a.tree==this.curFrag.tree&&n.push({frag:a,pos:s.from-a.offset,mount:l})}}}return n}}function tp(r,e){let t=null,i=e;for(let n=1,s=0;n<r.length;n++){let l=r[n-1].to,o=r[n].from;for(;s<i.length;s++){let a=i[s];if(a.from>=o)break;a.to<=l||(t||(i=t=e.slice()),a.from<l?(t[s]=new lt(a.from,l),a.to>o&&t.splice(s+1,0,new lt(o,a.to))):a.to>o?t[s--]=new lt(o,a.to):t.splice(s--,1))}}return i}function hy(r,e,t,i){let n=0,s=0,l=!1,o=!1,a=-1e9,h=[];for(;;){let u=n==r.length?1e9:l?r[n].to:r[n].from,f=s==e.length?1e9:o?e[s].to:e[s].from;if(l!=o){let c=Math.max(a,t),d=Math.min(u,f,i);c<d&&h.push(new lt(c,d))}if(a=Math.min(u,f),a==1e9)break;u==a&&(l?(l=!1,n++):l=!0),f==a&&(o?(o=!1,s++):o=!0)}return h}function ip(r,e){let t=[];for(let{pos:i,mount:n,frag:s}of r){let l=i+(n.overlay?n.overlay[0].from:0),o=l+n.tree.length,a=Math.max(s.from,l),h=Math.min(s.to,o);if(n.overlay){let u=n.overlay.map(c=>new lt(c.from+i,c.to+i)),f=hy(e,u,a,h);for(let c=0,d=a;;c++){let p=c==f.length,k=p?h:f[c].from;if(k>d&&t.push(new Gr(d,k,n.tree,-l,s.from>=d,s.to<=k)),p)break;d=f[c].to}}else t.push(new Gr(a,h,n.tree,-l,s.from>=l,s.to<=o))}return t}class ms{constructor(e,t,i,n,s,l,o){this.type=e,this.value=t,this.from=i,this.hash=n,this.end=s,this.children=l,this.positions=o,this.hashProp=[[J.contextHash,n]]}static create(e,t,i,n,s){let l=n+(n<<8)+e+(t<<4)|0;return new ms(e,t,i,l,s,[],[])}addChild(e,t){e.prop(J.contextHash)!=this.hash&&(e=new ye(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){let i=this.children.length-1;return i>=0&&(t=Math.max(t,this.positions[i]+this.children[i].length+this.from)),new ye(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(s,l,o)=>new ye(Ee.none,s,l,o,this.hashProp)})}}var R;(function(r){r[r.Document=1]="Document",r[r.CodeBlock=2]="CodeBlock",r[r.FencedCode=3]="FencedCode",r[r.Blockquote=4]="Blockquote",r[r.HorizontalRule=5]="HorizontalRule",r[r.BulletList=6]="BulletList",r[r.OrderedList=7]="OrderedList",r[r.ListItem=8]="ListItem",r[r.ATXHeading1=9]="ATXHeading1",r[r.ATXHeading2=10]="ATXHeading2",r[r.ATXHeading3=11]="ATXHeading3",r[r.ATXHeading4=12]="ATXHeading4",r[r.ATXHeading5=13]="ATXHeading5",r[r.ATXHeading6=14]="ATXHeading6",r[r.SetextHeading1=15]="SetextHeading1",r[r.SetextHeading2=16]="SetextHeading2",r[r.HTMLBlock=17]="HTMLBlock",r[r.LinkReference=18]="LinkReference",r[r.Paragraph=19]="Paragraph",r[r.CommentBlock=20]="CommentBlock",r[r.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",r[r.Escape=22]="Escape",r[r.Entity=23]="Entity",r[r.HardBreak=24]="HardBreak",r[r.Emphasis=25]="Emphasis",r[r.StrongEmphasis=26]="StrongEmphasis",r[r.Link=27]="Link",r[r.Image=28]="Image",r[r.InlineCode=29]="InlineCode",r[r.HTMLTag=30]="HTMLTag",r[r.Comment=31]="Comment",r[r.ProcessingInstruction=32]="ProcessingInstruction",r[r.URL=33]="URL",r[r.HeaderMark=34]="HeaderMark",r[r.QuoteMark=35]="QuoteMark",r[r.ListMark=36]="ListMark",r[r.LinkMark=37]="LinkMark",r[r.EmphasisMark=38]="EmphasisMark",r[r.CodeMark=39]="CodeMark",r[r.CodeText=40]="CodeText",r[r.CodeInfo=41]="CodeInfo",r[r.LinkTitle=42]="LinkTitle",r[r.LinkLabel=43]="LinkLabel"})(R||(R={}));class uy{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}}class fy{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return qr(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,i=0){for(let n=t;n<e;n++)i+=this.text.charCodeAt(n)==9?4-i%4:1;return i}findColumn(e){let t=0;for(let i=0;t<this.text.length&&i<e;t++)i+=this.text.charCodeAt(t)==9?4-i%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}}function rp(r,e,t){if(t.pos==t.text.length||r!=e.block&&t.indent>=e.stack[t.depth+1].value+t.baseIndent)return!0;if(t.indent>=t.baseIndent+4)return!1;let i=(r.type==R.OrderedList?fa:ua)(t,e,!1);return i>0&&(r.type!=R.BulletList||ha(t,e,!1)<0)&&t.text.charCodeAt(t.pos+i-1)==r.value}const np={[R.Blockquote](r,e,t){return t.next!=62?!1:(t.markers.push(q(R.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1)),t.moveBase(t.pos+(ot(t.text.charCodeAt(t.pos+1))?2:1)),r.end=e.lineStart+t.text.length,!0)},[R.ListItem](r,e,t){return t.indent<t.baseIndent+r.value&&t.next>-1?!1:(t.moveBaseColumn(t.baseIndent+r.value),!0)},[R.OrderedList]:rp,[R.BulletList]:rp,[R.Document](){return!0}};function ot(r){return r==32||r==9||r==10||r==13}function qr(r,e=0){for(;e<r.length&&ot(r.charCodeAt(e));)e++;return e}function sp(r,e,t){for(;e>t&&ot(r.charCodeAt(e-1));)e--;return e}function lp(r){if(r.next!=96&&r.next!=126)return-1;let e=r.pos+1;for(;e<r.text.length&&r.text.charCodeAt(e)==r.next;)e++;if(e<r.pos+3)return-1;if(r.next==96){for(let t=e;t<r.text.length;t++)if(r.text.charCodeAt(t)==96)return-1}return e}function op(r){return r.next!=62?-1:r.text.charCodeAt(r.pos+1)==32?2:1}function ha(r,e,t){if(r.next!=42&&r.next!=45&&r.next!=95)return-1;let i=1;for(let n=r.pos+1;n<r.text.length;n++){let s=r.text.charCodeAt(n);if(s==r.next)i++;else if(!ot(s))return-1}return t&&r.next==45&&up(r)>-1&&r.depth==e.stack.length||i<3?-1:1}function ap(r,e){for(let t=r.stack.length-1;t>=0;t--)if(r.stack[t].type==e)return!0;return!1}function ua(r,e,t){return(r.next==45||r.next==43||r.next==42)&&(r.pos==r.text.length-1||ot(r.text.charCodeAt(r.pos+1)))&&(!t||ap(e,R.BulletList)||r.skipSpace(r.pos+2)<r.text.length)?1:-1}function fa(r,e,t){let i=r.pos,n=r.next;for(;n>=48&&n<=57;){i++;if(i==r.text.length)return-1;n=r.text.charCodeAt(i)}return i==r.pos||i>r.pos+9||n!=46&&n!=41||i<r.text.length-1&&!ot(r.text.charCodeAt(i+1))||t&&!ap(e,R.OrderedList)&&(r.skipSpace(i+1)==r.text.length||i>r.pos+1||r.next!=49)?-1:i+1-r.pos}function hp(r){if(r.next!=35)return-1;let e=r.pos+1;for(;e<r.text.length&&r.text.charCodeAt(e)==35;)e++;if(e<r.text.length&&r.text.charCodeAt(e)!=32)return-1;let t=e-r.pos;return t>6?-1:t}function up(r){if(r.next!=45&&r.next!=61||r.indent>=r.baseIndent+4)return-1;let e=r.pos+1;for(;e<r.text.length&&r.text.charCodeAt(e)==r.next;)e++;let t=e;for(;e<r.text.length&&ot(r.text.charCodeAt(e));)e++;return e==r.text.length?t:-1}const ca=/^[ \t]*$/,fp=/-->/,cp=/\?>/,da=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,fp],[/^\s*<\?/,cp],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,ca],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,ca]];function dp(r,e,t){if(r.next!=60)return-1;let i=r.text.slice(r.pos);for(let n=0,s=da.length-(t?1:0);n<s;n++)if(da[n][0].test(i))return n;return-1}function pp(r,e){let t=r.countIndent(e,r.pos,r.indent),i=r.countIndent(r.skipSpace(e),e,t);return i>=t+5?t+1:i}function _i(r,e,t){let i=r.length-1;i>=0&&r[i].to==e&&r[i].type==R.CodeText?r[i].to=t:r.push(q(R.CodeText,e,t))}const bs={LinkReference:void 0,IndentedCode(r,e){let t=e.baseIndent+4;if(e.indent<t)return!1;let i=e.findColumn(t),n=r.lineStart+i,s=r.lineStart+e.text.length,l=[],o=[];for(_i(l,n,s);r.nextLine()&&e.depth>=r.stack.length;)if(e.pos==e.text.length){_i(o,r.lineStart-1,r.lineStart);for(let a of e.markers)o.push(a)}else{if(e.indent<t)break;{if(o.length){for(let h of o)h.type==R.CodeText?_i(l,h.from,h.to):l.push(h);o=[]}_i(l,r.lineStart-1,r.lineStart);for(let h of e.markers)l.push(h);s=r.lineStart+e.text.length;let a=r.lineStart+e.findColumn(e.baseIndent+4);a<s&&_i(l,a,s)}}return o.length&&(o=o.filter(a=>a.type!=R.CodeText),o.length&&(e.markers=o.concat(e.markers))),r.addNode(r.buffer.writeElements(l,-n).finish(R.CodeBlock,s-n),n),!0},FencedCode(r,e){let t=lp(e);if(t<0)return!1;let i=r.lineStart+e.pos,n=e.next,s=t-e.pos,l=e.skipSpace(t),o=sp(e.text,e.text.length,l),a=[q(R.CodeMark,i,i+s)];l<o&&a.push(q(R.CodeInfo,r.lineStart+l,r.lineStart+o));for(let h=!0;r.nextLine()&&e.depth>=r.stack.length;h=!1){let u=e.pos;if(e.indent-e.baseIndent<4)for(;u<e.text.length&&e.text.charCodeAt(u)==n;)u++;if(u-e.pos>=s&&e.skipSpace(u)==e.text.length){for(let f of e.markers)a.push(f);a.push(q(R.CodeMark,r.lineStart+e.pos,r.lineStart+u)),r.nextLine();break}else{h||_i(a,r.lineStart-1,r.lineStart);for(let d of e.markers)a.push(d);let f=r.lineStart+e.basePos,c=r.lineStart+e.text.length;f<c&&_i(a,f,c)}}return r.addNode(r.buffer.writeElements(a,-i).finish(R.FencedCode,r.prevLineEnd()-i),i),!0},Blockquote(r,e){let t=op(e);return t<0?!1:(r.startContext(R.Blockquote,e.pos),r.addNode(R.QuoteMark,r.lineStart+e.pos,r.lineStart+e.pos+1),e.moveBase(e.pos+t),null)},HorizontalRule(r,e){if(ha(e,r,!1)<0)return!1;let t=r.lineStart+e.pos;return r.nextLine(),r.addNode(R.HorizontalRule,t),!0},BulletList(r,e){let t=ua(e,r,!1);if(t<0)return!1;r.block.type!=R.BulletList&&r.startContext(R.BulletList,e.basePos,e.next);let i=pp(e,e.pos+1);return r.startContext(R.ListItem,e.basePos,i-e.baseIndent),r.addNode(R.ListMark,r.lineStart+e.pos,r.lineStart+e.pos+t),e.moveBaseColumn(i),null},OrderedList(r,e){let t=fa(e,r,!1);if(t<0)return!1;r.block.type!=R.OrderedList&&r.startContext(R.OrderedList,e.basePos,e.text.charCodeAt(e.pos+t-1));let i=pp(e,e.pos+t);return r.startContext(R.ListItem,e.basePos,i-e.baseIndent),r.addNode(R.ListMark,r.lineStart+e.pos,r.lineStart+e.pos+t),e.moveBaseColumn(i),null},ATXHeading(r,e){let t=hp(e);if(t<0)return!1;let i=e.pos,n=r.lineStart+i,s=sp(e.text,e.text.length,i),l=s;for(;l>i&&e.text.charCodeAt(l-1)==e.next;)l--;(l==s||l==i||!ot(e.text.charCodeAt(l-1)))&&(l=e.text.length);let o=r.buffer.write(R.HeaderMark,0,t).writeElements(r.parser.parseInline(e.text.slice(i+t+1,l),n+t+1),-n);l<e.text.length&&o.write(R.HeaderMark,l-i,s-i);let a=o.finish(R.ATXHeading1-1+t,e.text.length-i);return r.nextLine(),r.addNode(a,n),!0},HTMLBlock(r,e){let t=dp(e,r,!1);if(t<0)return!1;let i=r.lineStart+e.pos,n=da[t][1],s=[],l=n!=ca;for(;!n.test(e.text)&&r.nextLine();){if(e.depth<r.stack.length){l=!1;break}for(let h of e.markers)s.push(h)}l&&r.nextLine();let o=n==fp?R.CommentBlock:n==cp?R.ProcessingInstructionBlock:R.HTMLBlock,a=r.prevLineEnd();return r.addNode(r.buffer.writeElements(s,-i).finish(o,a-i),i),!0},SetextHeading:void 0};class cy{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,i){if(this.stage==-1)return!1;let n=i.content+`
`+t.scrub(),s=this.advance(n);return s>-1&&s<n.length?this.complete(e,i,s):!1}finish(e,t){return(this.stage==2||this.stage==3)&&qr(t.content,this.pos)==t.content.length?this.complete(e,t,t.content.length):!1}complete(e,t,i){return e.addLeafElement(t,q(R.LinkReference,this.start,this.start+i,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(e===!1&&(this.stage=-1),!1)}advance(e){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(vp(e,this.pos,this.start,!0)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(q(R.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(wp(e,qr(e,this.pos),this.start)))return-1}else if(this.stage==2){let t=qr(e,this.pos),i=0;if(t>this.pos){let n=Sp(e,t,this.start);if(n){let s=pa(e,n.to-this.start);s>0&&(this.nextStage(n),i=s)}}return i||(i=pa(e,this.pos)),i>0&&i<e.length?i:-1}else return pa(e,this.pos)}}}function pa(r,e){for(;e<r.length;e++){let t=r.charCodeAt(e);if(t==10)break;if(!ot(t))return-1}return e}class dy{nextLine(e,t,i){let n=t.depth<e.stack.length?-1:up(t),s=t.next;if(n<0)return!1;let l=q(R.HeaderMark,e.lineStart+t.pos,e.lineStart+n);return e.nextLine(),e.addLeafElement(i,q(s==61?R.SetextHeading1:R.SetextHeading2,i.start,e.prevLineEnd(),[...e.parser.parseInline(i.content,i.start),l])),!0}finish(){return!1}}const py={LinkReference(r,e){return e.content.charCodeAt(0)==91?new cy(e):null},SetextHeading(){return new dy}},Oy=[(r,e)=>hp(e)>=0,(r,e)=>lp(e)>=0,(r,e)=>op(e)>=0,(r,e)=>ua(e,r,!0)>=0,(r,e)=>fa(e,r,!0)>=0,(r,e)=>ha(e,r,!0)>=0,(r,e)=>dp(e,r,!0)>=0],gy={text:"",end:0};class my{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.line=new fy,this.atEnd=!1,this.dontInject=new Set,this.stoppedAt=null,this.rangeI=0,this.to=n[n.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=n[0].from,this.block=ms.create(R.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=i.length?new xy(i,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(;e.depth<this.stack.length;)this.finishContext();for(let i of e.markers)this.addNode(i.type,i.from,i.to);if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let i of this.parser.blockParsers)if(i){let n=i(this,e);if(n!=!1){if(n==!0)return null;e.forward();continue e}}break}let t=new uy(this.lineStart+e.pos,e.text.slice(e.pos));for(let i of this.parser.leafBlockParsers)if(i){let n=i(this,t);n&&t.parsers.push(n)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let i of this.parser.endLeafBlock)if(i(this,e,t))break e}for(let i of t.parsers)if(i.nextLine(this,e,t))return null;t.content+=`
`+e.scrub();for(let i of e.markers)t.marks.push(i)}return this.finishLeaf(t),null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);if(!t)return!1;let i=t,n=this.absoluteLineStart+t;for(let s=1;s<this.ranges.length;s++){let l=this.ranges[s-1].to,o=this.ranges[s].from;l>=this.lineStart&&o<n&&(i-=o-l)}return this.lineStart+=i,this.absoluteLineStart+=t,this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++}scanLine(e){let t=gy;if(t.end=e,e>=this.to)t.text="";else if(t.text=this.lineChunkAt(t.end),t.end+=t.text.length,this.ranges.length>1){let i=this.absoluteLineStart,n=this.rangeI;for(;this.ranges[n].to<t.end;){n++;let s=this.ranges[n].from,l=this.lineChunkAt(s);t.end=s+l.length,t.text=t.text.slice(0,this.ranges[n-1].to-i)+l,i=t.end-t.text.length}}return t}readLine(){let{line:e}=this,{text:t,end:i}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=i,e.reset(t);e.depth<this.stack.length;e.depth++){let n=this.stack[e.depth],s=this.parser.skipContextMarkup[n.type];if(!s)throw new Error("Unhandled block context "+R[n.type]);if(!s(n,this,e))break;e.forward()}}lineChunkAt(e){let t=this.input.chunk(e),i;if(this.input.lineChunks)i=t==`
`?"":t;else{let n=t.indexOf(`
`);i=n<0?t:t.slice(0,n)}return e+i.length>this.to?i.slice(0,this.to-e):i}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,i=0){this.block=ms.create(e,i,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,i=0){this.startContext(this.parser.getNodeType(e),t,i)}addNode(e,t,i){typeof e=="number"&&(e=new ye(this.parser.nodeSet.types[e],or,or,(i!=null?i:this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(ba(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){let e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?Op(this.ranges,0,e.topNode,this.ranges[0].from,this.dontInject):e}finishLeaf(e){for(let i of e.parsers)if(i.finish(this,e))return;let t=ba(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(R.Paragraph,e.content.length),e.start)}elt(e,t,i,n){return typeof e=="string"?q(this.parser.getNodeType(e),t,i,n):new bp(e,t)}get buffer(){return new mp(this.parser.nodeSet)}}function Op(r,e,t,i,n){if(n.has(t.tree))return t.tree;let s=r[e].to,l=[],o=[],a=t.from+i;function h(u,f){for(;f?u>=s:u>s;){let c=r[e+1].from-s;i+=c,u+=c,e++,s=r[e].to}}for(let u=t.firstChild;u;u=u.nextSibling){h(u.from+i,!0);let f=u.from+i,c;u.to+i>s?(c=Op(r,e,u,i,n),h(u.to+i,!1)):c=u.toTree(),l.push(c),o.push(f-a)}return h(t.to+i,!1),new ye(t.type,l,o,t.to+i-a,t.tree?t.tree.propValues:void 0)}class ks extends ty{constructor(e,t,i,n,s,l,o,a,h){super();this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=i,this.blockNames=n,this.endLeafBlock=s,this.skipContextMarkup=l,this.inlineParsers=o,this.inlineNames=a,this.wrappers=h,this.nodeTypes=Object.create(null);for(let u of e.types)this.nodeTypes[u.name]=u.id}createParse(e,t,i){let n=new my(this,e,t,i);for(let s of this.wrappers)n=s(n,e,t,i);return n}configure(e){let t=Oa(e);if(!t)return this;let{nodeSet:i,skipContextMarkup:n}=this,s=this.blockParsers.slice(),l=this.leafBlockParsers.slice(),o=this.blockNames.slice(),a=this.inlineParsers.slice(),h=this.inlineNames.slice(),u=this.endLeafBlock.slice(),f=this.wrappers;if(Yr(t.defineNodes)){n=Object.assign({},n);let c=i.types.slice(),d;for(let p of t.defineNodes){let{name:k,block:w,composite:S,style:P}=typeof p=="string"?{name:p}:p;if(c.some(Q=>Q.name==k))continue;S&&(n[c.length]=(Q,O,g)=>S(O,g,Q.value));let v=c.length,m=S?["Block","BlockContext"]:w?v>=R.ATXHeading1&&v<=R.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;c.push(Ee.define({id:v,name:k,props:m&&[[J.group,m]]})),P&&(d||(d={}),Array.isArray(P)||P instanceof Le?d[k]=P:Object.assign(P,d))}i=new cs(c),d&&(i=i.extend(Dt(d)))}if(Yr(t.props)&&(i=i.extend(...t.props)),Yr(t.remove))for(let c of t.remove){let d=this.blockNames.indexOf(c),p=this.inlineNames.indexOf(c);d>-1&&(s[d]=l[d]=void 0),p>-1&&(a[p]=void 0)}if(Yr(t.parseBlock))for(let c of t.parseBlock){let d=o.indexOf(c.name);if(d>-1)s[d]=c.parse,l[d]=c.leaf;else{let p=c.before?ys(o,c.before):c.after?ys(o,c.after)+1:o.length-1;s.splice(p,0,c.parse),l.splice(p,0,c.leaf),o.splice(p,0,c.name)}c.endLeaf&&u.push(c.endLeaf)}if(Yr(t.parseInline))for(let c of t.parseInline){let d=h.indexOf(c.name);if(d>-1)a[d]=c.parse;else{let p=c.before?ys(h,c.before):c.after?ys(h,c.after)+1:h.length-1;a.splice(p,0,c.parse),h.splice(p,0,c.name)}}return t.wrap&&(f=f.concat(t.wrap)),new ks(i,s,l,o,u,n,a,h,f)}getNodeType(e){let t=this.nodeTypes[e];if(t==null)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let i=new ky(this,e,t);e:for(let n=t;n<i.end;){let s=i.char(n);for(let l of this.inlineParsers)if(l){let o=l(i,s,n);if(o>=0){n=o;continue e}}n++}return i.resolveMarkers(0)}}function Yr(r){return r!=null&&r.length>0}function Oa(r){if(!Array.isArray(r))return r;if(r.length==0)return null;let e=Oa(r[0]);if(r.length==1)return e;let t=Oa(r.slice(1));if(!t||!e)return e||t;let i=(l,o)=>(l||or).concat(o||or),n=e.wrap,s=t.wrap;return{props:i(e.props,t.props),defineNodes:i(e.defineNodes,t.defineNodes),parseBlock:i(e.parseBlock,t.parseBlock),parseInline:i(e.parseInline,t.parseInline),remove:i(e.remove,t.remove),wrap:n?s?(l,o,a,h)=>n(s(l,o,a,h),o,a,h):n:s}}function ys(r,e){let t=r.indexOf(e);if(t<0)throw new RangeError(`Position specified relative to unknown parser ${e}`);return t}let gp=[Ee.none];for(let r=1,e;e=R[r];r++)gp[r]=Ee.define({id:r,name:e,props:r>=R.Escape?[]:[[J.group,r in np?["Block","BlockContext"]:["Block","LeafBlock"]]]});const or=[];class mp{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,i,n=0){return this.content.push(e,t,i,4+n*4),this}writeElements(e,t=0){for(let i of e)i.writeTo(this,t);return this}finish(e,t){return ye.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}}class Fr{constructor(e,t,i,n=or){this.type=e,this.from=t,this.to=i,this.children=n}writeTo(e,t){let i=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-i)}toTree(e){return new mp(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}}class bp{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return or}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}}function q(r,e,t,i){return new Fr(r,e,t,i)}const kp={resolve:"Emphasis",mark:"EmphasisMark"},yp={resolve:"Emphasis",mark:"EmphasisMark"},Hr={},xp={};class ft{constructor(e,t,i,n){this.type=e,this.from=t,this.to=i,this.side=n}}const Qp="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let ga=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{ga=new RegExp("[\\p{Pc}|\\p{Pd}|\\p{Pe}|\\p{Pf}|\\p{Pi}|\\p{Po}|\\p{Ps}]","u")}catch{}const ma={Escape(r,e,t){if(e!=92||t==r.end-1)return-1;let i=r.char(t+1);for(let n=0;n<Qp.length;n++)if(Qp.charCodeAt(n)==i)return r.append(q(R.Escape,t,t+2));return-1},Entity(r,e,t){if(e!=38)return-1;let i=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(r.slice(t+1,t+31));return i?r.append(q(R.Entity,t,t+1+i[0].length)):-1},InlineCode(r,e,t){if(e!=96||t&&r.char(t-1)==96)return-1;let i=t+1;for(;i<r.end&&r.char(i)==96;)i++;let n=i-t,s=0;for(;i<r.end;i++)if(r.char(i)==96){if(s++,s==n&&r.char(i+1)!=96)return r.append(q(R.InlineCode,t,i+1,[q(R.CodeMark,t,t+n),q(R.CodeMark,i+1-n,i+1)]))}else s=0;return-1},HTMLTag(r,e,t){if(e!=60||t==r.end-1)return-1;let i=r.slice(t+1,r.end),n=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(i);if(n)return r.append(q(R.URL,t,t+1+n[0].length));let s=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(i);if(s)return r.append(q(R.Comment,t,t+1+s[0].length));let l=/^\?[^]*?\?>/.exec(i);if(l)return r.append(q(R.ProcessingInstruction,t,t+1+l[0].length));let o=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(i);return o?r.append(q(R.HTMLTag,t,t+1+o[0].length)):-1},Emphasis(r,e,t){if(e!=95&&e!=42)return-1;let i=t+1;for(;r.char(i)==e;)i++;let n=r.slice(t-1,t),s=r.slice(i,i+1),l=ga.test(n),o=ga.test(s),a=/\s|^$/.test(n),h=/\s|^$/.test(s),u=!h&&(!o||a||l),f=!a&&(!l||h||o),c=u&&(e==42||!f||l),d=f&&(e==42||!u||o);return r.append(new ft(e==95?kp:yp,t,i,(c?1:0)|(d?2:0)))},HardBreak(r,e,t){if(e==92&&r.char(t+1)==10)return r.append(q(R.HardBreak,t,t+2));if(e==32){let i=t+1;for(;r.char(i)==32;)i++;if(r.char(i)==10&&i>=t+2)return r.append(q(R.HardBreak,t,i+1))}return-1},Link(r,e,t){return e==91?r.append(new ft(Hr,t,t+1,1)):-1},Image(r,e,t){return e==33&&r.char(t+1)==91?r.append(new ft(xp,t,t+2,1)):-1},LinkEnd(r,e,t){if(e!=93)return-1;for(let i=r.parts.length-1;i>=0;i--){let n=r.parts[i];if(n instanceof ft&&(n.type==Hr||n.type==xp)){if(!n.side||r.skipSpace(n.to)==t&&!/[(\[]/.test(r.slice(t+1,t+2)))return r.parts[i]=null,-1;let s=r.takeContent(i),l=r.parts[i]=by(r,s,n.type==Hr?R.Link:R.Image,n.from,t+1);if(n.type==Hr)for(let o=0;o<i;o++){let a=r.parts[o];a instanceof ft&&a.type==Hr&&(a.side=0)}return l.to}}return-1}};function by(r,e,t,i,n){let{text:s}=r,l=r.char(n),o=n;if(e.unshift(q(R.LinkMark,i,i+(t==R.Image?2:1))),e.push(q(R.LinkMark,n-1,n)),l==40){let a=r.skipSpace(n+1),h=wp(s,a-r.offset,r.offset),u;h&&(a=r.skipSpace(h.to),u=Sp(s,a-r.offset,r.offset),u&&(a=r.skipSpace(u.to))),r.char(a)==41&&(e.push(q(R.LinkMark,n,n+1)),o=a+1,h&&e.push(h),u&&e.push(u),e.push(q(R.LinkMark,a,o)))}else if(l==91){let a=vp(s,n-r.offset,r.offset,!1);a&&(e.push(a),o=a.to)}return q(t,i,o,e)}function wp(r,e,t){if(r.charCodeAt(e)==60){for(let n=e+1;n<r.length;n++){let s=r.charCodeAt(n);if(s==62)return q(R.URL,e+t,n+1+t);if(s==60||s==10)return!1}return null}else{let n=0,s=e;for(let l=!1;s<r.length;s++){let o=r.charCodeAt(s);if(ot(o))break;if(l)l=!1;else if(o==40)n++;else if(o==41){if(!n)break;n--}else o==92&&(l=!0)}return s>e?q(R.URL,e+t,s+t):s==r.length?null:!1}}function Sp(r,e,t){let i=r.charCodeAt(e);if(i!=39&&i!=34&&i!=40)return!1;let n=i==40?41:i;for(let s=e+1,l=!1;s<r.length;s++){let o=r.charCodeAt(s);if(l)l=!1;else{if(o==n)return q(R.LinkTitle,e+t,s+1+t);o==92&&(l=!0)}}return null}function vp(r,e,t,i){for(let n=!1,s=e+1,l=Math.min(r.length,s+999);s<l;s++){let o=r.charCodeAt(s);if(n)n=!1;else{if(o==93)return i?!1:q(R.LinkLabel,e+t,s+1+t);if(i&&!ot(o)&&(i=!1),o==91)return!1;o==92&&(n=!0)}}return null}class ky{constructor(e,t,i){this.parser=e,this.text=t,this.offset=i,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,i,n,s){return this.append(new ft(e,t,i,(n?1:0)|(s?2:0)))}addElement(e){return this.append(e)}resolveMarkers(e){for(let i=e;i<this.parts.length;i++){let n=this.parts[i];if(!(n instanceof ft&&n.type.resolve&&n.side&2))continue;let s=n.type==kp||n.type==yp,l=n.to-n.from,o,a=i-1;for(;a>=e;a--){let k=this.parts[a];if(!(!(k instanceof ft&&k.side&1&&k.type==n.type)||s&&(n.side&1||k.side&2)&&(k.to-k.from+l)%3==0&&((k.to-k.from)%3||l%3))){o=k;break}}if(!o)continue;let h=n.type.resolve,u=[],f=o.from,c=n.to;if(s){let k=Math.min(2,o.to-o.from,l);f=o.to-k,c=n.from+k,h=k==1?"Emphasis":"StrongEmphasis"}o.type.mark&&u.push(this.elt(o.type.mark,f,o.to));for(let k=a+1;k<i;k++)this.parts[k]instanceof Fr&&u.push(this.parts[k]),this.parts[k]=null;n.type.mark&&u.push(this.elt(n.type.mark,n.from,c));let d=this.elt(h,f,c,u);this.parts[a]=s&&o.from!=f?new ft(o.type,o.from,f,o.side):null,(this.parts[i]=s&&n.to!=c?new ft(n.type,c,n.to,n.side):null)?this.parts.splice(i,0,d):this.parts[i]=d}let t=[];for(let i=e;i<this.parts.length;i++){let n=this.parts[i];n instanceof Fr&&t.push(n)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let i=this.parts[t];if(i instanceof ft&&i.type==e)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}skipSpace(e){return qr(this.text,e-this.offset)+this.offset}elt(e,t,i,n){return typeof e=="string"?q(this.parser.getNodeType(e),t,i,n):new bp(e,t)}}function ba(r,e){if(!e.length)return r;if(!r.length)return e;let t=r.slice(),i=0;for(let n of e){for(;i<t.length&&t[i].to<n.to;)i++;if(i<t.length&&t[i].from<n.from){let s=t[i];s instanceof Fr&&(t[i]=new Fr(s.type,s.from,s.to,ba(s.children,[n])))}else t.splice(i++,0,n)}return t}const yy=[R.CodeBlock,R.ListItem,R.OrderedList,R.BulletList];class xy{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let s=this.fragment.to;for(;s>0&&this.input.read(s-1,s)!=`
`;)s--;this.fragmentEnd=s?s-1:0}let i=this.cursor;i||(i=this.cursor=this.fragment.tree.cursor(),i.firstChild());let n=e+this.fragment.offset;for(;i.to<=n;)if(!i.parent())return!1;for(;;){if(i.from>=n)return this.fragment.from<=t;if(!i.childAfter(n))return!1}}matches(e){let t=this.cursor.tree;return t&&t.prop(J.contextHash)==e}takeNodes(e){let t=this.cursor,i=this.fragment.offset,n=this.fragmentEnd-(this.fragment.openEnd?1:0),s=e.absoluteLineStart,l=s,o=e.block.children.length,a=l,h=o;for(;;){if(t.to-i>n){if(t.type.isAnonymous&&t.firstChild())continue;break}if(e.dontInject.add(t.tree),e.addNode(t.tree,t.from-i),t.type.is("Block")&&(yy.indexOf(t.type.id)<0?(l=t.to-i,o=e.block.children.length):(l=a,o=h,a=t.to-i,h=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>o;)e.block.children.pop(),e.block.positions.pop();return l-s}}const Qy=Dt({"Blockquote/...":x.quote,HorizontalRule:x.contentSeparator,"ATXHeading1/... SetextHeading1/...":x.heading1,"ATXHeading2/... SetextHeading2/...":x.heading2,"ATXHeading3/...":x.heading3,"ATXHeading4/...":x.heading4,"ATXHeading5/...":x.heading5,"ATXHeading6/...":x.heading6,"Comment CommentBlock":x.comment,Escape:x.escape,Entity:x.character,"Emphasis/...":x.emphasis,"StrongEmphasis/...":x.strong,"Link/... Image/...":x.link,"OrderedList/... BulletList/...":x.list,"BlockQuote/...":x.quote,"InlineCode CodeText":x.monospace,URL:x.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":x.processingInstruction,"CodeInfo LinkLabel":x.labelName,LinkTitle:x.string,Paragraph:x.content}),wy=new ks(new cs(gp).extend(Qy),Object.keys(bs).map(r=>bs[r]),Object.keys(bs).map(r=>py[r]),Object.keys(bs),Oy,np,Object.keys(ma).map(r=>ma[r]),Object.keys(ma),[]);function Sy(r,e,t){let i=[];for(let n=r.firstChild,s=e;;n=n.nextSibling){let l=n?n.from:t;if(l>s&&i.push({from:s,to:l}),!n)break;s=n.to}return i}function vy(r){let{codeParser:e,htmlParser:t}=r;return{wrap:ry((n,s)=>{let l=n.type.id;if(e&&(l==R.CodeBlock||l==R.FencedCode)){let o="";if(l==R.FencedCode){let h=n.node.getChild(R.CodeInfo);h&&(o=s.read(h.from,h.to))}let a=e(o);if(a)return{parser:a,overlay:h=>h.type.id==R.CodeText}}else if(t&&(l==R.HTMLBlock||l==R.HTMLTag))return{parser:t,overlay:Sy(n.node,n.from,n.to)};return null})}}const $y={resolve:"Strikethrough",mark:"StrikethroughMark"},Ty={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":x.strikethrough}},{name:"StrikethroughMark",style:x.processingInstruction}],parseInline:[{name:"Strikethrough",parse(r,e,t){return e!=126||r.char(t+1)!=126?-1:r.addDelimiter($y,t,t+2,!0,!0)},after:"Emphasis"}]};function Kr(r,e,t=0,i,n=0){let s=0,l=!0,o=-1,a=-1,h=!1,u=()=>{i.push(r.elt("TableCell",n+o,n+a,r.parser.parseInline(e.slice(o,a),n+o)))};for(let f=t;f<e.length;f++){let c=e.charCodeAt(f);c==124&&!h?((!l||o>-1)&&s++,l=!1,i&&(o>-1&&u(),i.push(r.elt("TableDelimiter",f+n,f+n+1))),o=a=-1):(h||c!=32&&c!=9)&&(o<0&&(o=f),a=f+1),h=!h&&c==92}return o>-1&&(s++,i&&u()),s}function $p(r,e){for(let t=e;t<r.length;t++){let i=r.charCodeAt(t);if(i==124)return!0;i==92&&t++}return!1}const Tp=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class Pp{constructor(){this.rows=null}nextLine(e,t,i){if(this.rows==null){this.rows=!1;let n;if((t.next==45||t.next==58||t.next==124)&&Tp.test(n=t.text.slice(t.pos))){let s=[];Kr(e,i.content,0,s,i.start)==Kr(e,n,t.pos)&&(this.rows=[e.elt("TableHeader",i.start,i.start+i.content.length,s),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){let n=[];Kr(e,t.text,t.pos,n,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,n))}return!1}finish(e,t){return this.rows?(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0):!1}}const Py={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":x.heading}},"TableRow",{name:"TableCell",style:x.content},{name:"TableDelimiter",style:x.processingInstruction}],parseBlock:[{name:"Table",leaf(r,e){return $p(e.content,0)?new Pp:null},endLeaf(r,e,t){if(t.parsers.some(n=>n instanceof Pp)||!$p(e.text,e.basePos))return!1;let i=r.scanLine(r.absoluteLineEnd+1).text;return Tp.test(i)&&Kr(r,e.text,e.basePos)==Kr(r,i,e.basePos)},before:"SetextHeading"}]};class Cy{nextLine(){return!1}finish(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3),...e.parser.parseInline(t.content.slice(3),t.start+3)])),!0}}const Ay={defineNodes:[{name:"Task",block:!0,style:x.list},{name:"TaskMarker",style:x.atom}],parseBlock:[{name:"TaskList",leaf(r,e){return/^\[[ xX]\]/.test(e.content)&&r.parentType().name=="ListItem"?new Cy:null},after:"SetextHeading"}]},Ry=[Py,Ay,Ty];function Cp(r,e,t){return(i,n,s)=>{if(n!=r||i.char(s+1)==r)return-1;let l=[i.elt(t,s,s+1)];for(let o=s+1;o<i.end;o++){let a=i.char(o);if(a==r)return i.addElement(i.elt(e,s,o+1,l.concat(i.elt(t,o,o+1))));if(a==92&&l.push(i.elt("Escape",o,o+++2)),ot(a))break}return-1}}const Wy={defineNodes:[{name:"Superscript",style:x.special(x.content)},{name:"SuperscriptMark",style:x.processingInstruction}],parseInline:[{name:"Superscript",parse:Cp(94,"Superscript","SuperscriptMark")}]},_y={defineNodes:[{name:"Subscript",style:x.special(x.content)},{name:"SubscriptMark",style:x.processingInstruction}],parseInline:[{name:"Subscript",parse:Cp(126,"Subscript","SubscriptMark")}]},Iy={defineNodes:[{name:"Emoji",style:x.character}],parseInline:[{name:"Emoji",parse(r,e,t){let i;return e!=58||!(i=/^[a-zA-Z_0-9]+:/.exec(r.slice(t+1,r.end)))?-1:r.addElement(r.elt("Emoji",t,t+1+i[0].length))}}]},Ap=1024;let zy=0;class at{constructor(e,t){this.from=e,this.to=t}}class te{constructor(e={}){this.id=zy++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ht.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}te.closedBy=new te({deserialize:r=>r.split(" ")}),te.openedBy=new te({deserialize:r=>r.split(" ")}),te.group=new te({deserialize:r=>r.split(" ")}),te.contextHash=new te({perNode:!0}),te.lookAhead=new te({perNode:!0}),te.mounted=new te({perNode:!0});class Xy{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}}const Dy=Object.create(null);class ht{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):Dy,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new ht(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(te.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(te.group),s=-1;s<(n?n.length:0);s++){let l=t[s<0?i.name:n[s]];if(l)return l}}}}ht.none=new ht("",Object.create(null),0,8);class ka{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let s of e){let l=s(i);l&&(n||(n=Object.assign({},i.props)),n[l[0].id]=l[1])}t.push(n?new ht(i.name,n,i.id,i.flags):i)}return new ka(t)}}const xs=new WeakMap,Rp=new WeakMap;var de;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(de||(de={}));class Te{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=this.prop(te.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Jr(this.topNode,e)}cursorAt(e,t=0,i=0){let n=xs.get(this)||this.topNode,s=new Jr(n);return s.moveTo(e,t),xs.set(this,s._tree),s}get topNode(){return new At(this,0,0,null)}resolve(e,t=0){let i=ar(xs.get(this)||this.topNode,e,t,!1);return xs.set(this,i),i}resolveInner(e,t=0){let i=ar(Rp.get(this)||this.topNode,e,t,!0);return Rp.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let l=this.cursor((e.mode||0)|de.IncludeAnonymous);;){let o=!1;if(l.from<=s&&l.to>=n&&(l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;o=!0}for(;o&&i&&!l.type.isAnonymous&&i(l),!l.nextSibling();){if(!l.parent())return;o=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Qa(ht.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new Te(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new Te(ht.none,t,i,n)))}static build(e){return Ey(e)}}Te.empty=new Te(ht.none,[],[],0);class ya{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ya(this.buffer,this.index)}}class Ii{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return ht.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let l=[];for(;e<i;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,t,i,n,s){let{buffer:l}=this,o=-1;for(let a=e;a!=t&&!(Wp(s,n,l[a+1],l[a+2])&&(o=a,i>0));a=l[a+3]);return o}slice(e,t,i,n){let s=this.buffer,l=new Uint16Array(t-e);for(let o=e,a=0;o<t;)l[a++]=s[o++],l[a++]=s[o++]-i,l[a++]=s[o++]-i,l[a++]=s[o++]-e;return new Ii(l,n-i,this.set)}}function Wp(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function _p(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function ar(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let l=!i&&r instanceof At&&r.index<0?null:r.parent;if(!l)return r;r=l}let s=i?0:de.IgnoreOverlays;if(i)for(let l=r,o=l.parent;o;l=o,o=l.parent)l instanceof At&&l.index<0&&((n=o.enter(e,t,s))===null||n===void 0?void 0:n.from)!=l.from&&(r=o);for(;;){let l=r.enter(e,t,s);if(!l)return r;r=l}}class At{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,h=t>0?o.length:-1;e!=h;e+=t){let u=o[e],f=a[e]+l.from;if(!!Wp(n,i,f,f+u.length)){if(u instanceof Ii){if(s&de.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new fi(new Ny(l,u,e,f),null,c)}else if(s&de.IncludeAnonymous||!u.type.isAnonymous||xa(u)){let c;if(!(s&de.IgnoreMounts)&&u.props&&(c=u.prop(te.mounted))&&!c.overlay)return new At(c.tree,f,e,l);let d=new At(u,f,e,l);return s&de.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&de.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+t:e=t<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&de.IgnoreOverlays)&&(n=this._tree.prop(te.mounted))&&n.overlay){let s=e-this.from;for(let{from:l,to:o}of n.overlay)if((t>0?l<=s:l<s)&&(t<0?o>=s:o>s))return new At(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Jr(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return ar(this,e,t,!1)}resolveInner(e,t=0){return ar(this,e,t,!0)}enterUnfinishedNodesBefore(e){return _p(this,e)}getChild(e,t=null,i=null){let n=Qs(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return Qs(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return ws(this,e)}}function Qs(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function ws(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class Ny{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class fi{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new fi(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&de.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new fi(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new fi(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new fi(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Jr(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let l=i.buffer[this.index+1],o=i.buffer[this.index+2];e.push(i.slice(n,s,l,o)),t.push(0)}return new Te(this.type,e,t,this.to-this.from)}resolve(e,t=0){return ar(this,e,t,!1)}resolveInner(e,t=0){return ar(this,e,t,!0)}enterUnfinishedNodesBefore(e){return _p(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=Qs(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return Qs(this,e,t,i)}get node(){return this}matchContext(e){return ws(this,e)}}class Jr{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof At)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof At?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&de.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&de.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&de.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,l=e<0?-1:i._tree.children.length;s!=l;s+=e){let o=i._tree.children[s];if(this.mode&de.IncludeAnonymous||o instanceof Ii||!o.type.isAnonymous||xa(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==n){if(n==this.index)return l;t=l,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new fi(this.buffer,t,this.stack[n]);return this.bufferNode=new fi(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return ws(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return ws(this.node,e,n);let l=i[t.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[n]&&e[n]!=l.name)return!1;n--}}return!0}}function xa(r){return r.children.some(e=>e instanceof Ii||!e.type.isAnonymous||xa(e))}function Ey(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=Ap,reused:s=[],minRepeatType:l=i.types.length}=r,o=Array.isArray(t)?new ya(t,t.length):t,a=i.types,h=0,u=0;function f(m,Q,O,g,T){let{id:y,start:b,end:$,size:C}=o,A=u;for(;C<0;)if(o.next(),C==-1){let D=s[y];O.push(D),g.push(b-m);return}else if(C==-3){h=y;return}else if(C==-4){u=y;return}else throw new RangeError(`Unrecognized record size: ${C}`);let B=a[y],N,z,K=b-m;if($-b<=n&&(z=k(o.pos-Q,T))){let D=new Uint16Array(z.size-z.skip),W=o.pos-z.size,E=D.length;for(;o.pos>W;)E=w(z.start,D,E);N=new Ii(D,$-z.start,i),K=z.start-m}else{let D=o.pos-C;o.next();let W=[],E=[],M=y>=l?y:-1,Z=0,j=$;for(;o.pos>D;)M>=0&&o.id==M&&o.size>=0?(o.end<=j-n&&(d(W,E,b,Z,o.end,j,M,A),Z=W.length,j=o.end),o.next()):f(b,D,W,E,M);if(M>=0&&Z>0&&Z<W.length&&d(W,E,b,Z,b,j,M,A),W.reverse(),E.reverse(),M>-1&&Z>0){let ge=c(B);N=Qa(B,W,E,0,W.length,0,$-b,ge,ge)}else N=p(B,W,E,$-b,A-$)}O.push(N),g.push(K)}function c(m){return(Q,O,g)=>{let T=0,y=Q.length-1,b,$;if(y>=0&&(b=Q[y])instanceof Te){if(!y&&b.type==m&&b.length==g)return b;($=b.prop(te.lookAhead))&&(T=O[y]+b.length+$)}return p(m,Q,O,g,T)}}function d(m,Q,O,g,T,y,b,$){let C=[],A=[];for(;m.length>g;)C.push(m.pop()),A.push(Q.pop()+O-T);m.push(p(i.types[b],C,A,y-T,$-y)),Q.push(T-O)}function p(m,Q,O,g,T=0,y){if(h){let b=[te.contextHash,h];y=y?[b].concat(y):[b]}if(T>25){let b=[te.lookAhead,T];y=y?[b].concat(y):[b]}return new Te(m,Q,O,g,y)}function k(m,Q){let O=o.fork(),g=0,T=0,y=0,b=O.end-n,$={size:0,start:0,skip:0};e:for(let C=O.pos-m;O.pos>C;){let A=O.size;if(O.id==Q&&A>=0){$.size=g,$.start=T,$.skip=y,y+=4,g+=4,O.next();continue}let B=O.pos-A;if(A<0||B<C||O.start<b)break;let N=O.id>=l?4:0,z=O.start;for(O.next();O.pos>B;){if(O.size<0)if(O.size==-3)N+=4;else break e;else O.id>=l&&(N+=4);O.next()}T=z,g+=A,y+=N}return(Q<0||g==m)&&($.size=g,$.start=T,$.skip=y),$.size>4?$:void 0}function w(m,Q,O){let{id:g,start:T,end:y,size:b}=o;if(o.next(),b>=0&&g<l){let $=O;if(b>4){let C=o.pos-(b-4);for(;o.pos>C;)O=w(m,Q,O)}Q[--O]=$,Q[--O]=y-m,Q[--O]=T-m,Q[--O]=g}else b==-3?h=g:b==-4&&(u=g);return O}let S=[],P=[];for(;o.pos>0;)f(r.start||0,r.bufferStart||0,S,P,-1);let v=(e=r.length)!==null&&e!==void 0?e:S.length?P[0]+S[0].length:0;return new Te(a[r.topID],S.reverse(),P.reverse(),v)}const Ip=new WeakMap;function Ss(r,e){if(!r.isAnonymous||e instanceof Ii||e.type!=r)return 1;let t=Ip.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof Te)){t=1;break}t+=Ss(r,i)}Ip.set(e,t)}return t}function Qa(r,e,t,i,n,s,l,o,a){let h=0;for(let p=i;p<n;p++)h+=Ss(r,e[p]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(p,k,w,S,P){for(let v=w;v<S;){let m=v,Q=k[v],O=Ss(r,p[v]);for(v++;v<S;v++){let g=Ss(r,p[v]);if(O+g>=u)break;O+=g}if(v==m+1){if(O>u){let g=p[m];d(g.children,g.positions,0,g.children.length,k[m]+P);continue}f.push(p[m])}else{let g=k[v-1]+p[v-1].length-Q;f.push(Qa(r,p,k,m,v,Q,g,null,a))}c.push(Q+P-s)}}return d(e,t,i,n,0),(o||a)(f,c,l)}class en{constructor(e,t,i,n,s=!1,l=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new en(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,h=0;;o++){let u=o<t.length?t[o]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;l&&l.from<f;){let c=l;if(a>=c.from||f<=c.to||h){let d=Math.max(c.from,a)-h,p=Math.min(c.to,f)-h;c=d>=p?null:new en(d,p,c.tree,c.offset+h,o>0,!!u)}if(c&&n.push(c),l.to>f)break;l=s<e.length?e[s++]:null}if(!u)break;a=u.toA,h=u.toA-u.toB}return n}}class By{startParse(e,t,i){return typeof e=="string"&&(e=new My(e)),i=i?i.length?i.map(n=>new at(n.from,n.to)):[new at(0,0)]:[new at(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class My{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function Ly(r){return(e,t,i,n)=>new Uy(e,r,t,i,n)}class zp{constructor(e,t,i,n,s){this.parser=e,this.parse=t,this.overlay=i,this.target=n,this.ranges=s}}class Zy{constructor(e,t,i,n,s,l,o){this.parser=e,this.predicate=t,this.mounts=i,this.index=n,this.start=s,this.target=l,this.prev=o,this.depth=0,this.ranges=[]}}const wa=new te({perNode:!0});class Uy{constructor(e,t,i,n,s){this.nest=t,this.input=i,this.fragments=n,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let i=this.baseParse.advance();if(!i)return null;if(this.baseParse=null,this.baseTree=i,this.startInner(),this.stoppedAt!=null)for(let n of this.inner)n.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let i=this.baseTree;return this.stoppedAt!=null&&(i=new Te(i.type,i.children,i.positions,i.length,i.propValues.concat([[wa,this.stoppedAt]]))),i}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let i=Object.assign(Object.create(null),e.target.props);i[te.mounted.id]=new Xy(t,e.overlay,e.parser),e.target.props=i}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].ranges[0].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new Gy(this.fragments),t=null,i=null,n=new Jr(new At(this.baseTree,this.ranges[0].from,0,null),de.IncludeAnonymous|de.IgnoreMounts);e:for(let s,l;this.stoppedAt==null||n.from<this.stoppedAt;){let o=!0,a;if(e.hasNode(n)){if(t){let h=t.mounts.find(u=>u.frag.from<=n.from&&u.frag.to>=n.to&&u.mount.overlay);if(h)for(let u of h.mount.overlay){let f=u.from+h.pos,c=u.to+h.pos;f>=n.from&&c<=n.to&&!t.ranges.some(d=>d.from<c&&d.to>f)&&t.ranges.push({from:f,to:c})}}o=!1}else if(i&&(l=jy(i.ranges,n.from,n.to)))o=l!=2;else if(!n.type.isAnonymous&&n.from<n.to&&(s=this.nest(n,this.input))){n.tree||Vy(n);let h=e.findMounts(n.from,s.parser);if(typeof s.overlay=="function")t=new Zy(s.parser,s.overlay,h,this.inner.length,n.from,n.tree,t);else{let u=Np(this.ranges,s.overlay||[new at(n.from,n.to)]);u.length&&this.inner.push(new zp(s.parser,s.parser.startParse(this.input,Ep(h,u),u),s.overlay?s.overlay.map(f=>new at(f.from-n.from,f.to-n.from)):null,n.tree,u)),s.overlay?u.length&&(i={ranges:u,depth:0,prev:i}):o=!1}}else t&&(a=t.predicate(n))&&(a===!0&&(a=new at(n.from,n.to)),a.from<a.to&&t.ranges.push(a));if(o&&n.firstChild())t&&t.depth++,i&&i.depth++;else for(;!n.nextSibling();){if(!n.parent())break e;if(t&&!--t.depth){let h=Np(this.ranges,t.ranges);h.length&&this.inner.splice(t.index,0,new zp(t.parser,t.parser.startParse(this.input,Ep(t.mounts,h),h),t.ranges.map(u=>new at(u.from-t.start,u.to-t.start)),t.target,h)),t=t.prev}i&&!--i.depth&&(i=i.prev)}}}}function jy(r,e,t){for(let i of r){if(i.from>=t)break;if(i.to>e)return i.from<=e&&i.to>=t?2:1}return 0}function Xp(r,e,t,i,n,s){if(e<t){let l=r.buffer[e+1],o=r.buffer[t-2];i.push(r.slice(e,t,l,o)),n.push(l-s)}}function Vy(r){let{node:e}=r,t=0;do r.parent(),t++;while(!r.tree);let i=0,n=r.tree,s=0;for(;s=n.positions[i]+r.from,!(s<=e.from&&s+n.children[i].length>=e.to);i++);let l=n.children[i],o=l.buffer;function a(h,u,f,c,d){let p=h;for(;o[p+2]+s<=e.from;)p=o[p+3];let k=[],w=[];Xp(l,h,p,k,w,c);let S=o[p+1],P=o[p+2],v=S+s==e.from&&P+s==e.to&&o[p]==e.type.id;return k.push(v?e.toTree():a(p+4,o[p+3],l.set.types[o[p]],S,P-S)),w.push(S-c),Xp(l,o[p+3],u,k,w,c),new Te(f,k,w,d)}n.children[i]=a(0,o.length,ht.none,0,l.length);for(let h=0;h<=t;h++)r.childAfter(e.from)}class Dp{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(de.IncludeAnonymous|de.IgnoreMounts)}moveTo(e){let{cursor:t}=this,i=e-this.offset;for(;!this.done&&t.from<i;)t.to>=e&&t.enter(i,1,de.IgnoreOverlays|de.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof Te)t=t.children[0];else break}return!1}}class Gy{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let i=this.curFrag=e[0];this.curTo=(t=i.tree.prop(wa))!==null&&t!==void 0?t:i.to,this.inner=new Dp(i.tree,-i.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(wa))!==null&&e!==void 0?e:t.to,this.inner=new Dp(t.tree,-t.offset)}}findMounts(e,t){var i;let n=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let l=(i=s.tree)===null||i===void 0?void 0:i.prop(te.mounted);if(l&&l.parser==t)for(let o=this.fragI;o<this.fragments.length;o++){let a=this.fragments[o];if(a.from>=s.to)break;a.tree==this.curFrag.tree&&n.push({frag:a,pos:s.from-a.offset,mount:l})}}}return n}}function Np(r,e){let t=null,i=e;for(let n=1,s=0;n<r.length;n++){let l=r[n-1].to,o=r[n].from;for(;s<i.length;s++){let a=i[s];if(a.from>=o)break;a.to<=l||(t||(i=t=e.slice()),a.from<l?(t[s]=new at(a.from,l),a.to>o&&t.splice(s+1,0,new at(o,a.to))):a.to>o?t[s--]=new at(o,a.to):t.splice(s--,1))}}return i}function qy(r,e,t,i){let n=0,s=0,l=!1,o=!1,a=-1e9,h=[];for(;;){let u=n==r.length?1e9:l?r[n].to:r[n].from,f=s==e.length?1e9:o?e[s].to:e[s].from;if(l!=o){let c=Math.max(a,t),d=Math.min(u,f,i);c<d&&h.push(new at(c,d))}if(a=Math.min(u,f),a==1e9)break;u==a&&(l?(l=!1,n++):l=!0),f==a&&(o?(o=!1,s++):o=!0)}return h}function Ep(r,e){let t=[];for(let{pos:i,mount:n,frag:s}of r){let l=i+(n.overlay?n.overlay[0].from:0),o=l+n.tree.length,a=Math.max(s.from,l),h=Math.min(s.to,o);if(n.overlay){let u=n.overlay.map(c=>new at(c.from+i,c.to+i)),f=qy(e,u,a,h);for(let c=0,d=a;;c++){let p=c==f.length,k=p?h:f[c].from;if(k>d&&t.push(new en(d,k,n.tree,-l,s.from>=d,s.to<=k)),p)break;d=f[c].to}}else t.push(new en(a,h,n.tree,-l,s.from>=l,s.to<=o))}return t}class vs{constructor(e,t,i,n,s,l,o,a,h,u=0,f){this.p=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=s,this.score=l,this.buffer=o,this.bufferBase=a,this.curContext=h,this.lookAhead=u,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let n=e.parser.context;return new vs(e,[],t,i,i,0,[],0,n?new Bp(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=e&65535,{parser:n}=this.p,s=n.dynamicPrecedence(i);if(s&&(this.score+=s),t==0){this.pushState(n.getGoto(this.state,i,!0),this.reducePos),i<n.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let l=this.stack.length-(t-1)*3-(e&262144?6:0),o=this.stack[l-2],a=this.stack[l-1],h=this.bufferBase+this.buffer.length-a;if(i<n.minRepeatTerm||e&131072){let u=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,o,u,h+4,!0)}if(e&262144)this.state=this.stack[l];else{let u=this.stack[l-3];this.state=n.getGoto(u,i,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(i,o)}storeNode(e,t,i,n=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let l=this,o=this.buffer.length;if(o==0&&l.parent&&(o=l.bufferBase-l.parent.bufferBase,l=l.parent),o>0&&l.buffer[o-4]==0&&l.buffer[o-1]>-1){if(t==i)return;if(l.buffer[o-2]>=t){l.buffer[o-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,t,i,n);else{let l=this.buffer.length;if(l>0&&this.buffer[l-4]!=0)for(;l>0&&this.buffer[l-2]>i;)this.buffer[l]=this.buffer[l-4],this.buffer[l+1]=this.buffer[l-3],this.buffer[l+2]=this.buffer[l-2],this.buffer[l+3]=this.buffer[l-1],l-=4,n>4&&(n-=4);this.buffer[l]=e,this.buffer[l+1]=t,this.buffer[l+2]=i,this.buffer[l+3]=n}}shift(e,t,i){let n=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:l}=this.p;(i>this.pos||t<=l.maxNode)&&(this.pos=i,l.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,n),this.shiftContext(t,n),t<=l.maxNode&&this.buffer.push(t,n,i,4)}else this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4)}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new vs(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Yy(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if((i&65536)==0)return!0;if(i==0)return!1;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let n=[];for(let s=0,l;s<t.length;s+=2)(l=t[s+1])!=this.state&&this.p.parser.hasAction(l,e)&&n.push(t[s],l);if(this.stack.length<120)for(let s=0;n.length<4<<1&&s<t.length;s+=2){let l=t[s+1];n.some((o,a)=>a&1&&o==l)||n.push(t[s],l)}t=n}let i=[];for(let n=0;n<t.length&&i.length<4;n+=2){let s=t[n+1];if(s==this.state)continue;let l=this.split();l.pushState(s,this.pos),l.storeNode(0,l.pos,l.pos,4,!0),l.shiftContext(t[n],this.pos),l.score-=200,i.push(l)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,n=e&65535,s=this.stack.length-i*3;if(s<0||t.getGoto(this.stack[s],n,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Bp(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Bp{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var Mp;(function(r){r[r.Insert=200]="Insert",r[r.Delete=190]="Delete",r[r.Reduce=100]="Reduce",r[r.MaxNext=4]="MaxNext",r[r.MaxInsertStackDepth=300]="MaxInsertStackDepth",r[r.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(Mp||(Mp={}));class Yy{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class $s{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new $s(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new $s(this.stack,this.pos,this.index)}}class Ts{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Lp=new Ts;class Fy{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Lp,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,n=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!n)return null;let l=this.ranges[--n];s-=i.from-l.to,i=l}for(;t<0?s>i.to:s>=i.to;){if(n==this.ranges.length-1)return null;let l=this.ranges[++n];s+=l.from-i.to,i=l}return s}peek(e){let t=this.chunkOff+e,i,n;if(t>=0&&t<this.chunk.length)i=this.pos+e,n=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let l=this.rangeIndex,o=this.range;for(;o.to<=i;)o=this.ranges[++l];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-i)),n=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),n}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Lp,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(i+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return i}}class Ps{constructor(e,t){this.data=e,this.id=t}token(e,t){Hy(this.data,e,t,this.id)}}Ps.prototype.contextual=Ps.prototype.fallback=Ps.prototype.extend=!1;class Sa{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function Hy(r,e,t,i){let n=0,s=1<<i,{parser:l}=t.p,{dialect:o}=l;e:for(;(s&r[n])!=0;){let a=r[n+1];for(let h=n+3;h<a;h+=2)if((r[h+1]&s)>0){let u=r[h];if(o.allows(u)&&(e.token.value==-1||e.token.value==u||l.overrides(u,e.token.value))){e.acceptToken(u);break}}for(let h=e.next,u=0,f=r[n+2];u<f;){let c=u+f>>1,d=a+c+(c<<1),p=r[d],k=r[d+1];if(h<p)f=c;else if(h>=k)u=c+1;else{n=r[d+2],e.advance();continue e}}break}}function Cs(r,e=Uint16Array){if(typeof r!="string")return r;let t=null;for(let i=0,n=0;i<r.length;){let s=0;for(;;){let l=r.charCodeAt(i++),o=!1;if(l==126){s=65535;break}l>=92&&l--,l>=34&&l--;let a=l-32;if(a>=46&&(a-=46,o=!0),s+=a,o)break;s*=46}t?t[n++]=s:t=new e(s)}return t}const ct=typeof process!="undefined"&&process.env&&/\bparse\b/.test({}.LOG);let va=null;var Zp;(function(r){r[r.Margin=25]="Margin"})(Zp||(Zp={}));function Up(r,e,t){let i=r.cursor(de.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(r.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:r.length}}class Ky{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Up(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Up(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[n],l=this.start[t]+i.positions[n];if(l>e)return this.nextStart=l,null;if(s instanceof Te){if(l==e){if(l<this.safeFrom)return null;let o=l+s.length;if(o<=this.safeTo){let a=s.prop(te.lookAhead);if(!a||o+a<this.fragment.to)return s}}this.index[t]++,l+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(l),this.index.push(0))}else this.index[t]++,this.nextStart=l+s.length}}}class Jy{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Ts)}getActions(e){let t=0,i=null,{parser:n}=e.p,{tokenizers:s}=n,l=n.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,a=0;for(let h=0;h<s.length;h++){if((1<<h&l)==0)continue;let u=s[h],f=this.tokens[h];if(!(i&&!u.fallback)&&((u.contextual||f.start!=e.pos||f.mask!=l||f.context!=o)&&(this.updateCachedToken(f,u,e),f.mask=l,f.context=o),f.lookAhead>f.end+25&&(a=Math.max(f.lookAhead,a)),f.value!=0)){let c=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!u.extend&&(i=f,t>c))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new Ts,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Ts,{pos:i,p:n}=e;return t.start=i,t.end=Math.min(i+1,n.stream.end),t.value=i==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,i){if(t.token(this.stream.reset(i.pos,e),i),e.value>-1){let{parser:n}=i.p;for(let s=0;s<n.specialized.length;s++)if(n.specialized[s]==e.value){let l=n.specializers[s](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else e.value=0,e.end=Math.min(i.p.stream.end,i.pos+1)}putAction(e,t,i,n){for(let s=0;s<n;s+=3)if(this.actions[s]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:s}=e,{parser:l}=e.p,{data:o}=l;for(let a=0;a<2;a++)for(let h=l.stateSlot(s,a?2:1);;h+=3){if(o[h]==65535)if(o[h+1]==1)h=Lt(o,h+2);else{n==0&&o[h+1]==2&&(n=this.putAction(Lt(o,h+2),t,i,n));break}o[h]==t&&(n=this.putAction(Lt(o,h+1),t,i,n))}return n}}var jp;(function(r){r[r.Distance=5]="Distance",r[r.MaxRemainingPerStep=3]="MaxRemainingPerStep",r[r.MinBufferLengthPrune=500]="MinBufferLengthPrune",r[r.ForceReduceLimit=10]="ForceReduceLimit",r[r.CutDepth=15e3]="CutDepth",r[r.CutTo=9e3]="CutTo"})(jp||(jp={}));class ex{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new Fy(t,n),this.tokens=new Jy(e,this.stream),this.topTerm=e.top[1];let{from:s}=n[0];this.stacks=[vs.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new Ky(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],n,s;for(let l=0;l<e.length;l++){let o=e[l];for(;;){if(this.tokens.mainToken=null,o.pos>t)i.push(o);else{if(this.advanceStack(o,i,e))continue;{n||(n=[],s=[]),n.push(o);let a=this.tokens.getMainToken(o);s.push(a.value,a.end)}}break}}if(!i.length){let l=n&&rx(n);if(l)return this.stackToTree(l);if(this.parser.strict)throw ct&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let l=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,s,i);if(l)return this.stackToTree(l.forceAll())}if(this.recovering){let l=this.recovering==1?1:this.recovering*3;if(i.length>l)for(i.sort((o,a)=>a.score-o.score);i.length>l;)i.pop();i.some(o=>o.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let l=0;l<i.length-1;l++){let o=i[l];for(let a=l+1;a<i.length;a++){let h=i[a];if(o.sameState(h)||o.buffer.length>500&&h.buffer.length>500)if((o.score-h.score||o.buffer.length-h.buffer.length)>0)i.splice(a--,1);else{i.splice(l--,1);continue e}}}}this.minStackPos=i[0].pos;for(let l=1;l<i.length;l++)i[l].pos<this.minStackPos&&(this.minStackPos=i[l].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let n=e.pos,{parser:s}=this,l=ct?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,u=h?e.curContext.hash:0;for(let f=this.fragments.nodeAt(n);f;){let c=this.parser.nodeSet.types[f.type.id]==f.type?s.getGoto(e.state,f.type.id):-1;if(c>-1&&f.length&&(!h||(f.prop(te.contextHash)||0)==u))return e.useNode(f,c),ct&&console.log(l+this.stackID(e)+` (via reuse of ${s.getName(f.type.id)})`),!0;if(!(f instanceof Te)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof Te&&f.positions[0]==0)f=d;else break}}let o=s.stateSlot(e.state,4);if(o>0)return e.reduce(o),ct&&console.log(l+this.stackID(e)+` (via always-reduce ${s.getName(o&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let h=0;h<a.length;){let u=a[h++],f=a[h++],c=a[h++],d=h==a.length||!i,p=d?e:e.split();if(p.apply(u,f,c),ct&&console.log(l+this.stackID(p)+` (via ${(u&65536)==0?"shift":`reduce of ${s.getName(u&65535)}`} for ${s.getName(f)} @ ${n}${p==e?"":", split"})`),d)return!0;p.pos>n?t.push(p):i.push(p)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Vp(e,t),!0}}runRecovery(e,t,i){let n=null,s=!1;for(let l=0;l<e.length;l++){let o=e[l],a=t[l<<1],h=t[(l<<1)+1],u=ct?this.stackID(o)+" -> ":"";if(o.deadEnd&&(s||(s=!0,o.restart(),ct&&console.log(u+this.stackID(o)+" (restarted)"),this.advanceFully(o,i))))continue;let f=o.split(),c=u;for(let d=0;f.forceReduce()&&d<10&&(ct&&console.log(c+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));d++)ct&&(c=this.stackID(f)+" -> ");for(let d of o.recoverByInsert(a))ct&&console.log(u+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>o.pos?(h==o.pos&&(h++,a=0),o.recoverByDelete(a,h),ct&&console.log(u+this.stackID(o)+` (via recover-delete ${this.parser.getName(a)})`),Vp(o,i)):(!n||n.score<o.score)&&(n=o)}return n}stackToTree(e){return e.close(),Te.build({buffer:$s.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(va||(va=new WeakMap)).get(e);return t||va.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Vp(r,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==r.pos&&i.sameState(r)){e[t].score<r.score&&(e[t]=r);return}}e.push(r)}class tx{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const $a=r=>r;class ix{constructor(e){this.start=e.start,this.shift=e.shift||$a,this.reduce=e.reduce||$a,this.reuse=e.reuse||$a,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class As extends By{constructor(e){super();if(this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let o=0;o<e.repeatNodeCount;o++)t.push("");let i=Object.keys(e.topRules).map(o=>e.topRules[o][1]),n=[];for(let o=0;o<t.length;o++)n.push([]);function s(o,a,h){n[o].push([a,a.deserialize(String(h))])}if(e.nodeProps)for(let o of e.nodeProps){let a=o[0];typeof a=="string"&&(a=te[a]);for(let h=1;h<o.length;){let u=o[h++];if(u>=0)s(u,a,o[h++]);else{let f=o[h+-u];for(let c=-u;c>0;c--)s(o[h++],a,f);h++}}}this.nodeSet=new ka(t.map((o,a)=>ht.define({name:a>=this.minRepeatTerm?void 0:o,id:a,props:n[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Ap;let l=Cs(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let o=0;o<e.specialized.length;o++)this.specialized[o]=e.specialized[o].term,this.specializers[o]=e.specialized[o].get;this.states=Cs(e.states,Uint32Array),this.data=Cs(e.stateData),this.goto=Cs(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(o=>typeof o=="number"?new Ps(l,o):o),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let n=new ex(this,e,t,i);for(let s of this.wrappers)n=s(n,e,t,i);return n}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let s=n[t+1];;){let l=n[s++],o=l&1,a=n[s++];if(o&&i)return a;for(let h=s+(l>>1);s<h;s++)if(n[s]==e)return a;if(o)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let s=this.stateSlot(e,n?2:1),l;;s+=3){if((l=i[s])==65535)if(i[s+1]==1)l=i[s=Lt(i,s+2)];else{if(i[s+1]==2)return Lt(i,s+2);break}if(l==t||l==0)return Lt(i,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Lt(this.data,i+2);else return!1;if(t==Lt(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Lt(this.data,i+2);else break;if((this.data[i+2]&1)==0){let n=this.data[i+1];t.some((s,l)=>l&1&&s==n)||t.push(this.data[i],n)}}return t}overrides(e,t){let i=Gp(this.data,this.tokenPrecTable,t);return i<0||Gp(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(As.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let n=e.tokenizers.find(s=>s.from==i);return n?n.to:i})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let s of e.split(" ")){let l=t.indexOf(s);l>=0&&(i[l]=!0)}let n=null;for(let s=0;s<t.length;s++)if(!i[s])for(let l=this.dialects[t[s]],o;(o=this.data[l++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[o]=1;return new tx(e,i,n)}static deserialize(e){return new As(e)}}function Lt(r,e){return r[e]|r[e+1]<<16}function Gp(r,e,t){for(let i=e,n;(n=r[i])!=65535;i++)if(n==t)return i-e;return-1}function rx(r){let e=null;for(let t of r){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}const nx=53,sx=1,lx=54,ox=2,ax=55,hx=3,Rs=4,qp=5,Yp=6,Fp=7,Hp=8,ux=9,fx=10,cx=11,Ta=56,dx=12,Kp=57,px=18,Ox=27,gx=30,mx=33,bx=35,kx=0,yx={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},xx={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},Jp={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function Qx(r){return r==45||r==46||r==58||r>=65&&r<=90||r==95||r>=97&&r<=122||r>=161}function eO(r){return r==9||r==10||r==13||r==32}let tO=null,iO=null,rO=0;function Pa(r,e){let t=r.pos+e;if(rO==t&&iO==r)return tO;let i=r.peek(e);for(;eO(i);)i=r.peek(++e);let n="";for(;Qx(i);)n+=String.fromCharCode(i),i=r.peek(++e);return iO=r,rO=t,tO=n?n.toLowerCase():i==wx||i==Sx?void 0:null}const nO=60,sO=62,lO=47,wx=63,Sx=33,vx=45;function oO(r,e){this.name=r,this.parent=e,this.hash=e?e.hash:0;for(let t=0;t<r.length;t++)this.hash+=(this.hash<<4)+r.charCodeAt(t)+(r.charCodeAt(t)<<8)}const $x=[Rs,Hp,qp,Yp,Fp],Tx=new ix({start:null,shift(r,e,t,i){return $x.indexOf(e)>-1?new oO(Pa(i,1)||"",r):r},reduce(r,e){return e==px&&r?r.parent:r},reuse(r,e,t,i){let n=e.type.id;return n==Rs||n==bx?new oO(Pa(i,1)||"",r):r},hash(r){return r?r.hash:0},strict:!1}),Px=new Sa((r,e)=>{if(r.next!=nO){r.next<0&&e.context&&r.acceptToken(Ta);return}r.advance();let t=r.next==lO;t&&r.advance();let i=Pa(r,0);if(i===void 0)return;if(!i)return r.acceptToken(t?dx:Rs);let n=e.context?e.context.name:null;if(t){if(i==n)return r.acceptToken(ux);if(n&&xx[n])return r.acceptToken(Ta,-2);if(e.dialectEnabled(kx))return r.acceptToken(fx);for(let s=e.context;s;s=s.parent)if(s.name==i)return;r.acceptToken(cx)}else{if(i=="script")return r.acceptToken(qp);if(i=="style")return r.acceptToken(Yp);if(i=="textarea")return r.acceptToken(Fp);if(yx.hasOwnProperty(i))return r.acceptToken(Hp);n&&Jp[n]&&Jp[n][i]?r.acceptToken(Ta,-1):r.acceptToken(Rs)}},{contextual:!0}),Cx=new Sa(r=>{for(let e=0,t=0;;t++){if(r.next<0){t&&r.acceptToken(Kp);break}if(r.next==vx)e++;else if(r.next==sO&&e>=2){t>3&&r.acceptToken(Kp,-2);break}else e=0;r.advance()}});function Ca(r,e,t){let i=2+r.length;return new Sa(n=>{for(let s=0,l=0,o=0;;o++){if(n.next<0){o&&n.acceptToken(e);break}if(s==0&&n.next==nO||s==1&&n.next==lO||s>=2&&s<i&&n.next==r.charCodeAt(s-2))s++,l++;else if((s==2||s==i)&&eO(n.next))l++;else if(s==i&&n.next==sO){o>l?n.acceptToken(e,-l):n.acceptToken(t,-(l-2));break}else if((n.next==10||n.next==13)&&o){n.acceptToken(e,1);break}else s=l=0;n.advance()}})}const Ax=Ca("script",nx,sx),Rx=Ca("style",lx,ox),Wx=Ca("textarea",ax,hx),_x=Dt({"Text RawText":x.content,"StartTag StartCloseTag SelfCloserEndTag EndTag SelfCloseEndTag":x.angleBracket,TagName:x.tagName,"MismatchedCloseTag/TagName":[x.tagName,x.invalid],AttributeName:x.attributeName,"AttributeValue UnquotedAttributeValue":x.attributeValue,Is:x.definitionOperator,"EntityReference CharacterReference":x.character,Comment:x.blockComment,ProcessingInst:x.processingInstruction,DoctypeDecl:x.documentMeta}),Ix=As.deserialize({version:14,states:",xOVOxOOO!WQ!bO'#CoO!]Q!bO'#CyO!bQ!bO'#C|O!gQ!bO'#DPO!lQ!bO'#DRO!qOXO'#CnO!|OYO'#CnO#XO[O'#CnO$eOxO'#CnOOOW'#Cn'#CnO$lO!rO'#DSO$tQ!bO'#DUO$yQ!bO'#DVOOOW'#Dj'#DjOOOW'#DX'#DXQVOxOOO%OQ#tO,59ZO%WQ#tO,59eO%`Q#tO,59hO%hQ#tO,59kO%pQ#tO,59mOOOX'#D]'#D]O%xOXO'#CwO&TOXO,59YOOOY'#D^'#D^O&]OYO'#CzO&hOYO,59YOOO['#D_'#D_O&pO[O'#C}O&{O[O,59YOOOW'#D`'#D`O'TOxO,59YO'[Q!bO'#DQOOOW,59Y,59YOOO`'#Da'#DaO'aO!rO,59nOOOW,59n,59nO'iQ!bO,59pO'nQ!bO,59qOOOW-E7V-E7VO'sQ#tO'#CqOOQO'#DY'#DYO(OQ#tO1G.uOOOX1G.u1G.uO(WQ#tO1G/POOOY1G/P1G/PO(`Q#tO1G/SOOO[1G/S1G/SO(hQ#tO1G/VOOOW1G/V1G/VO(pQ#tO1G/XOOOW1G/X1G/XOOOX-E7Z-E7ZO(xQ!bO'#CxOOOW1G.t1G.tOOOY-E7[-E7[O(}Q!bO'#C{OOO[-E7]-E7]O)SQ!bO'#DOOOOW-E7^-E7^O)XQ!bO,59lOOO`-E7_-E7_OOOW1G/Y1G/YOOOW1G/[1G/[OOOW1G/]1G/]O)^Q&jO,59]OOQO-E7W-E7WOOOX7+$a7+$aOOOY7+$k7+$kOOO[7+$n7+$nOOOW7+$q7+$qOOOW7+$s7+$sO)iQ!bO,59dO)nQ!bO,59gO)sQ!bO,59jOOOW1G/W1G/WO)xO,UO'#CtO*WO7[O'#CtOOQO1G.w1G.wOOOW1G/O1G/OOOOW1G/R1G/ROOOW1G/U1G/UOOOO'#DZ'#DZO*fO,UO,59`OOQO,59`,59`OOOO'#D['#D[O*tO7[O,59`OOOO-E7X-E7XOOQO1G.z1G.zOOOO-E7Y-E7Y",stateData:"+[~O!]OS~OSSOTPOUQOVROWTOY]OZ[O[^O^^O_^O`^Oa^Ow^Oz_O!cZO~OdaO~OdbO~OdcO~OddO~OdeO~O!VfOPkP!YkP~O!WiOQnP!YnP~O!XlORqP!YqP~OSSOTPOUQOVROWTOXqOY]OZ[O[^O^^O_^O`^Oa^Ow^O!cZO~O!YrO~P#dO!ZsO!duO~OdvO~OdwO~OfyOj|O~OfyOj!OO~OfyOj!QO~OfyOj!SO~OfyOj!UO~O!VfOPkX!YkX~OP!WO!Y!XO~O!WiOQnX!YnX~OQ!ZO!Y!XO~O!XlORqX!YqX~OR!]O!Y!XO~O!Y!XO~P#dOd!_O~O!ZsO!d!aO~Oj!bO~Oj!cO~Og!dOfeXjeX~OfyOj!fO~OfyOj!gO~OfyOj!hO~OfyOj!iO~OfyOj!jO~Od!kO~Od!lO~Od!mO~Oj!nO~Oi!qO!_!oO!a!pO~Oj!rO~Oj!sO~Oj!tO~O_!uO`!uO!_!wO!`!uO~O_!xO`!xO!a!wO!b!xO~O_!uO`!uO!_!{O!`!uO~O_!xO`!xO!a!{O!b!xO~O`_a!cwz!c~",goto:"%o!_PPPPPPPPPPPPPPPPPP!`!fP!lPP!xPP!{#O#R#X#[#_#e#h#k#q#w!`P!`!`P#}$T$k$q$w$}%T%Z%aPPPPPPPP%gX^OX`pXUOX`pezabcde{}!P!R!TR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ}bQ!PcQ!RdQ!TeZ!e{}!P!R!TQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"\u26A0 StartCloseTag StartCloseTag StartCloseTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue EndTag ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:66,context:Tx,nodeProps:[["closedBy",-11,1,2,3,4,5,6,7,8,9,10,11,"EndTag",-4,19,29,32,35,"CloseTag"],["group",-9,12,15,16,17,18,38,39,40,41,"Entity",14,"Entity TextContent",-3,27,30,33,"TextContent Entity"],["openedBy",26,"StartTag StartCloseTag",-4,28,31,34,36,"OpenTag"]],propSources:[_x],skippedNodes:[0],repeatNodeCount:9,tokenData:"!#b!aR!WOX$kXY)sYZ)sZ]$k]^)s^p$kpq)sqr$krs*zsv$kvw+dwx2yx}$k}!O3f!O!P$k!P!Q7_!Q![$k![!]8u!]!^$k!^!_>b!_!`!!p!`!a8T!a!c$k!c!}8u!}#R$k#R#S8u#S#T$k#T#o8u#o$f$k$f$g&R$g%W$k%W%o8u%o%p$k%p&a8u&a&b$k&b1p8u1p4U$k4U4d8u4d4e$k4e$IS8u$IS$I`$k$I`$Ib8u$Ib$Kh$k$Kh%#t8u%#t&/x$k&/x&Et8u&Et&FV$k&FV;'S8u;'S;:j<t;:j?&r$k?&r?Ah8u?Ah?BY$k?BY?Mn8u?Mn~$k!Z$vc^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g~$k!R&[V^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&Rq&xT^P!bpOv&qwx'Xx!^&q!^!_'g!_~&qP'^R^POv'Xw!^'X!_~'Xp'lQ!bpOv'gx~'ga'yU^P!``Or'rrs'Xsv'rw!^'r!^!_(]!_~'r`(bR!``Or(]sv(]w~(]!Q(rT!``!bpOr(krs'gsv(kwx(]x~(kW)WXiWOX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!a*O^^P!``!bp!]^OX&RXY)sYZ)sZ]&R]^)s^p&Rpq)sqr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!Z+TT!_h^P!bpOv&qwx'Xx!^&q!^!_'g!_~&q!Z+kbiWaPOX,sXZ.QZ],s]^.Q^p,sqr,srs.Qst/]tw,swx.Qx!P,s!P!Q.Q!Q!],s!]!^)R!^!a.Q!a$f,s$f$g.Q$g~,s!Z,xbiWOX,sXZ.QZ],s]^.Q^p,sqr,srs.Qst)Rtw,swx.Qx!P,s!P!Q.Q!Q!],s!]!^.i!^!a.Q!a$f,s$f$g.Q$g~,s!R.TTOp.Qqs.Qt!].Q!]!^.d!^~.Q!R.iO_!R!Z.pXiW_!ROX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!Z/baiWOX0gXZ1qZ]0g]^1q^p0gqr0grs1qsw0gwx1qx!P0g!P!Q1q!Q!]0g!]!^)R!^!a1q!a$f0g$f$g1q$g~0g!Z0laiWOX0gXZ1qZ]0g]^1q^p0gqr0grs1qsw0gwx1qx!P0g!P!Q1q!Q!]0g!]!^2V!^!a1q!a$f0g$f$g1q$g~0g!R1tSOp1qq!]1q!]!^2Q!^~1q!R2VO`!R!Z2^XiW`!ROX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!Z3SU!ax^P!``Or'rrs'Xsv'rw!^'r!^!_(]!_~'r!]3qe^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx}$k}!O5S!O!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g~$k!]5_d^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!`&R!`!a6m!a$f$k$f$g&R$g~$k!T6xV^P!``!bp!dQOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!X7hX^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_!`&R!`!a8T!a~&R!X8`VjU^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!a9U!YfSdQ^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx}$k}!O8u!O!P8u!P!Q&R!Q![8u![!]8u!]!^$k!^!_(k!_!a&R!a!c$k!c!}8u!}#R$k#R#S8u#S#T$k#T#o8u#o$f$k$f$g&R$g$}$k$}%O8u%O%W$k%W%o8u%o%p$k%p&a8u&a&b$k&b1p8u1p4U8u4U4d8u4d4e$k4e$IS8u$IS$I`$k$I`$Ib8u$Ib$Je$k$Je$Jg8u$Jg$Kh$k$Kh%#t8u%#t&/x$k&/x&Et8u&Et&FV$k&FV;'S8u;'S;:j<t;:j?&r$k?&r?Ah8u?Ah?BY$k?BY?Mn8u?Mn~$k!a=Pe^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g;=`$k;=`<%l8u<%l~$k!R>iW!``!bpOq(kqr?Rrs'gsv(kwx(]x!a(k!a!bKj!b~(k!R?YZ!``!bpOr(krs'gsv(kwx(]x}(k}!O?{!O!f(k!f!gAR!g#W(k#W#XGz#X~(k!R@SV!``!bpOr(krs'gsv(kwx(]x}(k}!O@i!O~(k!R@rT!``!bp!cPOr(krs'gsv(kwx(]x~(k!RAYV!``!bpOr(krs'gsv(kwx(]x!q(k!q!rAo!r~(k!RAvV!``!bpOr(krs'gsv(kwx(]x!e(k!e!fB]!f~(k!RBdV!``!bpOr(krs'gsv(kwx(]x!v(k!v!wBy!w~(k!RCQV!``!bpOr(krs'gsv(kwx(]x!{(k!{!|Cg!|~(k!RCnV!``!bpOr(krs'gsv(kwx(]x!r(k!r!sDT!s~(k!RD[V!``!bpOr(krs'gsv(kwx(]x!g(k!g!hDq!h~(k!RDxW!``!bpOrDqrsEbsvDqvwEvwxFfx!`Dq!`!aGb!a~DqqEgT!bpOvEbvxEvx!`Eb!`!aFX!a~EbPEyRO!`Ev!`!aFS!a~EvPFXOzPqF`Q!bpzPOv'gx~'gaFkV!``OrFfrsEvsvFfvwEvw!`Ff!`!aGQ!a~FfaGXR!``zPOr(]sv(]w~(]!RGkT!``!bpzPOr(krs'gsv(kwx(]x~(k!RHRV!``!bpOr(krs'gsv(kwx(]x#c(k#c#dHh#d~(k!RHoV!``!bpOr(krs'gsv(kwx(]x#V(k#V#WIU#W~(k!RI]V!``!bpOr(krs'gsv(kwx(]x#h(k#h#iIr#i~(k!RIyV!``!bpOr(krs'gsv(kwx(]x#m(k#m#nJ`#n~(k!RJgV!``!bpOr(krs'gsv(kwx(]x#d(k#d#eJ|#e~(k!RKTV!``!bpOr(krs'gsv(kwx(]x#X(k#X#YDq#Y~(k!RKqW!``!bpOrKjrsLZsvKjvwLowxNPx!aKj!a!b! g!b~KjqL`T!bpOvLZvxLox!aLZ!a!bM^!b~LZPLrRO!aLo!a!bL{!b~LoPMORO!`Lo!`!aMX!a~LoPM^OwPqMcT!bpOvLZvxLox!`LZ!`!aMr!a~LZqMyQ!bpwPOv'gx~'gaNUV!``OrNPrsLosvNPvwLow!aNP!a!bNk!b~NPaNpV!``OrNPrsLosvNPvwLow!`NP!`!a! V!a~NPa! ^R!``wPOr(]sv(]w~(]!R! nW!``!bpOrKjrsLZsvKjvwLowxNPx!`Kj!`!a!!W!a~Kj!R!!aT!``!bpwPOr(krs'gsv(kwx(]x~(k!V!!{VgS^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R",tokenizers:[Ax,Rx,Wx,Px,Cx,0,1,2,3,4,5],topRules:{Document:[0,13]},dialects:{noMatch:0},tokenPrec:464});function zx(r,e){let t=Object.create(null);for(let i of r.firstChild.getChildren("Attribute")){let n=i.getChild("AttributeName"),s=i.getChild("AttributeValue")||i.getChild("UnquotedAttributeValue");n&&(t[e.read(n.from,n.to)]=s?s.name=="AttributeValue"?e.read(s.from+1,s.to-1):e.read(s.from,s.to):"")}return t}function Aa(r,e,t){let i;for(let n of t)if(!n.attrs||n.attrs(i||(i=zx(r.node.parent,e))))return{parser:n.parser};return null}function Xx(r){let e=[],t=[],i=[];for(let n of r){let s=n.tag=="script"?e:n.tag=="style"?t:n.tag=="textarea"?i:null;if(!s)throw new RangeError("Only script, style, and textarea tags can host nested parsers");s.push(n)}return Ly((n,s)=>{let l=n.type.id;return l==Ox?Aa(n,s,e):l==gx?Aa(n,s,t):l==mx?Aa(n,s,i):null})}const aO=1024;let Dx=0;class Ra{constructor(e,t){this.from=e,this.to=t}}class se{constructor(e={}){this.id=Dx++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=dt.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}se.closedBy=new se({deserialize:r=>r.split(" ")}),se.openedBy=new se({deserialize:r=>r.split(" ")}),se.group=new se({deserialize:r=>r.split(" ")}),se.contextHash=new se({perNode:!0}),se.lookAhead=new se({perNode:!0}),se.mounted=new se({perNode:!0});const Nx=Object.create(null);class dt{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):Nx,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new dt(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(se.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(se.group),s=-1;s<(n?n.length:0);s++){let l=t[s<0?i.name:n[s]];if(l)return l}}}}dt.none=new dt("",Object.create(null),0,8);class Wa{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let s of e){let l=s(i);l&&(n||(n=Object.assign({},i.props)),n[l[0].id]=l[1])}t.push(n?new dt(i.name,n,i.id,i.flags):i)}return new Wa(t)}}const Ws=new WeakMap,hO=new WeakMap;var Re;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Re||(Re={}));class Ge{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=this.prop(se.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new zs(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Ws.get(this)||this.topNode,s=new zs(n);return s.moveTo(e,t),Ws.set(this,s._tree),s}get topNode(){return new Zt(this,0,0,null)}resolve(e,t=0){let i=hr(Ws.get(this)||this.topNode,e,t,!1);return Ws.set(this,i),i}resolveInner(e,t=0){let i=hr(hO.get(this)||this.topNode,e,t,!0);return hO.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let l=this.cursor((e.mode||0)|Re.IncludeAnonymous);;){let o=!1;if(l.from<=s&&l.to>=n&&(l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;o=!0}for(;o&&i&&!l.type.isAnonymous&&i(l),!l.nextSibling();){if(!l.parent())return;o=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:za(dt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new Ge(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new Ge(dt.none,t,i,n)))}static build(e){return Bx(e)}}Ge.empty=new Ge(dt.none,[],[],0);class _a{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new _a(this.buffer,this.index)}}class zi{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return dt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let l=[];for(;e<i;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,t,i,n,s){let{buffer:l}=this,o=-1;for(let a=e;a!=t&&!(uO(s,n,l[a+1],l[a+2])&&(o=a,i>0));a=l[a+3]);return o}slice(e,t,i,n){let s=this.buffer,l=new Uint16Array(t-e);for(let o=e,a=0;o<t;)l[a++]=s[o++],l[a++]=s[o++]-i,l[a++]=s[o++]-i,l[a++]=s[o++]-e;return new zi(l,n-i,this.set)}}function uO(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function fO(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function hr(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let l=!i&&r instanceof Zt&&r.index<0?null:r.parent;if(!l)return r;r=l}let s=i?0:Re.IgnoreOverlays;if(i)for(let l=r,o=l.parent;o;l=o,o=l.parent)l instanceof Zt&&l.index<0&&((n=o.enter(e,t,s))===null||n===void 0?void 0:n.from)!=l.from&&(r=o);for(;;){let l=r.enter(e,t,s);if(!l)return r;r=l}}class Zt{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,h=t>0?o.length:-1;e!=h;e+=t){let u=o[e],f=a[e]+l.from;if(!!uO(n,i,f,f+u.length)){if(u instanceof zi){if(s&Re.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new ci(new Ex(l,u,e,f),null,c)}else if(s&Re.IncludeAnonymous||!u.type.isAnonymous||Ia(u)){let c;if(!(s&Re.IgnoreMounts)&&u.props&&(c=u.prop(se.mounted))&&!c.overlay)return new Zt(c.tree,f,e,l);let d=new Zt(u,f,e,l);return s&Re.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&Re.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+t:e=t<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Re.IgnoreOverlays)&&(n=this._tree.prop(se.mounted))&&n.overlay){let s=e-this.from;for(let{from:l,to:o}of n.overlay)if((t>0?l<=s:l<s)&&(t<0?o>=s:o>s))return new Zt(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new zs(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return hr(this,e,t,!1)}resolveInner(e,t=0){return hr(this,e,t,!0)}enterUnfinishedNodesBefore(e){return fO(this,e)}getChild(e,t=null,i=null){let n=_s(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return _s(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Is(this,e)}}function _s(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function Is(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class Ex{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class ci{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new ci(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Re.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new ci(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ci(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ci(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new zs(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let l=i.buffer[this.index+1],o=i.buffer[this.index+2];e.push(i.slice(n,s,l,o)),t.push(0)}return new Ge(this.type,e,t,this.to-this.from)}resolve(e,t=0){return hr(this,e,t,!1)}resolveInner(e,t=0){return hr(this,e,t,!0)}enterUnfinishedNodesBefore(e){return fO(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=_s(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return _s(this,e,t,i)}get node(){return this}matchContext(e){return Is(this,e)}}class zs{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Zt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Zt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Re.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Re.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Re.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,l=e<0?-1:i._tree.children.length;s!=l;s+=e){let o=i._tree.children[s];if(this.mode&Re.IncludeAnonymous||o instanceof zi||!o.type.isAnonymous||Ia(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==n){if(n==this.index)return l;t=l,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new ci(this.buffer,t,this.stack[n]);return this.bufferNode=new ci(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return Is(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return Is(this.node,e,n);let l=i[t.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[n]&&e[n]!=l.name)return!1;n--}}return!0}}function Ia(r){return r.children.some(e=>e instanceof zi||!e.type.isAnonymous||Ia(e))}function Bx(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=aO,reused:s=[],minRepeatType:l=i.types.length}=r,o=Array.isArray(t)?new _a(t,t.length):t,a=i.types,h=0,u=0;function f(m,Q,O,g,T){let{id:y,start:b,end:$,size:C}=o,A=u;for(;C<0;)if(o.next(),C==-1){let D=s[y];O.push(D),g.push(b-m);return}else if(C==-3){h=y;return}else if(C==-4){u=y;return}else throw new RangeError(`Unrecognized record size: ${C}`);let B=a[y],N,z,K=b-m;if($-b<=n&&(z=k(o.pos-Q,T))){let D=new Uint16Array(z.size-z.skip),W=o.pos-z.size,E=D.length;for(;o.pos>W;)E=w(z.start,D,E);N=new zi(D,$-z.start,i),K=z.start-m}else{let D=o.pos-C;o.next();let W=[],E=[],M=y>=l?y:-1,Z=0,j=$;for(;o.pos>D;)M>=0&&o.id==M&&o.size>=0?(o.end<=j-n&&(d(W,E,b,Z,o.end,j,M,A),Z=W.length,j=o.end),o.next()):f(b,D,W,E,M);if(M>=0&&Z>0&&Z<W.length&&d(W,E,b,Z,b,j,M,A),W.reverse(),E.reverse(),M>-1&&Z>0){let ge=c(B);N=za(B,W,E,0,W.length,0,$-b,ge,ge)}else N=p(B,W,E,$-b,A-$)}O.push(N),g.push(K)}function c(m){return(Q,O,g)=>{let T=0,y=Q.length-1,b,$;if(y>=0&&(b=Q[y])instanceof Ge){if(!y&&b.type==m&&b.length==g)return b;($=b.prop(se.lookAhead))&&(T=O[y]+b.length+$)}return p(m,Q,O,g,T)}}function d(m,Q,O,g,T,y,b,$){let C=[],A=[];for(;m.length>g;)C.push(m.pop()),A.push(Q.pop()+O-T);m.push(p(i.types[b],C,A,y-T,$-y)),Q.push(T-O)}function p(m,Q,O,g,T=0,y){if(h){let b=[se.contextHash,h];y=y?[b].concat(y):[b]}if(T>25){let b=[se.lookAhead,T];y=y?[b].concat(y):[b]}return new Ge(m,Q,O,g,y)}function k(m,Q){let O=o.fork(),g=0,T=0,y=0,b=O.end-n,$={size:0,start:0,skip:0};e:for(let C=O.pos-m;O.pos>C;){let A=O.size;if(O.id==Q&&A>=0){$.size=g,$.start=T,$.skip=y,y+=4,g+=4,O.next();continue}let B=O.pos-A;if(A<0||B<C||O.start<b)break;let N=O.id>=l?4:0,z=O.start;for(O.next();O.pos>B;){if(O.size<0)if(O.size==-3)N+=4;else break e;else O.id>=l&&(N+=4);O.next()}T=z,g+=A,y+=N}return(Q<0||g==m)&&($.size=g,$.start=T,$.skip=y),$.size>4?$:void 0}function w(m,Q,O){let{id:g,start:T,end:y,size:b}=o;if(o.next(),b>=0&&g<l){let $=O;if(b>4){let C=o.pos-(b-4);for(;o.pos>C;)O=w(m,Q,O)}Q[--O]=$,Q[--O]=y-m,Q[--O]=T-m,Q[--O]=g}else b==-3?h=g:b==-4&&(u=g);return O}let S=[],P=[];for(;o.pos>0;)f(r.start||0,r.bufferStart||0,S,P,-1);let v=(e=r.length)!==null&&e!==void 0?e:S.length?P[0]+S[0].length:0;return new Ge(a[r.topID],S.reverse(),P.reverse(),v)}const cO=new WeakMap;function Xs(r,e){if(!r.isAnonymous||e instanceof zi||e.type!=r)return 1;let t=cO.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof Ge)){t=1;break}t+=Xs(r,i)}cO.set(e,t)}return t}function za(r,e,t,i,n,s,l,o,a){let h=0;for(let p=i;p<n;p++)h+=Xs(r,e[p]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(p,k,w,S,P){for(let v=w;v<S;){let m=v,Q=k[v],O=Xs(r,p[v]);for(v++;v<S;v++){let g=Xs(r,p[v]);if(O+g>=u)break;O+=g}if(v==m+1){if(O>u){let g=p[m];d(g.children,g.positions,0,g.children.length,k[m]+P);continue}f.push(p[m])}else{let g=k[v-1]+p[v-1].length-Q;f.push(za(r,p,k,m,v,Q,g,null,a))}c.push(Q+P-s)}}return d(e,t,i,n,0),(o||a)(f,c,l)}class Mx{startParse(e,t,i){return typeof e=="string"&&(e=new Lx(e)),i=i?i.length?i.map(n=>new Ra(n.from,n.to)):[new Ra(0,0)]:[new Ra(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class Lx{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new se({perNode:!0});class Ds{constructor(e,t,i,n,s,l,o,a,h,u=0,f){this.p=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=s,this.score=l,this.buffer=o,this.bufferBase=a,this.curContext=h,this.lookAhead=u,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let n=e.parser.context;return new Ds(e,[],t,i,i,0,[],0,n?new dO(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=e&65535,{parser:n}=this.p,s=n.dynamicPrecedence(i);if(s&&(this.score+=s),t==0){this.pushState(n.getGoto(this.state,i,!0),this.reducePos),i<n.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let l=this.stack.length-(t-1)*3-(e&262144?6:0),o=this.stack[l-2],a=this.stack[l-1],h=this.bufferBase+this.buffer.length-a;if(i<n.minRepeatTerm||e&131072){let u=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,o,u,h+4,!0)}if(e&262144)this.state=this.stack[l];else{let u=this.stack[l-3];this.state=n.getGoto(u,i,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(i,o)}storeNode(e,t,i,n=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let l=this,o=this.buffer.length;if(o==0&&l.parent&&(o=l.bufferBase-l.parent.bufferBase,l=l.parent),o>0&&l.buffer[o-4]==0&&l.buffer[o-1]>-1){if(t==i)return;if(l.buffer[o-2]>=t){l.buffer[o-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,t,i,n);else{let l=this.buffer.length;if(l>0&&this.buffer[l-4]!=0)for(;l>0&&this.buffer[l-2]>i;)this.buffer[l]=this.buffer[l-4],this.buffer[l+1]=this.buffer[l-3],this.buffer[l+2]=this.buffer[l-2],this.buffer[l+3]=this.buffer[l-1],l-=4,n>4&&(n-=4);this.buffer[l]=e,this.buffer[l+1]=t,this.buffer[l+2]=i,this.buffer[l+3]=n}}shift(e,t,i){let n=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:l}=this.p;(i>this.pos||t<=l.maxNode)&&(this.pos=i,l.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,n),this.shiftContext(t,n),t<=l.maxNode&&this.buffer.push(t,n,i,4)}else this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4)}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new Ds(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Zx(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if((i&65536)==0)return!0;if(i==0)return!1;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let n=[];for(let s=0,l;s<t.length;s+=2)(l=t[s+1])!=this.state&&this.p.parser.hasAction(l,e)&&n.push(t[s],l);if(this.stack.length<120)for(let s=0;n.length<4<<1&&s<t.length;s+=2){let l=t[s+1];n.some((o,a)=>a&1&&o==l)||n.push(t[s],l)}t=n}let i=[];for(let n=0;n<t.length&&i.length<4;n+=2){let s=t[n+1];if(s==this.state)continue;let l=this.split();l.pushState(s,this.pos),l.storeNode(0,l.pos,l.pos,4,!0),l.shiftContext(t[n],this.pos),l.score-=200,i.push(l)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,n=e&65535,s=this.stack.length-i*3;if(s<0||t.getGoto(this.stack[s],n,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new dO(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class dO{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var pO;(function(r){r[r.Insert=200]="Insert",r[r.Delete=190]="Delete",r[r.Reduce=100]="Reduce",r[r.MaxNext=4]="MaxNext",r[r.MaxInsertStackDepth=300]="MaxInsertStackDepth",r[r.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(pO||(pO={}));class Zx{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class Ns{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Ns(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Ns(this.stack,this.pos,this.index)}}class Es{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const OO=new Es;class Ux{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=OO,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,n=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!n)return null;let l=this.ranges[--n];s-=i.from-l.to,i=l}for(;t<0?s>i.to:s>=i.to;){if(n==this.ranges.length-1)return null;let l=this.ranges[++n];s+=l.from-i.to,i=l}return s}peek(e){let t=this.chunkOff+e,i,n;if(t>=0&&t<this.chunk.length)i=this.pos+e,n=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let l=this.rangeIndex,o=this.range;for(;o.to<=i;)o=this.ranges[++l];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-i)),n=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),n}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=OO,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(i+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return i}}class Bs{constructor(e,t){this.data=e,this.id=t}token(e,t){jx(this.data,e,t,this.id)}}Bs.prototype.contextual=Bs.prototype.fallback=Bs.prototype.extend=!1;class Xa{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function jx(r,e,t,i){let n=0,s=1<<i,{parser:l}=t.p,{dialect:o}=l;e:for(;(s&r[n])!=0;){let a=r[n+1];for(let h=n+3;h<a;h+=2)if((r[h+1]&s)>0){let u=r[h];if(o.allows(u)&&(e.token.value==-1||e.token.value==u||l.overrides(u,e.token.value))){e.acceptToken(u);break}}for(let h=e.next,u=0,f=r[n+2];u<f;){let c=u+f>>1,d=a+c+(c<<1),p=r[d],k=r[d+1];if(h<p)f=c;else if(h>=k)u=c+1;else{n=r[d+2],e.advance();continue e}}break}}function Ms(r,e=Uint16Array){if(typeof r!="string")return r;let t=null;for(let i=0,n=0;i<r.length;){let s=0;for(;;){let l=r.charCodeAt(i++),o=!1;if(l==126){s=65535;break}l>=92&&l--,l>=34&&l--;let a=l-32;if(a>=46&&(a-=46,o=!0),s+=a,o)break;s*=46}t?t[n++]=s:t=new e(s)}return t}const pt=typeof process!="undefined"&&process.env&&/\bparse\b/.test({}.LOG);let Da=null;var gO;(function(r){r[r.Margin=25]="Margin"})(gO||(gO={}));function mO(r,e,t){let i=r.cursor(Re.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(r.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:r.length}}class Vx{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?mO(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?mO(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[n],l=this.start[t]+i.positions[n];if(l>e)return this.nextStart=l,null;if(s instanceof Ge){if(l==e){if(l<this.safeFrom)return null;let o=l+s.length;if(o<=this.safeTo){let a=s.prop(se.lookAhead);if(!a||o+a<this.fragment.to)return s}}this.index[t]++,l+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(l),this.index.push(0))}else this.index[t]++,this.nextStart=l+s.length}}}class Gx{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Es)}getActions(e){let t=0,i=null,{parser:n}=e.p,{tokenizers:s}=n,l=n.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,a=0;for(let h=0;h<s.length;h++){if((1<<h&l)==0)continue;let u=s[h],f=this.tokens[h];if(!(i&&!u.fallback)&&((u.contextual||f.start!=e.pos||f.mask!=l||f.context!=o)&&(this.updateCachedToken(f,u,e),f.mask=l,f.context=o),f.lookAhead>f.end+25&&(a=Math.max(f.lookAhead,a)),f.value!=0)){let c=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!u.extend&&(i=f,t>c))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new Es,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Es,{pos:i,p:n}=e;return t.start=i,t.end=Math.min(i+1,n.stream.end),t.value=i==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,i){if(t.token(this.stream.reset(i.pos,e),i),e.value>-1){let{parser:n}=i.p;for(let s=0;s<n.specialized.length;s++)if(n.specialized[s]==e.value){let l=n.specializers[s](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else e.value=0,e.end=Math.min(i.p.stream.end,i.pos+1)}putAction(e,t,i,n){for(let s=0;s<n;s+=3)if(this.actions[s]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:s}=e,{parser:l}=e.p,{data:o}=l;for(let a=0;a<2;a++)for(let h=l.stateSlot(s,a?2:1);;h+=3){if(o[h]==65535)if(o[h+1]==1)h=Ut(o,h+2);else{n==0&&o[h+1]==2&&(n=this.putAction(Ut(o,h+2),t,i,n));break}o[h]==t&&(n=this.putAction(Ut(o,h+1),t,i,n))}return n}}var bO;(function(r){r[r.Distance=5]="Distance",r[r.MaxRemainingPerStep=3]="MaxRemainingPerStep",r[r.MinBufferLengthPrune=500]="MinBufferLengthPrune",r[r.ForceReduceLimit=10]="ForceReduceLimit",r[r.CutDepth=15e3]="CutDepth",r[r.CutTo=9e3]="CutTo"})(bO||(bO={}));class qx{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new Ux(t,n),this.tokens=new Gx(e,this.stream),this.topTerm=e.top[1];let{from:s}=n[0];this.stacks=[Ds.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new Vx(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],n,s;for(let l=0;l<e.length;l++){let o=e[l];for(;;){if(this.tokens.mainToken=null,o.pos>t)i.push(o);else{if(this.advanceStack(o,i,e))continue;{n||(n=[],s=[]),n.push(o);let a=this.tokens.getMainToken(o);s.push(a.value,a.end)}}break}}if(!i.length){let l=n&&Fx(n);if(l)return this.stackToTree(l);if(this.parser.strict)throw pt&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let l=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,s,i);if(l)return this.stackToTree(l.forceAll())}if(this.recovering){let l=this.recovering==1?1:this.recovering*3;if(i.length>l)for(i.sort((o,a)=>a.score-o.score);i.length>l;)i.pop();i.some(o=>o.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let l=0;l<i.length-1;l++){let o=i[l];for(let a=l+1;a<i.length;a++){let h=i[a];if(o.sameState(h)||o.buffer.length>500&&h.buffer.length>500)if((o.score-h.score||o.buffer.length-h.buffer.length)>0)i.splice(a--,1);else{i.splice(l--,1);continue e}}}}this.minStackPos=i[0].pos;for(let l=1;l<i.length;l++)i[l].pos<this.minStackPos&&(this.minStackPos=i[l].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let n=e.pos,{parser:s}=this,l=pt?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,u=h?e.curContext.hash:0;for(let f=this.fragments.nodeAt(n);f;){let c=this.parser.nodeSet.types[f.type.id]==f.type?s.getGoto(e.state,f.type.id):-1;if(c>-1&&f.length&&(!h||(f.prop(se.contextHash)||0)==u))return e.useNode(f,c),pt&&console.log(l+this.stackID(e)+` (via reuse of ${s.getName(f.type.id)})`),!0;if(!(f instanceof Ge)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof Ge&&f.positions[0]==0)f=d;else break}}let o=s.stateSlot(e.state,4);if(o>0)return e.reduce(o),pt&&console.log(l+this.stackID(e)+` (via always-reduce ${s.getName(o&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let h=0;h<a.length;){let u=a[h++],f=a[h++],c=a[h++],d=h==a.length||!i,p=d?e:e.split();if(p.apply(u,f,c),pt&&console.log(l+this.stackID(p)+` (via ${(u&65536)==0?"shift":`reduce of ${s.getName(u&65535)}`} for ${s.getName(f)} @ ${n}${p==e?"":", split"})`),d)return!0;p.pos>n?t.push(p):i.push(p)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return kO(e,t),!0}}runRecovery(e,t,i){let n=null,s=!1;for(let l=0;l<e.length;l++){let o=e[l],a=t[l<<1],h=t[(l<<1)+1],u=pt?this.stackID(o)+" -> ":"";if(o.deadEnd&&(s||(s=!0,o.restart(),pt&&console.log(u+this.stackID(o)+" (restarted)"),this.advanceFully(o,i))))continue;let f=o.split(),c=u;for(let d=0;f.forceReduce()&&d<10&&(pt&&console.log(c+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));d++)pt&&(c=this.stackID(f)+" -> ");for(let d of o.recoverByInsert(a))pt&&console.log(u+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>o.pos?(h==o.pos&&(h++,a=0),o.recoverByDelete(a,h),pt&&console.log(u+this.stackID(o)+` (via recover-delete ${this.parser.getName(a)})`),kO(o,i)):(!n||n.score<o.score)&&(n=o)}return n}stackToTree(e){return e.close(),Ge.build({buffer:Ns.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Da||(Da=new WeakMap)).get(e);return t||Da.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function kO(r,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==r.pos&&i.sameState(r)){e[t].score<r.score&&(e[t]=r);return}}e.push(r)}class Yx{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class Ls extends Mx{constructor(e){super();if(this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let o=0;o<e.repeatNodeCount;o++)t.push("");let i=Object.keys(e.topRules).map(o=>e.topRules[o][1]),n=[];for(let o=0;o<t.length;o++)n.push([]);function s(o,a,h){n[o].push([a,a.deserialize(String(h))])}if(e.nodeProps)for(let o of e.nodeProps){let a=o[0];typeof a=="string"&&(a=se[a]);for(let h=1;h<o.length;){let u=o[h++];if(u>=0)s(u,a,o[h++]);else{let f=o[h+-u];for(let c=-u;c>0;c--)s(o[h++],a,f);h++}}}this.nodeSet=new Wa(t.map((o,a)=>dt.define({name:a>=this.minRepeatTerm?void 0:o,id:a,props:n[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=aO;let l=Ms(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let o=0;o<e.specialized.length;o++)this.specialized[o]=e.specialized[o].term,this.specializers[o]=e.specialized[o].get;this.states=Ms(e.states,Uint32Array),this.data=Ms(e.stateData),this.goto=Ms(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(o=>typeof o=="number"?new Bs(l,o):o),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let n=new qx(this,e,t,i);for(let s of this.wrappers)n=s(n,e,t,i);return n}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let s=n[t+1];;){let l=n[s++],o=l&1,a=n[s++];if(o&&i)return a;for(let h=s+(l>>1);s<h;s++)if(n[s]==e)return a;if(o)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let s=this.stateSlot(e,n?2:1),l;;s+=3){if((l=i[s])==65535)if(i[s+1]==1)l=i[s=Ut(i,s+2)];else{if(i[s+1]==2)return Ut(i,s+2);break}if(l==t||l==0)return Ut(i,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Ut(this.data,i+2);else return!1;if(t==Ut(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Ut(this.data,i+2);else break;if((this.data[i+2]&1)==0){let n=this.data[i+1];t.some((s,l)=>l&1&&s==n)||t.push(this.data[i],n)}}return t}overrides(e,t){let i=yO(this.data,this.tokenPrecTable,t);return i<0||yO(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(Ls.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let n=e.tokenizers.find(s=>s.from==i);return n?n.to:i})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let s of e.split(" ")){let l=t.indexOf(s);l>=0&&(i[l]=!0)}let n=null;for(let s=0;s<t.length;s++)if(!i[s])for(let l=this.dialects[t[s]],o;(o=this.data[l++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[o]=1;return new Yx(e,i,n)}static deserialize(e){return new Ls(e)}}function Ut(r,e){return r[e]|r[e+1]<<16}function yO(r,e,t){for(let i=e,n;(n=r[i])!=65535;i++)if(n==t)return i-e;return-1}function Fx(r){let e=null;for(let t of r){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}const Hx=93,xO=1,Kx=94,Jx=95,QO=2,wO=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],eQ=58,tQ=40,SO=95,iQ=91,Zs=45,rQ=46,nQ=35,sQ=37;function Us(r){return r>=65&&r<=90||r>=97&&r<=122||r>=161}function lQ(r){return r>=48&&r<=57}const oQ=new Xa((r,e)=>{for(let t=!1,i=0,n=0;;n++){let{next:s}=r;if(Us(s)||s==Zs||s==SO||t&&lQ(s))!t&&(s!=Zs||n>0)&&(t=!0),i===n&&s==Zs&&i++,r.advance();else{t&&r.acceptToken(s==tQ?Kx:i==2&&e.canShift(QO)?QO:Jx);break}}}),aQ=new Xa(r=>{if(wO.includes(r.peek(-1))){let{next:e}=r;(Us(e)||e==SO||e==nQ||e==rQ||e==iQ||e==eQ||e==Zs)&&r.acceptToken(Hx)}}),hQ=new Xa(r=>{if(!wO.includes(r.peek(-1))){let{next:e}=r;if(e==sQ&&(r.advance(),r.acceptToken(xO)),Us(e)){do r.advance();while(Us(r.next));r.acceptToken(xO)}}}),uQ=Dt({"import charset namespace keyframes":x.definitionKeyword,"media supports":x.controlKeyword,"from to selector":x.keyword,NamespaceName:x.namespace,KeyframeName:x.labelName,TagName:x.tagName,ClassName:x.className,PseudoClassName:x.constant(x.className),IdName:x.labelName,"FeatureName PropertyName":x.propertyName,AttributeName:x.attributeName,NumberLiteral:x.number,KeywordQuery:x.keyword,UnaryQueryOp:x.operatorKeyword,"CallTag ValueName":x.atom,VariableName:x.variableName,Callee:x.operatorKeyword,Unit:x.unit,"UniversalSelector NestingSelector":x.definitionOperator,AtKeyword:x.keyword,MatchOp:x.compareOperator,"ChildOp SiblingOp, LogicOp":x.logicOperator,BinOp:x.arithmeticOperator,Important:x.modifier,Comment:x.blockComment,ParenthesizedContent:x.special(x.name),ColorLiteral:x.color,StringLiteral:x.string,":":x.punctuation,"PseudoOp #":x.derefOperator,"; ,":x.separator,"( )":x.paren,"[ ]":x.squareBracket,"{ }":x.brace}),fQ={__proto__:null,lang:32,"nth-child":32,"nth-last-child":32,"nth-of-type":32,dir:32,url:60,"url-prefix":60,domain:60,regexp:60,selector:134},cQ={__proto__:null,"@import":114,"@media":138,"@charset":142,"@namespace":146,"@keyframes":152,"@supports":164},dQ={__proto__:null,not:128,only:128,from:158,to:160},pQ=Ls.deserialize({version:14,states:"7WOYQ[OOOOQP'#Cd'#CdOOQP'#Cc'#CcO!ZQ[O'#CfO!}QXO'#CaO#UQ[O'#ChO#aQ[O'#DPO#fQ[O'#DTOOQP'#Ec'#EcO#kQdO'#DeO$VQ[O'#DrO#kQdO'#DtO$hQ[O'#DvO$sQ[O'#DyO$xQ[O'#EPO%WQ[O'#EROOQS'#Eb'#EbOOQS'#ES'#ESQYQ[OOOOQP'#Cg'#CgOOQP,59Q,59QO!ZQ[O,59QO%_Q[O'#EVO%yQWO,58{O&RQ[O,59SO#aQ[O,59kO#fQ[O,59oO%_Q[O,59sO%_Q[O,59uO%_Q[O,59vO'bQ[O'#D`OOQS,58{,58{OOQP'#Ck'#CkOOQO'#C}'#C}OOQP,59S,59SO'iQWO,59SO'nQWO,59SOOQP'#DR'#DROOQP,59k,59kOOQO'#DV'#DVO'sQ`O,59oOOQS'#Cp'#CpO#kQdO'#CqO'{QvO'#CsO)VQtO,5:POOQO'#Cx'#CxO'iQWO'#CwO)kQWO'#CyOOQS'#Ef'#EfOOQO'#Dh'#DhO)pQ[O'#DoO*OQWO'#EiO$xQ[O'#DmO*^QWO'#DpOOQO'#Ej'#EjO%|QWO,5:^O*cQpO,5:`OOQS'#Dx'#DxO*kQWO,5:bO*pQ[O,5:bOOQO'#D{'#D{O*xQWO,5:eO*}QWO,5:kO+VQWO,5:mOOQS-E8Q-E8QOOQP1G.l1G.lO+yQXO,5:qOOQO-E8T-E8TOOQS1G.g1G.gOOQP1G.n1G.nO'iQWO1G.nO'nQWO1G.nOOQP1G/V1G/VO,WQ`O1G/ZO,qQXO1G/_O-XQXO1G/aO-oQXO1G/bO.VQXO'#CdO.zQWO'#DaOOQS,59z,59zO/PQWO,59zO/XQ[O,59zO/`QdO'#CoO/gQ[O'#DOOOQP1G/Z1G/ZO#kQdO1G/ZO/nQpO,59]OOQS,59_,59_O#kQdO,59aO/vQWO1G/kOOQS,59c,59cO/{Q!bO,59eO0TQWO'#DhO0`QWO,5:TO0eQWO,5:ZO$xQ[O,5:VO$xQ[O'#EYO0mQWO,5;TO0xQWO,5:XO%_Q[O,5:[OOQS1G/x1G/xOOQS1G/z1G/zOOQS1G/|1G/|O1ZQWO1G/|O1`QdO'#D|OOQS1G0P1G0POOQS1G0V1G0VOOQS1G0X1G0XOOQP7+$Y7+$YOOQP7+$u7+$uO#kQdO7+$uO#kQdO,59{O1nQ[O'#EXO1xQWO1G/fOOQS1G/f1G/fO1xQWO1G/fO2QQtO'#ETO2uQdO'#EeO3PQWO,59ZO3UQXO'#EhO3]QWO,59jO3bQpO7+$uOOQS1G.w1G.wOOQS1G.{1G.{OOQS7+%V7+%VO3jQWO1G/PO#kQdO1G/oOOQO1G/u1G/uOOQO1G/q1G/qO3oQWO,5:tOOQO-E8W-E8WO3}QXO1G/vOOQS7+%h7+%hO4UQYO'#CsO%|QWO'#EZO4^QdO,5:hOOQS,5:h,5:hO4lQpO<<HaO4tQtO1G/gOOQO,5:s,5:sO5XQ[O,5:sOOQO-E8V-E8VOOQS7+%Q7+%QO5cQWO7+%QOOQS-E8R-E8RO#kQdO'#EUO5kQWO,5;POOQT1G.u1G.uO5sQWO,5;SOOQP1G/U1G/UOOQP<<Ha<<HaOOQS7+$k7+$kO5{QdO7+%ZOOQO7+%b7+%bOOQS,5:u,5:uOOQS-E8X-E8XOOQS1G0S1G0SOOQPAN={AN={O6SQtO'#EWO#kQdO'#EWO6}QdO7+%ROOQO7+%R7+%ROOQO1G0_1G0_OOQS<<Hl<<HlO7_QdO,5:pOOQO-E8S-E8SOOQO<<Hu<<HuO7iQtO,5:rOOQS-E8U-E8UOOQO<<Hm<<Hm",stateData:"8j~O#TOSROS~OUWOXWO]TO^TOtUOxVO!Y_O!ZXO!gYO!iZO!k[O!n]O!t^O#RPO#WRO~O#RcO~O]hO^hOpfOtiOxjO|kO!PmO#PlO#WeO~O!RnO~P!`O`sO#QqO#RpO~O#RuO~O#RwO~OQ!QObzOf!QOh!QOn!PO#Q}O#RyO#Z{O~Ob!SO!b!UO!e!VO#R!RO!R#]P~Oh![On!PO#R!ZO~O#R!^O~Ob!SO!b!UO!e!VO#R!RO~O!W#]P~P$VOUWOXWO]TO^TOtUOxVO#RPO#WRO~OpfO!RnO~O`!hO#QqO#RpO~OQ!pOUWOXWO]TO^TOtUOxVO!Y_O!ZXO!gYO!iZO!k[O!n]O!t^O#R!oO#WRO~O!Q!qO~P&^Ob!tO~Ob!uO~Ov!vOz!wO~OP!yObgXjgX!WgX!bgX!egX#RgXagXQgXfgXhgXngXpgX#QgX#ZgXvgX!QgX!VgX~Ob!SOj!zO!b!UO!e!VO#R!RO!W#]P~Ob!}O~Ob!SO!b!UO!e!VO#R#OO~Op#SO!`#RO!R#]X!W#]X~Ob#VO~Oj!zO!W#XO~O!W#YO~Oh#ZOn!PO~O!R#[O~O!RnO!`#RO~O!RnO!W#_O~O]hO^hOtiOxjO|kO!PmO#PlO#WeO~Op!ya!R!yaa!ya~P+_Ov#aOz#bO~O]hO^hOtiOxjO#WeO~Op{i|{i!P{i!R{i#P{ia{i~P,`Op}i|}i!P}i!R}i#P}ia}i~P,`Op!Oi|!Oi!P!Oi!R!Oi#P!Oia!Oi~P,`O]WX]!UX^WXpWXtWXxWX|WX!PWX!RWX#PWX#WWX~O]#cO~O!Q#fO!W#dO~O!Q#fO~P&^Oa#XP~P#kOa#[P~P%_Oa#nOj!zO~O!W#pO~Oh#qOo#qO~O]!^Xa![X!`![X~O]#rO~Oa#sO!`#RO~Op#SO!R#]a!W#]a~O!`#ROp!aa!R!aa!W!aaa!aa~O!W#xO~O!Q#|O!q#zO!r#zO#Z#yO~O!Q!{X!W!{X~P&^O!Q$SO!W#dO~Oj!zOQ!wXa!wXb!wXf!wXh!wXn!wXp!wX#Q!wX#R!wX#Z!wX~Op$VOa#XX~P#kOa$XO~Oa#[X~P!`Oa$ZO~Oj!zOv$[O~Oa$]O~O!`#ROp!|a!R!|a!W!|a~Oa$_O~P+_OP!yO!RgX~O!Q$bO!q#zO!r#zO#Z#yO~Oj!zOv$cO~Oj!zOp$eO!V$gO!Q!Ti!W!Ti~P#kO!Q!{a!W!{a~P&^O!Q$iO!W#dO~Op$VOa#Xa~OpfOa#[a~Oa$lO~P#kOj!zOQ!zXb!zXf!zXh!zXn!zXp!zX!Q!zX!V!zX!W!zX#Q!zX#R!zX#Z!zX~Op$eO!V$oO!Q!Tq!W!Tq~P#kOa!xap!xa~P#kOj!zOQ!zab!zaf!zah!zan!zap!za!Q!za!V!za!W!za#Q!za#R!za#Z!za~Oo#Zj!Pj~",goto:",O#_PPPPP#`P#h#vP#h$U#hPP$[PPP$b$k$kP$}P$kP$k%e%wPPP&a&g#hP&mP#hP&sP#hP#h#hPPP&y']'iPP#`PP'o'o'y'oP'oP'o'oP#`P#`P#`P'|#`P(P(SPP#`P#`(V(e(s(y)T)Z)e)kPPPPPP)q)yP*e*hP+^+a+j]`Obn!s#d$QiWObfklmn!s!u#V#d$QiQObfklmn!s!u#V#d$QQdRR!ceQrTR!ghQ!gsQ!|!OR#`!hq!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jp!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jT#z#[#{q!OXZz!t!w!z#b#c#i#r$O$V$^$e$f$jp!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jQ![[R#Z!]QtTR!ihQ!gtR#`!iQvUR!jiQxVR!kjQoSQ!fgQ#W!XQ#^!`Q#_!aR$`#zQ!rnQ#g!sQ$P#dR$h$QX!pn!s#d$Qa!WY^_|!S!U#R#SR#P!SR!][R!_]R#]!_QbOU!bb!s$QQ!snR$Q#dQ#i!tU$U#i$^$jQ$^#rR$j$VQ$W#iR$k$WQgSS!eg$YR$Y#kQ$f$OR$n$fQ#e!rS$R#e$TR$T#gQ#T!TR#v#TQ#{#[R$a#{]aObn!s#d$Q[SObn!s#d$QQ!dfQ!lkQ!mlQ!nmQ#k!uR#w#VR#j!tQ|XQ!YZQ!xz[#h!t#i#r$V$^$jQ#m!wQ#o!zQ#}#bQ$O#cS$d$O$fR$m$eR#l!uQ!XYQ!a_R!{|U!TY_|Q!`^Q#Q!SQ#U!UQ#t#RR#u#S",nodeNames:"\u26A0 Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent , PseudoClassName ArgList IdSelector # IdName ] AttributeSelector [ AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList from to SupportsStatement supports AtRule",maxTerm:106,nodeProps:[["openedBy",17,"(",48,"{"],["closedBy",18,")",49,"}"]],propSources:[uQ],skippedNodes:[0,3],repeatNodeCount:8,tokenData:"Ay~R![OX$wX^%]^p$wpq%]qr(crs+}st,otu2Uuv$wvw2rwx2}xy3jyz3uz{3z{|4_|}8U}!O8a!O!P8x!P!Q9Z!Q![;e![!]<Y!]!^<x!^!_$w!_!`=T!`!a=`!a!b$w!b!c>O!c!}$w!}#O?[#O#P$w#P#Q?g#Q#R2U#R#T$w#T#U?r#U#c$w#c#d@q#d#o$w#o#pAQ#p#q2U#q#rA]#r#sAh#s#y$w#y#z%]#z$f$w$f$g%]$g#BY$w#BY#BZ%]#BZ$IS$w$IS$I_%]$I_$I|$w$I|$JO%]$JO$JT$w$JT$JU%]$JU$KV$w$KV$KW%]$KW&FU$w&FU&FV%]&FV~$wW$zQOy%Qz~%QW%VQoWOy%Qz~%Q~%bf#T~OX%QX^&v^p%Qpq&vqy%Qz#y%Q#y#z&v#z$f%Q$f$g&v$g#BY%Q#BY#BZ&v#BZ$IS%Q$IS$I_&v$I_$I|%Q$I|$JO&v$JO$JT%Q$JT$JU&v$JU$KV%Q$KV$KW&v$KW&FU%Q&FU&FV&v&FV~%Q~&}f#T~oWOX%QX^&v^p%Qpq&vqy%Qz#y%Q#y#z&v#z$f%Q$f$g&v$g#BY%Q#BY#BZ&v#BZ$IS%Q$IS$I_&v$I_$I|%Q$I|$JO&v$JO$JT%Q$JT$JU&v$JU$KV%Q$KV$KW&v$KW&FU%Q&FU&FV&v&FV~%Q^(fSOy%Qz#]%Q#]#^(r#^~%Q^(wSoWOy%Qz#a%Q#a#b)T#b~%Q^)YSoWOy%Qz#d%Q#d#e)f#e~%Q^)kSoWOy%Qz#c%Q#c#d)w#d~%Q^)|SoWOy%Qz#f%Q#f#g*Y#g~%Q^*_SoWOy%Qz#h%Q#h#i*k#i~%Q^*pSoWOy%Qz#T%Q#T#U*|#U~%Q^+RSoWOy%Qz#b%Q#b#c+_#c~%Q^+dSoWOy%Qz#h%Q#h#i+p#i~%Q^+wQ!VUoWOy%Qz~%Q~,QUOY+}Zr+}rs,ds#O+}#O#P,i#P~+}~,iOh~~,lPO~+}_,tWtPOy%Qz!Q%Q!Q![-^![!c%Q!c!i-^!i#T%Q#T#Z-^#Z~%Q^-cWoWOy%Qz!Q%Q!Q![-{![!c%Q!c!i-{!i#T%Q#T#Z-{#Z~%Q^.QWoWOy%Qz!Q%Q!Q![.j![!c%Q!c!i.j!i#T%Q#T#Z.j#Z~%Q^.qWfUoWOy%Qz!Q%Q!Q![/Z![!c%Q!c!i/Z!i#T%Q#T#Z/Z#Z~%Q^/bWfUoWOy%Qz!Q%Q!Q![/z![!c%Q!c!i/z!i#T%Q#T#Z/z#Z~%Q^0PWoWOy%Qz!Q%Q!Q![0i![!c%Q!c!i0i!i#T%Q#T#Z0i#Z~%Q^0pWfUoWOy%Qz!Q%Q!Q![1Y![!c%Q!c!i1Y!i#T%Q#T#Z1Y#Z~%Q^1_WoWOy%Qz!Q%Q!Q![1w![!c%Q!c!i1w!i#T%Q#T#Z1w#Z~%Q^2OQfUoWOy%Qz~%QY2XSOy%Qz!_%Q!_!`2e!`~%QY2lQzQoWOy%Qz~%QX2wQXPOy%Qz~%Q~3QUOY2}Zw2}wx,dx#O2}#O#P3d#P~2}~3gPO~2}_3oQbVOy%Qz~%Q~3zOa~_4RSUPjSOy%Qz!_%Q!_!`2e!`~%Q_4fUjS!PPOy%Qz!O%Q!O!P4x!P!Q%Q!Q![7_![~%Q^4}SoWOy%Qz!Q%Q!Q![5Z![~%Q^5bWoW#ZUOy%Qz!Q%Q!Q![5Z![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%Q^6PWoWOy%Qz{%Q{|6i|}%Q}!O6i!O!Q%Q!Q![6z![~%Q^6nSoWOy%Qz!Q%Q!Q![6z![~%Q^7RSoW#ZUOy%Qz!Q%Q!Q![6z![~%Q^7fYoW#ZUOy%Qz!O%Q!O!P5Z!P!Q%Q!Q![7_![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%Q_8ZQpVOy%Qz~%Q^8fUjSOy%Qz!O%Q!O!P4x!P!Q%Q!Q![7_![~%Q_8}S#WPOy%Qz!Q%Q!Q![5Z![~%Q~9`RjSOy%Qz{9i{~%Q~9nSoWOy9iyz9zz{:o{~9i~9}ROz9zz{:W{~9z~:ZTOz9zz{:W{!P9z!P!Q:j!Q~9z~:oOR~~:tUoWOy9iyz9zz{:o{!P9i!P!Q;W!Q~9i~;_QoWR~Oy%Qz~%Q^;jY#ZUOy%Qz!O%Q!O!P5Z!P!Q%Q!Q![7_![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%QX<_S]POy%Qz![%Q![!]<k!]~%QX<rQ^PoWOy%Qz~%Q_<}Q!WVOy%Qz~%QY=YQzQOy%Qz~%QX=eS|POy%Qz!`%Q!`!a=q!a~%QX=xQ|PoWOy%Qz~%QX>RUOy%Qz!c%Q!c!}>e!}#T%Q#T#o>e#o~%QX>lY!YPoWOy%Qz}%Q}!O>e!O!Q%Q!Q![>e![!c%Q!c!}>e!}#T%Q#T#o>e#o~%QX?aQxPOy%Qz~%Q^?lQvUOy%Qz~%QX?uSOy%Qz#b%Q#b#c@R#c~%QX@WSoWOy%Qz#W%Q#W#X@d#X~%QX@kQ!`PoWOy%Qz~%QX@tSOy%Qz#f%Q#f#g@d#g~%QXAVQ!RPOy%Qz~%Q_AbQ!QVOy%Qz~%QZAmS!PPOy%Qz!_%Q!_!`2e!`~%Q",tokenizers:[aQ,hQ,oQ,0,1,2,3],topRules:{StyleSheet:[0,4]},specialized:[{term:94,get:r=>fQ[r]||-1},{term:56,get:r=>cQ[r]||-1},{term:95,get:r=>dQ[r]||-1}],tokenPrec:1078});let Na=null;function Ea(){if(!Na&&typeof document=="object"&&document.body){let r=[];for(let e in document.body.style)/[A-Z]|^-|^(item|length)$/.test(e)||r.push(e);Na=r.sort().map(e=>({type:"property",label:e}))}return Na||[]}const vO=["active","after","before","checked","default","disabled","empty","enabled","first-child","first-letter","first-line","first-of-type","focus","hover","in-range","indeterminate","invalid","lang","last-child","last-of-type","link","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-of-type","only-child","optional","out-of-range","placeholder","read-only","read-write","required","root","selection","target","valid","visited"].map(r=>({type:"class",label:r})),$O=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(r=>({type:"keyword",label:r})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(r=>({type:"constant",label:r}))),OQ=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(r=>({type:"type",label:r})),di=/^[\w-]*/,gQ=r=>{let{state:e,pos:t}=r,i=ke(e).resolveInner(t,-1);if(i.name=="PropertyName")return{from:i.from,options:Ea(),validFor:di};if(i.name=="ValueName")return{from:i.from,options:$O,validFor:di};if(i.name=="PseudoClassName")return{from:i.from,options:vO,validFor:di};if(i.name=="TagName"){for(let{parent:l}=i;l;l=l.parent)if(l.name=="Block")return{from:i.from,options:Ea(),validFor:di};return{from:i.from,options:OQ,validFor:di}}if(!r.explicit)return null;let n=i.resolve(t),s=n.childBefore(t);return s&&s.name==":"&&n.name=="PseudoClassSelector"?{from:t,options:vO,validFor:di}:s&&s.name==":"&&n.name=="Declaration"||n.name=="ArgList"?{from:t,options:$O,validFor:di}:n.name=="Block"?{from:t,options:Ea(),validFor:di}:null},Ba=Ji.define({parser:pQ.configure({props:[Xr.add({Declaration:Vn()}),Gn.add({Block:Lf})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function mQ(){return new zr(Ba,Ba.data.of({autocomplete:gQ}))}const TO=1024;let bQ=0;class Ma{constructor(e,t){this.from=e,this.to=t}}class le{constructor(e={}){this.id=bQ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ot.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}le.closedBy=new le({deserialize:r=>r.split(" ")}),le.openedBy=new le({deserialize:r=>r.split(" ")}),le.group=new le({deserialize:r=>r.split(" ")}),le.contextHash=new le({perNode:!0}),le.lookAhead=new le({perNode:!0}),le.mounted=new le({perNode:!0});const kQ=Object.create(null);class Ot{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):kQ,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new Ot(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(le.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(le.group),s=-1;s<(n?n.length:0);s++){let l=t[s<0?i.name:n[s]];if(l)return l}}}}Ot.none=new Ot("",Object.create(null),0,8);class La{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let s of e){let l=s(i);l&&(n||(n=Object.assign({},i.props)),n[l[0].id]=l[1])}t.push(n?new Ot(i.name,n,i.id,i.flags):i)}return new La(t)}}const js=new WeakMap,PO=new WeakMap;var We;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(We||(We={}));class qe{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=this.prop(le.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new qs(this.topNode,e)}cursorAt(e,t=0,i=0){let n=js.get(this)||this.topNode,s=new qs(n);return s.moveTo(e,t),js.set(this,s._tree),s}get topNode(){return new jt(this,0,0,null)}resolve(e,t=0){let i=ur(js.get(this)||this.topNode,e,t,!1);return js.set(this,i),i}resolveInner(e,t=0){let i=ur(PO.get(this)||this.topNode,e,t,!0);return PO.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let l=this.cursor((e.mode||0)|We.IncludeAnonymous);;){let o=!1;if(l.from<=s&&l.to>=n&&(l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;o=!0}for(;o&&i&&!l.type.isAnonymous&&i(l),!l.nextSibling();){if(!l.parent())return;o=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:ja(Ot.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new qe(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new qe(Ot.none,t,i,n)))}static build(e){return xQ(e)}}qe.empty=new qe(Ot.none,[],[],0);class Za{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Za(this.buffer,this.index)}}class Xi{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Ot.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let l=[];for(;e<i;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,t,i,n,s){let{buffer:l}=this,o=-1;for(let a=e;a!=t&&!(CO(s,n,l[a+1],l[a+2])&&(o=a,i>0));a=l[a+3]);return o}slice(e,t,i,n){let s=this.buffer,l=new Uint16Array(t-e);for(let o=e,a=0;o<t;)l[a++]=s[o++],l[a++]=s[o++]-i,l[a++]=s[o++]-i,l[a++]=s[o++]-e;return new Xi(l,n-i,this.set)}}function CO(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function AO(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function ur(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let l=!i&&r instanceof jt&&r.index<0?null:r.parent;if(!l)return r;r=l}let s=i?0:We.IgnoreOverlays;if(i)for(let l=r,o=l.parent;o;l=o,o=l.parent)l instanceof jt&&l.index<0&&((n=o.enter(e,t,s))===null||n===void 0?void 0:n.from)!=l.from&&(r=o);for(;;){let l=r.enter(e,t,s);if(!l)return r;r=l}}class jt{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,h=t>0?o.length:-1;e!=h;e+=t){let u=o[e],f=a[e]+l.from;if(!!CO(n,i,f,f+u.length)){if(u instanceof Xi){if(s&We.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new pi(new yQ(l,u,e,f),null,c)}else if(s&We.IncludeAnonymous||!u.type.isAnonymous||Ua(u)){let c;if(!(s&We.IgnoreMounts)&&u.props&&(c=u.prop(le.mounted))&&!c.overlay)return new jt(c.tree,f,e,l);let d=new jt(u,f,e,l);return s&We.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&We.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+t:e=t<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&We.IgnoreOverlays)&&(n=this._tree.prop(le.mounted))&&n.overlay){let s=e-this.from;for(let{from:l,to:o}of n.overlay)if((t>0?l<=s:l<s)&&(t<0?o>=s:o>s))return new jt(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new qs(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return ur(this,e,t,!1)}resolveInner(e,t=0){return ur(this,e,t,!0)}enterUnfinishedNodesBefore(e){return AO(this,e)}getChild(e,t=null,i=null){let n=Vs(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return Vs(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Gs(this,e)}}function Vs(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function Gs(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class yQ{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class pi{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new pi(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&We.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new pi(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new pi(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new pi(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new qs(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let l=i.buffer[this.index+1],o=i.buffer[this.index+2];e.push(i.slice(n,s,l,o)),t.push(0)}return new qe(this.type,e,t,this.to-this.from)}resolve(e,t=0){return ur(this,e,t,!1)}resolveInner(e,t=0){return ur(this,e,t,!0)}enterUnfinishedNodesBefore(e){return AO(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=Vs(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return Vs(this,e,t,i)}get node(){return this}matchContext(e){return Gs(this,e)}}class qs{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof jt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof jt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&We.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&We.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&We.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,l=e<0?-1:i._tree.children.length;s!=l;s+=e){let o=i._tree.children[s];if(this.mode&We.IncludeAnonymous||o instanceof Xi||!o.type.isAnonymous||Ua(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==n){if(n==this.index)return l;t=l,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new pi(this.buffer,t,this.stack[n]);return this.bufferNode=new pi(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return Gs(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return Gs(this.node,e,n);let l=i[t.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[n]&&e[n]!=l.name)return!1;n--}}return!0}}function Ua(r){return r.children.some(e=>e instanceof Xi||!e.type.isAnonymous||Ua(e))}function xQ(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=TO,reused:s=[],minRepeatType:l=i.types.length}=r,o=Array.isArray(t)?new Za(t,t.length):t,a=i.types,h=0,u=0;function f(m,Q,O,g,T){let{id:y,start:b,end:$,size:C}=o,A=u;for(;C<0;)if(o.next(),C==-1){let D=s[y];O.push(D),g.push(b-m);return}else if(C==-3){h=y;return}else if(C==-4){u=y;return}else throw new RangeError(`Unrecognized record size: ${C}`);let B=a[y],N,z,K=b-m;if($-b<=n&&(z=k(o.pos-Q,T))){let D=new Uint16Array(z.size-z.skip),W=o.pos-z.size,E=D.length;for(;o.pos>W;)E=w(z.start,D,E);N=new Xi(D,$-z.start,i),K=z.start-m}else{let D=o.pos-C;o.next();let W=[],E=[],M=y>=l?y:-1,Z=0,j=$;for(;o.pos>D;)M>=0&&o.id==M&&o.size>=0?(o.end<=j-n&&(d(W,E,b,Z,o.end,j,M,A),Z=W.length,j=o.end),o.next()):f(b,D,W,E,M);if(M>=0&&Z>0&&Z<W.length&&d(W,E,b,Z,b,j,M,A),W.reverse(),E.reverse(),M>-1&&Z>0){let ge=c(B);N=ja(B,W,E,0,W.length,0,$-b,ge,ge)}else N=p(B,W,E,$-b,A-$)}O.push(N),g.push(K)}function c(m){return(Q,O,g)=>{let T=0,y=Q.length-1,b,$;if(y>=0&&(b=Q[y])instanceof qe){if(!y&&b.type==m&&b.length==g)return b;($=b.prop(le.lookAhead))&&(T=O[y]+b.length+$)}return p(m,Q,O,g,T)}}function d(m,Q,O,g,T,y,b,$){let C=[],A=[];for(;m.length>g;)C.push(m.pop()),A.push(Q.pop()+O-T);m.push(p(i.types[b],C,A,y-T,$-y)),Q.push(T-O)}function p(m,Q,O,g,T=0,y){if(h){let b=[le.contextHash,h];y=y?[b].concat(y):[b]}if(T>25){let b=[le.lookAhead,T];y=y?[b].concat(y):[b]}return new qe(m,Q,O,g,y)}function k(m,Q){let O=o.fork(),g=0,T=0,y=0,b=O.end-n,$={size:0,start:0,skip:0};e:for(let C=O.pos-m;O.pos>C;){let A=O.size;if(O.id==Q&&A>=0){$.size=g,$.start=T,$.skip=y,y+=4,g+=4,O.next();continue}let B=O.pos-A;if(A<0||B<C||O.start<b)break;let N=O.id>=l?4:0,z=O.start;for(O.next();O.pos>B;){if(O.size<0)if(O.size==-3)N+=4;else break e;else O.id>=l&&(N+=4);O.next()}T=z,g+=A,y+=N}return(Q<0||g==m)&&($.size=g,$.start=T,$.skip=y),$.size>4?$:void 0}function w(m,Q,O){let{id:g,start:T,end:y,size:b}=o;if(o.next(),b>=0&&g<l){let $=O;if(b>4){let C=o.pos-(b-4);for(;o.pos>C;)O=w(m,Q,O)}Q[--O]=$,Q[--O]=y-m,Q[--O]=T-m,Q[--O]=g}else b==-3?h=g:b==-4&&(u=g);return O}let S=[],P=[];for(;o.pos>0;)f(r.start||0,r.bufferStart||0,S,P,-1);let v=(e=r.length)!==null&&e!==void 0?e:S.length?P[0]+S[0].length:0;return new qe(a[r.topID],S.reverse(),P.reverse(),v)}const RO=new WeakMap;function Ys(r,e){if(!r.isAnonymous||e instanceof Xi||e.type!=r)return 1;let t=RO.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof qe)){t=1;break}t+=Ys(r,i)}RO.set(e,t)}return t}function ja(r,e,t,i,n,s,l,o,a){let h=0;for(let p=i;p<n;p++)h+=Ys(r,e[p]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(p,k,w,S,P){for(let v=w;v<S;){let m=v,Q=k[v],O=Ys(r,p[v]);for(v++;v<S;v++){let g=Ys(r,p[v]);if(O+g>=u)break;O+=g}if(v==m+1){if(O>u){let g=p[m];d(g.children,g.positions,0,g.children.length,k[m]+P);continue}f.push(p[m])}else{let g=k[v-1]+p[v-1].length-Q;f.push(ja(r,p,k,m,v,Q,g,null,a))}c.push(Q+P-s)}}return d(e,t,i,n,0),(o||a)(f,c,l)}class QQ{startParse(e,t,i){return typeof e=="string"&&(e=new wQ(e)),i=i?i.length?i.map(n=>new Ma(n.from,n.to)):[new Ma(0,0)]:[new Ma(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class wQ{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new le({perNode:!0});class Fs{constructor(e,t,i,n,s,l,o,a,h,u=0,f){this.p=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=s,this.score=l,this.buffer=o,this.bufferBase=a,this.curContext=h,this.lookAhead=u,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let n=e.parser.context;return new Fs(e,[],t,i,i,0,[],0,n?new WO(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=e&65535,{parser:n}=this.p,s=n.dynamicPrecedence(i);if(s&&(this.score+=s),t==0){this.pushState(n.getGoto(this.state,i,!0),this.reducePos),i<n.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let l=this.stack.length-(t-1)*3-(e&262144?6:0),o=this.stack[l-2],a=this.stack[l-1],h=this.bufferBase+this.buffer.length-a;if(i<n.minRepeatTerm||e&131072){let u=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,o,u,h+4,!0)}if(e&262144)this.state=this.stack[l];else{let u=this.stack[l-3];this.state=n.getGoto(u,i,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(i,o)}storeNode(e,t,i,n=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let l=this,o=this.buffer.length;if(o==0&&l.parent&&(o=l.bufferBase-l.parent.bufferBase,l=l.parent),o>0&&l.buffer[o-4]==0&&l.buffer[o-1]>-1){if(t==i)return;if(l.buffer[o-2]>=t){l.buffer[o-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,t,i,n);else{let l=this.buffer.length;if(l>0&&this.buffer[l-4]!=0)for(;l>0&&this.buffer[l-2]>i;)this.buffer[l]=this.buffer[l-4],this.buffer[l+1]=this.buffer[l-3],this.buffer[l+2]=this.buffer[l-2],this.buffer[l+3]=this.buffer[l-1],l-=4,n>4&&(n-=4);this.buffer[l]=e,this.buffer[l+1]=t,this.buffer[l+2]=i,this.buffer[l+3]=n}}shift(e,t,i){let n=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:l}=this.p;(i>this.pos||t<=l.maxNode)&&(this.pos=i,l.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,n),this.shiftContext(t,n),t<=l.maxNode&&this.buffer.push(t,n,i,4)}else this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4)}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new Fs(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new SQ(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if((i&65536)==0)return!0;if(i==0)return!1;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let n=[];for(let s=0,l;s<t.length;s+=2)(l=t[s+1])!=this.state&&this.p.parser.hasAction(l,e)&&n.push(t[s],l);if(this.stack.length<120)for(let s=0;n.length<4<<1&&s<t.length;s+=2){let l=t[s+1];n.some((o,a)=>a&1&&o==l)||n.push(t[s],l)}t=n}let i=[];for(let n=0;n<t.length&&i.length<4;n+=2){let s=t[n+1];if(s==this.state)continue;let l=this.split();l.pushState(s,this.pos),l.storeNode(0,l.pos,l.pos,4,!0),l.shiftContext(t[n],this.pos),l.score-=200,i.push(l)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,n=e&65535,s=this.stack.length-i*3;if(s<0||t.getGoto(this.stack[s],n,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new WO(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class WO{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var _O;(function(r){r[r.Insert=200]="Insert",r[r.Delete=190]="Delete",r[r.Reduce=100]="Reduce",r[r.MaxNext=4]="MaxNext",r[r.MaxInsertStackDepth=300]="MaxInsertStackDepth",r[r.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(_O||(_O={}));class SQ{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class Hs{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Hs(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Hs(this.stack,this.pos,this.index)}}class Ks{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const IO=new Ks;class vQ{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=IO,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,n=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!n)return null;let l=this.ranges[--n];s-=i.from-l.to,i=l}for(;t<0?s>i.to:s>=i.to;){if(n==this.ranges.length-1)return null;let l=this.ranges[++n];s+=l.from-i.to,i=l}return s}peek(e){let t=this.chunkOff+e,i,n;if(t>=0&&t<this.chunk.length)i=this.pos+e,n=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let l=this.rangeIndex,o=this.range;for(;o.to<=i;)o=this.ranges[++l];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-i)),n=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),n}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=IO,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(i+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return i}}class Js{constructor(e,t){this.data=e,this.id=t}token(e,t){$Q(this.data,e,t,this.id)}}Js.prototype.contextual=Js.prototype.fallback=Js.prototype.extend=!1;class el{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function $Q(r,e,t,i){let n=0,s=1<<i,{parser:l}=t.p,{dialect:o}=l;e:for(;(s&r[n])!=0;){let a=r[n+1];for(let h=n+3;h<a;h+=2)if((r[h+1]&s)>0){let u=r[h];if(o.allows(u)&&(e.token.value==-1||e.token.value==u||l.overrides(u,e.token.value))){e.acceptToken(u);break}}for(let h=e.next,u=0,f=r[n+2];u<f;){let c=u+f>>1,d=a+c+(c<<1),p=r[d],k=r[d+1];if(h<p)f=c;else if(h>=k)u=c+1;else{n=r[d+2],e.advance();continue e}}break}}function tl(r,e=Uint16Array){if(typeof r!="string")return r;let t=null;for(let i=0,n=0;i<r.length;){let s=0;for(;;){let l=r.charCodeAt(i++),o=!1;if(l==126){s=65535;break}l>=92&&l--,l>=34&&l--;let a=l-32;if(a>=46&&(a-=46,o=!0),s+=a,o)break;s*=46}t?t[n++]=s:t=new e(s)}return t}const gt=typeof process!="undefined"&&process.env&&/\bparse\b/.test({}.LOG);let Va=null;var zO;(function(r){r[r.Margin=25]="Margin"})(zO||(zO={}));function XO(r,e,t){let i=r.cursor(We.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(r.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:r.length}}class TQ{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?XO(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?XO(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[n],l=this.start[t]+i.positions[n];if(l>e)return this.nextStart=l,null;if(s instanceof qe){if(l==e){if(l<this.safeFrom)return null;let o=l+s.length;if(o<=this.safeTo){let a=s.prop(le.lookAhead);if(!a||o+a<this.fragment.to)return s}}this.index[t]++,l+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(l),this.index.push(0))}else this.index[t]++,this.nextStart=l+s.length}}}class PQ{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Ks)}getActions(e){let t=0,i=null,{parser:n}=e.p,{tokenizers:s}=n,l=n.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,a=0;for(let h=0;h<s.length;h++){if((1<<h&l)==0)continue;let u=s[h],f=this.tokens[h];if(!(i&&!u.fallback)&&((u.contextual||f.start!=e.pos||f.mask!=l||f.context!=o)&&(this.updateCachedToken(f,u,e),f.mask=l,f.context=o),f.lookAhead>f.end+25&&(a=Math.max(f.lookAhead,a)),f.value!=0)){let c=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!u.extend&&(i=f,t>c))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new Ks,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Ks,{pos:i,p:n}=e;return t.start=i,t.end=Math.min(i+1,n.stream.end),t.value=i==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,i){if(t.token(this.stream.reset(i.pos,e),i),e.value>-1){let{parser:n}=i.p;for(let s=0;s<n.specialized.length;s++)if(n.specialized[s]==e.value){let l=n.specializers[s](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else e.value=0,e.end=Math.min(i.p.stream.end,i.pos+1)}putAction(e,t,i,n){for(let s=0;s<n;s+=3)if(this.actions[s]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:s}=e,{parser:l}=e.p,{data:o}=l;for(let a=0;a<2;a++)for(let h=l.stateSlot(s,a?2:1);;h+=3){if(o[h]==65535)if(o[h+1]==1)h=Vt(o,h+2);else{n==0&&o[h+1]==2&&(n=this.putAction(Vt(o,h+2),t,i,n));break}o[h]==t&&(n=this.putAction(Vt(o,h+1),t,i,n))}return n}}var DO;(function(r){r[r.Distance=5]="Distance",r[r.MaxRemainingPerStep=3]="MaxRemainingPerStep",r[r.MinBufferLengthPrune=500]="MinBufferLengthPrune",r[r.ForceReduceLimit=10]="ForceReduceLimit",r[r.CutDepth=15e3]="CutDepth",r[r.CutTo=9e3]="CutTo"})(DO||(DO={}));class CQ{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new vQ(t,n),this.tokens=new PQ(e,this.stream),this.topTerm=e.top[1];let{from:s}=n[0];this.stacks=[Fs.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new TQ(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],n,s;for(let l=0;l<e.length;l++){let o=e[l];for(;;){if(this.tokens.mainToken=null,o.pos>t)i.push(o);else{if(this.advanceStack(o,i,e))continue;{n||(n=[],s=[]),n.push(o);let a=this.tokens.getMainToken(o);s.push(a.value,a.end)}}break}}if(!i.length){let l=n&&WQ(n);if(l)return this.stackToTree(l);if(this.parser.strict)throw gt&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let l=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,s,i);if(l)return this.stackToTree(l.forceAll())}if(this.recovering){let l=this.recovering==1?1:this.recovering*3;if(i.length>l)for(i.sort((o,a)=>a.score-o.score);i.length>l;)i.pop();i.some(o=>o.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let l=0;l<i.length-1;l++){let o=i[l];for(let a=l+1;a<i.length;a++){let h=i[a];if(o.sameState(h)||o.buffer.length>500&&h.buffer.length>500)if((o.score-h.score||o.buffer.length-h.buffer.length)>0)i.splice(a--,1);else{i.splice(l--,1);continue e}}}}this.minStackPos=i[0].pos;for(let l=1;l<i.length;l++)i[l].pos<this.minStackPos&&(this.minStackPos=i[l].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let n=e.pos,{parser:s}=this,l=gt?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,u=h?e.curContext.hash:0;for(let f=this.fragments.nodeAt(n);f;){let c=this.parser.nodeSet.types[f.type.id]==f.type?s.getGoto(e.state,f.type.id):-1;if(c>-1&&f.length&&(!h||(f.prop(le.contextHash)||0)==u))return e.useNode(f,c),gt&&console.log(l+this.stackID(e)+` (via reuse of ${s.getName(f.type.id)})`),!0;if(!(f instanceof qe)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof qe&&f.positions[0]==0)f=d;else break}}let o=s.stateSlot(e.state,4);if(o>0)return e.reduce(o),gt&&console.log(l+this.stackID(e)+` (via always-reduce ${s.getName(o&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let h=0;h<a.length;){let u=a[h++],f=a[h++],c=a[h++],d=h==a.length||!i,p=d?e:e.split();if(p.apply(u,f,c),gt&&console.log(l+this.stackID(p)+` (via ${(u&65536)==0?"shift":`reduce of ${s.getName(u&65535)}`} for ${s.getName(f)} @ ${n}${p==e?"":", split"})`),d)return!0;p.pos>n?t.push(p):i.push(p)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return NO(e,t),!0}}runRecovery(e,t,i){let n=null,s=!1;for(let l=0;l<e.length;l++){let o=e[l],a=t[l<<1],h=t[(l<<1)+1],u=gt?this.stackID(o)+" -> ":"";if(o.deadEnd&&(s||(s=!0,o.restart(),gt&&console.log(u+this.stackID(o)+" (restarted)"),this.advanceFully(o,i))))continue;let f=o.split(),c=u;for(let d=0;f.forceReduce()&&d<10&&(gt&&console.log(c+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));d++)gt&&(c=this.stackID(f)+" -> ");for(let d of o.recoverByInsert(a))gt&&console.log(u+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>o.pos?(h==o.pos&&(h++,a=0),o.recoverByDelete(a,h),gt&&console.log(u+this.stackID(o)+` (via recover-delete ${this.parser.getName(a)})`),NO(o,i)):(!n||n.score<o.score)&&(n=o)}return n}stackToTree(e){return e.close(),qe.build({buffer:Hs.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Va||(Va=new WeakMap)).get(e);return t||Va.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function NO(r,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==r.pos&&i.sameState(r)){e[t].score<r.score&&(e[t]=r);return}}e.push(r)}class AQ{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const Ga=r=>r;class RQ{constructor(e){this.start=e.start,this.shift=e.shift||Ga,this.reduce=e.reduce||Ga,this.reuse=e.reuse||Ga,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class il extends QQ{constructor(e){super();if(this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let o=0;o<e.repeatNodeCount;o++)t.push("");let i=Object.keys(e.topRules).map(o=>e.topRules[o][1]),n=[];for(let o=0;o<t.length;o++)n.push([]);function s(o,a,h){n[o].push([a,a.deserialize(String(h))])}if(e.nodeProps)for(let o of e.nodeProps){let a=o[0];typeof a=="string"&&(a=le[a]);for(let h=1;h<o.length;){let u=o[h++];if(u>=0)s(u,a,o[h++]);else{let f=o[h+-u];for(let c=-u;c>0;c--)s(o[h++],a,f);h++}}}this.nodeSet=new La(t.map((o,a)=>Ot.define({name:a>=this.minRepeatTerm?void 0:o,id:a,props:n[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=TO;let l=tl(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let o=0;o<e.specialized.length;o++)this.specialized[o]=e.specialized[o].term,this.specializers[o]=e.specialized[o].get;this.states=tl(e.states,Uint32Array),this.data=tl(e.stateData),this.goto=tl(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(o=>typeof o=="number"?new Js(l,o):o),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let n=new CQ(this,e,t,i);for(let s of this.wrappers)n=s(n,e,t,i);return n}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let s=n[t+1];;){let l=n[s++],o=l&1,a=n[s++];if(o&&i)return a;for(let h=s+(l>>1);s<h;s++)if(n[s]==e)return a;if(o)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let s=this.stateSlot(e,n?2:1),l;;s+=3){if((l=i[s])==65535)if(i[s+1]==1)l=i[s=Vt(i,s+2)];else{if(i[s+1]==2)return Vt(i,s+2);break}if(l==t||l==0)return Vt(i,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Vt(this.data,i+2);else return!1;if(t==Vt(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Vt(this.data,i+2);else break;if((this.data[i+2]&1)==0){let n=this.data[i+1];t.some((s,l)=>l&1&&s==n)||t.push(this.data[i],n)}}return t}overrides(e,t){let i=EO(this.data,this.tokenPrecTable,t);return i<0||EO(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(il.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let n=e.tokenizers.find(s=>s.from==i);return n?n.to:i})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let s of e.split(" ")){let l=t.indexOf(s);l>=0&&(i[l]=!0)}let n=null;for(let s=0;s<t.length;s++)if(!i[s])for(let l=this.dialects[t[s]],o;(o=this.data[l++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[o]=1;return new AQ(e,i,n)}static deserialize(e){return new il(e)}}function Vt(r,e){return r[e]|r[e+1]<<16}function EO(r,e,t){for(let i=e,n;(n=r[i])!=65535;i++)if(n==t)return i-e;return-1}function WQ(r){let e=null;for(let t of r){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}const BO=281,MO=1,_Q=2,rl=282,IQ=3,zQ=283,LO=284,XQ=4,DQ=286,NQ=287,EQ=5,BQ=6,MQ=1,LQ=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],ZO=125,ZQ=123,UQ=59,UO=47,jQ=42,VQ=43,GQ=45,qQ=36,YQ=96,FQ=92,HQ=new RQ({start:!1,shift(r,e){return e==EQ||e==BQ||e==DQ?r:e==NQ},strict:!1}),KQ=new el((r,e)=>{let{next:t}=r;(t==ZO||t==-1||e.context)&&e.canShift(LO)&&r.acceptToken(LO)},{contextual:!0,fallback:!0}),JQ=new el((r,e)=>{let{next:t}=r,i;LQ.indexOf(t)>-1||t==UO&&((i=r.peek(1))==UO||i==jQ)||t!=ZO&&t!=UQ&&t!=-1&&!e.context&&e.canShift(BO)&&r.acceptToken(BO)},{contextual:!0}),ew=new el((r,e)=>{let{next:t}=r;if((t==VQ||t==GQ)&&(r.advance(),t==r.next)){r.advance();let i=!e.context&&e.canShift(MO);r.acceptToken(i?MO:_Q)}},{contextual:!0}),tw=new el(r=>{for(let e=!1,t=0;;t++){let{next:i}=r;if(i<0){t&&r.acceptToken(rl);break}else if(i==YQ){t?r.acceptToken(rl):r.acceptToken(zQ,1);break}else if(i==ZQ&&e){t==1?r.acceptToken(IQ,1):r.acceptToken(rl,-1);break}else if(i==10&&t){r.advance(),r.acceptToken(rl);break}else i==FQ&&r.advance();e=i==qQ,r.advance()}});function iw(r,e){return r=="extends"&&e.dialectEnabled(MQ)?XQ:-1}const rw=Dt({"get set async static":x.modifier,"for while do if else switch try catch finally return throw break continue default case":x.controlKeyword,"in of await yield void typeof delete instanceof":x.operatorKeyword,"let var const function class extends":x.definitionKeyword,"import export from":x.moduleKeyword,"with debugger as new":x.keyword,TemplateString:x.special(x.string),Super:x.atom,BooleanLiteral:x.bool,this:x.self,null:x.null,Star:x.modifier,VariableName:x.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":x.function(x.variableName),VariableDefinition:x.definition(x.variableName),Label:x.labelName,PropertyName:x.propertyName,PrivatePropertyName:x.special(x.propertyName),"CallExpression/MemberExpression/PropertyName":x.function(x.propertyName),"FunctionDeclaration/VariableDefinition":x.function(x.definition(x.variableName)),"ClassDeclaration/VariableDefinition":x.definition(x.className),PropertyDefinition:x.definition(x.propertyName),PrivatePropertyDefinition:x.definition(x.special(x.propertyName)),UpdateOp:x.updateOperator,LineComment:x.lineComment,BlockComment:x.blockComment,Number:x.number,String:x.string,ArithOp:x.arithmeticOperator,LogicOp:x.logicOperator,BitOp:x.bitwiseOperator,CompareOp:x.compareOperator,RegExp:x.regexp,Equals:x.definitionOperator,"Arrow : Spread":x.punctuation,"( )":x.paren,"[ ]":x.squareBracket,"{ }":x.brace,"InterpolationStart InterpolationEnd":x.special(x.brace),".":x.derefOperator,", ;":x.separator,TypeName:x.typeName,TypeDefinition:x.definition(x.typeName),"type enum interface implements namespace module declare":x.definitionKeyword,"abstract global Privacy readonly override":x.modifier,"is keyof unique infer":x.operatorKeyword,JSXAttributeValue:x.attributeValue,JSXText:x.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":x.angleBracket,"JSXIdentifier JSXNameSpacedName":x.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":x.attributeName}),nw={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},sw={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},lw={__proto__:null,"<":129},ow=il.deserialize({version:14,states:"$4|O`QYOOO'QQ$IfO'#ChO'XOSO'#DVO)dQYO'#D]O)tQYO'#DhO){QYO'#DrO-xQYO'#DxOOQO'#E]'#E]O.]QWO'#E[O.bQWO'#E[OOQ$IU'#Ef'#EfO0aQ$IfO'#ItO2wQ$IfO'#IuO3eQWO'#EzO3jQpO'#FaOOQ$IU'#FS'#FSO3rO!bO'#FSO4QQWO'#FhO5_QWO'#FgOOQ$IU'#Iu'#IuOOQ$IS'#It'#ItOOQQ'#J^'#J^O5dQWO'#HpO5iQ$I[O'#HqOOQQ'#Ih'#IhOOQQ'#Hr'#HrQ`QYOOO){QYO'#DjO5qQWO'#G[O5vQ#tO'#CmO6UQWO'#EZO6aQWO'#EgO6fQ#tO'#FRO7QQWO'#G[O7VQWO'#G`O7bQWO'#G`O7pQWO'#GcO7pQWO'#GdO7pQWO'#GfO5qQWO'#GiO8aQWO'#GlO9oQWO'#CdO:PQWO'#GyO:XQWO'#HPO:XQWO'#HRO`QYO'#HTO:XQWO'#HVO:XQWO'#HYO:^QWO'#H`O:cQ$I]O'#HfO){QYO'#HhO:nQ$I]O'#HjO:yQ$I]O'#HlO5iQ$I[O'#HnO){QYO'#DWOOOS'#Ht'#HtO;UOSO,59qOOQ$IU,59q,59qO=gQbO'#ChO=qQYO'#HuO>UQWO'#IvO@TQbO'#IvO'dQYO'#IvO@[QWO,59wO@rQ&jO'#DbOAkQWO'#E]OAxQWO'#JROBTQWO'#JQOBTQWO'#JQOB]QWO,5:yOBbQWO'#JPOBiQWO'#DyO5vQ#tO'#EZOBwQWO'#EZOCSQ`O'#FROOQ$IU,5:S,5:SOC[QYO,5:SOEYQ$IfO,5:^OEvQWO,5:dOFaQ$I[O'#JOO7VQWO'#I}OFhQWO'#I}OFpQWO,5:xOFuQWO'#I}OGTQYO,5:vOITQWO'#EWOJ_QWO,5:vOKnQWO'#DlOKuQYO'#DqOLPQ&jO,5;PO){QYO,5;POOQQ'#Er'#ErOOQQ'#Et'#EtO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;ROOQQ'#Ex'#ExOLXQYO,5;cOOQ$IU,5;h,5;hOOQ$IU,5;i,5;iONXQWO,5;iOOQ$IU,5;j,5;jO){QYO'#IPON^Q$I[O,5<TONxQWO,5;RO){QYO,5;fO! bQpO'#JVO! PQpO'#JVO! iQpO'#JVO! zQpO,5;qOOOO,5;{,5;{O!!YQYO'#FcOOOO'#IO'#IOO3rO!bO,5;nO!!aQpO'#FeOOQ$IU,5;n,5;nO!!}Q,UO'#CrOOQ$IU'#Cu'#CuO!#bQWO'#CuO!#gOSO'#CyO!$TQ#tO,5<QO!$[QWO,5<SO!%hQWO'#FrO!%uQWO'#FsO!%zQWO'#FwO!&yQ&jO'#F{O!'lQ,UO'#IqOOQ$IU'#Iq'#IqO!'vQWO'#IpO!(UQWO'#IoOOQ$IU'#Cs'#CsOOQ$IU'#C|'#C|O!(^QWO'#DOOJdQWO'#FjOJdQWO'#FlO!(cQWO'#FnO!(hQWO'#FoO!(mQWO'#FuOJdQWO'#FzO!(rQWO'#E^O!)ZQWO,5<RO`QYO,5>[OOQQ'#Ik'#IkOOQQ,5>],5>]OOQQ-E;p-E;pO!+VQ$IfO,5:UOOQ$IS'#Cp'#CpO!+vQ#tO,5<vOOQO'#Cf'#CfO!,XQWO'#CqO!,aQ$I[O'#IlO5_QWO'#IlO:^QWO,59XO!,rQpO,59XO!,zQ#tO,59XO5vQ#tO,59XO!-VQWO,5:vO!-_QWO'#GxO!-mQWO'#JbO){QYO,5;kO!-uQ&jO,5;mO!-zQWO,5=cO!.PQWO,5=cO!.UQWO,5=cO5iQ$I[O,5=cO5qQWO,5<vO!.dQWO'#E_O!.xQ&jO'#E`OOQ$IS'#JP'#JPO!/ZQ$I[O'#J_O5iQ$I[O,5<zO7pQWO,5=QOOQO'#Cr'#CrO!/fQpO,5<}O!/nQ#tO,5=OO!/yQWO,5=QO!0OQ`O,5=TO:^QWO'#GnO5qQWO'#GpO!0WQWO'#GpO5vQ#tO'#GsO!0]QWO'#GsOOQQ,5=W,5=WO!0bQWO'#GtO!0jQWO'#CmO!0oQWO,59OO!0yQWO,59OO!2{QYO,59OOOQQ,59O,59OO!3YQ$I[O,59OO){QYO,59OO!3eQYO'#G{OOQQ'#G|'#G|OOQQ'#G}'#G}O`QYO,5=eO!3uQWO,5=eO){QYO'#DxO`QYO,5=kO`QYO,5=mO!3zQWO,5=oO`QYO,5=qO!4PQWO,5=tO!4UQYO,5=zOOQQ,5>Q,5>QO){QYO,5>QO5iQ$I[O,5>SOOQQ,5>U,5>UO!8VQWO,5>UOOQQ,5>W,5>WO!8VQWO,5>WOOQQ,5>Y,5>YO!8[Q`O,59rOOOS-E;r-E;rOOQ$IU1G/]1G/]O!8aQbO,5>aO'dQYO,5>aOOQO,5>f,5>fO!8kQYO'#HuOOQO-E;s-E;sO!8xQWO,5?bO!9QQbO,5?bO!9XQWO,5?lOOQ$IU1G/c1G/cO!9aQpO'#DTOOQO'#Ix'#IxO){QYO'#IxO!:OQpO'#IxO!:mQpO'#DcO!;OQ&jO'#DcO!=ZQYO'#DcO!=bQWO'#IwO!=jQWO,59|O!=oQWO'#EaO!=}QWO'#JSO!>VQWO,5:zO!>mQ&jO'#DcO){QYO,5?mO!>wQWO'#HzOOQO-E;x-E;xO!9XQWO,5?lOOQ$IS1G0e1G0eO!@TQ&jO'#D|OOQ$IU,5:e,5:eO){QYO,5:eOITQWO,5:eO!@[QWO,5:eO:^QWO,5:uO!,rQpO,5:uO!,zQ#tO,5:uO5vQ#tO,5:uOOQ$IU1G/n1G/nOOQ$IU1G0O1G0OOOQ$IS'#EV'#EVO){QYO,5?jO!@gQ$I[O,5?jO!@xQ$I[O,5?jO!APQWO,5?iO!AXQWO'#H|O!APQWO,5?iOOQ$IS1G0d1G0dO7VQWO,5?iOOQ$IU1G0b1G0bO!AsQ$IfO1G0bO!BdQ$IdO,5:rOOQ$IU'#Fq'#FqO!CQQ$IfO'#IqOGTQYO1G0bO!EPQ#tO'#IyO!EZQWO,5:WO!E`QbO'#IzO){QYO'#IzO!EjQWO,5:]OOQ$IU'#DT'#DTOOQ$IU1G0k1G0kO!EoQWO1G0kO!HQQ$IfO1G0mO!HXQ$IfO1G0mO!JlQ$IfO1G0mO!JsQ$IfO1G0mO!LzQ$IfO1G0mO!M_Q$IfO1G0mO#!OQ$IfO1G0mO#!VQ$IfO1G0mO#$jQ$IfO1G0mO#$qQ$IfO1G0mO#&fQ$IfO1G0mO#)`Q7^O'#ChO#+ZQ7^O1G0}O#-UQ7^O'#IuOOQ$IU1G1T1G1TO#-iQ$IfO,5>kOOQ$IS-E;}-E;}O#.YQ$IfO1G0mOOQ$IU1G0m1G0mO#0[Q$IfO1G1QO#0{QpO,5;sO#1QQpO,5;tO#1VQpO'#F[O#1kQWO'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#1pQpO1G1]OOQ$IU1G1]1G1]OOOO1G1f1G1fO#2OQ7^O'#ItO#2YQWO,5;}OLXQYO,5;}OOOO-E;|-E;|OOQ$IU1G1Y1G1YOOQ$IU,5<P,5<PO#2_QpO,5<POOQ$IU,59a,59aOITQWO'#C{OOOS'#Hs'#HsO#2dOSO,59eOOQ$IU,59e,59eO){QYO1G1lO!(hQWO'#IRO#2oQWO,5<eOOQ$IU,5<b,5<bOOQO'#GV'#GVOJdQWO,5<pOOQO'#GX'#GXOJdQWO,5<rOJdQWO,5<tOOQO1G1n1G1nO#2zQ`O'#CpO#3_Q`O,5<^O#3fQWO'#JZO5qQWO'#JZO#3tQWO,5<`OJdQWO,5<_O#3yQ`O'#FqO#4WQ`O'#J[O#4bQWO'#J[OITQWO'#J[O#4gQWO,5<cOOQ$IS'#Dg'#DgO#4lQWO'#FtO#4wQpO'#F|O!&tQ&jO'#F|O!&tQ&jO'#GOO#5YQWO'#GPO!(mQWO'#GSO#5_Q$I[O'#ITO#5jQ&jO,5<gOOQ$IU,5<g,5<gO#5qQ&jO'#F|O#6PQ&jO'#F}O#6XQ&jO'#F}OOQ$IU,5<u,5<uOJdQWO,5?[OJdQWO,5?[O#6^QWO'#IUO#6iQWO,5?ZOOQ$IU'#Ch'#ChO#7]Q#tO,59jOOQ$IU,59j,59jO#8OQ#tO,5<UO#8qQ#tO,5<WO#8{QWO,5<YOOQ$IU,5<Z,5<ZO#9QQWO,5<aO#9VQ#tO,5<fOGTQYO1G1mO#9gQWO1G1mOOQQ1G3v1G3vOOQ$IU1G/p1G/pONXQWO1G/pOOQQ1G2b1G2bOITQWO1G2bO){QYO1G2bOITQWO1G2bO#9lQWO1G2bO#9zQWO,59]O#;TQWO'#EWOOQ$IS,5?W,5?WO#;_Q$I[O,5?WOOQQ1G.s1G.sO:^QWO1G.sO!,rQpO1G.sO!,zQ#tO1G.sO#;pQWO1G0bO#;uQWO'#ChO#<QQWO'#JcO#<YQWO,5=dO#<_QWO'#JcO#<dQWO'#JcO#<lQWO'#I^O#<zQWO,5?|O#=SQbO1G1VOOQ$IU1G1X1G1XO5qQWO1G2}O#=ZQWO1G2}O#=`QWO1G2}O#=eQWO1G2}OOQQ1G2}1G2}O#=jQ#tO1G2bO7VQWO'#JQO7VQWO'#EaO7VQWO'#IWO#={Q$I[O,5?yOOQQ1G2f1G2fO!/yQWO1G2lOITQWO1G2iO#>WQWO1G2iOOQQ1G2j1G2jOITQWO1G2jO#>]QWO1G2jO#>eQ&jO'#GhOOQQ1G2l1G2lO!&tQ&jO'#IYO!0OQ`O1G2oOOQQ1G2o1G2oOOQQ,5=Y,5=YO#>mQ#tO,5=[O5qQWO,5=[O#5YQWO,5=_O5_QWO,5=_O!,rQpO,5=_O!,zQ#tO,5=_O5vQ#tO,5=_O#?OQWO'#JaO#?ZQWO,5=`OOQQ1G.j1G.jO#?`Q$I[O1G.jO#?kQWO1G.jO#?pQWO1G.jO5iQ$I[O1G.jO#?xQbO,5@OO#@SQWO,5@OO#@_QYO,5=gO#@fQWO,5=gO7VQWO,5@OOOQQ1G3P1G3PO`QYO1G3POOQQ1G3V1G3VOOQQ1G3X1G3XO:XQWO1G3ZO#@kQYO1G3]O#DfQYO'#H[OOQQ1G3`1G3`O#DsQWO'#HbO:^QWO'#HdOOQQ1G3f1G3fO#D{QYO1G3fO5iQ$I[O1G3lOOQQ1G3n1G3nOOQ$IS'#Fx'#FxO5iQ$I[O1G3pO5iQ$I[O1G3rOOOS1G/^1G/^O#HyQ`O,5<TO#IRQbO1G3{OOQO1G4Q1G4QO){QYO,5>aO#I]QWO1G4|O#IeQWO1G5WO#ImQWO,5?dOLXQYO,5:{O7VQWO,5:{O:^QWO,59}OLXQYO,59}O!,rQpO,59}O#IrQ7^O,59}OOQO,5:{,5:{O#I|Q&jO'#HvO#JdQWO,5?cOOQ$IU1G/h1G/hO#JlQ&jO'#H{O#KQQWO,5?nOOQ$IS1G0f1G0fO!;OQ&jO,59}O#KYQbO1G5XO7VQWO,5>fOOQ$IS'#ES'#ESO#KdQ$ItO'#ETO!?{Q&jO'#D}OOQO'#Hy'#HyO#LOQ&jO,5:hOOQ$IU,5:h,5:hO#LVQ&jO'#D}O#LhQ&jO'#D}O#LoQ&jO'#EYO#LrQ&jO'#ETO#MPQ&jO'#ETO!?{Q&jO'#ETO#MdQWO1G0PO#MiQ`O1G0POOQ$IU1G0P1G0PO){QYO1G0POITQWO1G0POOQ$IU1G0a1G0aO:^QWO1G0aO!,rQpO1G0aO!,zQ#tO1G0aO#MpQ$IfO1G5UO){QYO1G5UO#NQQ$I[O1G5UO#NcQWO1G5TO7VQWO,5>hOOQO,5>h,5>hO#NkQWO,5>hOOQO-E;z-E;zO#NcQWO1G5TO#NyQ$IfO,59jO$!xQ$IfO,5<UO$$zQ$IfO,5<WO$&|Q$IfO,5<fOOQ$IU7+%|7+%|O$)UQ$IfO7+%|O$)uQWO'#HwO$*PQWO,5?eOOQ$IU1G/r1G/rO$*XQYO'#HxO$*fQWO,5?fO$*nQbO,5?fOOQ$IU1G/w1G/wOOQ$IU7+&V7+&VO$*xQ7^O,5:^O){QYO7+&iO$+SQ7^O,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$+aQMhO,5;vOLXQYO,5;uOOQO-E;{-E;{OOQ$IU7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$+lQWO1G1iOOQ$IU1G1k1G1kO$+qQ`O,59gOOOS-E;q-E;qOOQ$IU1G/P1G/PO$+xQ$IfO7+'WOOQ$IU,5>m,5>mO$,iQWO,5>mOOQ$IU1G2P1G2PP$,nQWO'#IRPOQ$IU-E<P-E<PO$-_Q#tO1G2[O$.QQ#tO1G2^O$.[Q#tO1G2`OOQ$IU1G1x1G1xO$.cQWO'#IQO$.qQWO,5?uO$.qQWO,5?uO$.yQWO,5?uO$/UQWO,5?uOOQO1G1z1G1zO$/dQ#tO1G1yO$/tQWO'#ISO$0UQWO,5?vOITQWO,5?vO$0^Q`O,5?vOOQ$IU1G1}1G1}OOQ$IS,5<h,5<hOOQ$IS,5<i,5<iO$0hQWO,5<iO#5TQWO,5<iO!,rQpO,5<hO$0mQWO,5<jOOQ$IS,5<k,5<kO$0hQWO,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ$IU1G2R1G2RO!&tQ&jO,5<hO$0uQWO,5<iO!&tQ&jO,5<jO!&tQ&jO,5<iO$1QQ#tO1G4vO$1[Q#tO1G4vOOQO,5>p,5>pOOQO-E<S-E<SO!-uQ&jO,59lO){QYO,59lO$1iQWO1G1tOJdQWO1G1{O$1nQ$IfO7+'XOOQ$IU7+'X7+'XOGTQYO7+'XOOQ$IU7+%[7+%[O$2_Q`O'#J]O#MdQWO7+'|O$2iQWO7+'|O$2qQ`O7+'|OOQQ7+'|7+'|OITQWO7+'|O){QYO7+'|OITQWO7+'|OOQO1G.w1G.wO$2{Q$IdO'#ChO$3`Q$IdO,5<lO$4QQWO,5<lOOQ$IS1G4r1G4rOOQQ7+$_7+$_O:^QWO7+$_O!,rQpO7+$_OGTQYO7+%|O$4VQWO'#I]O$4hQWO,5?}OOQO1G3O1G3OO5qQWO,5?}O$4hQWO,5?}O$4pQWO,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ$IU7+&q7+&qO$4uQWO7+(iO5iQ$I[O7+(iO5qQWO7+(iO$4zQWO7+(iO$5PQWO7+'|OOQ$IS,5>r,5>rOOQ$IS-E<U-E<UOOQQ7+(W7+(WO$5_Q$IdO7+(TOITQWO7+(TO$5iQ`O7+(UOOQQ7+(U7+(UOITQWO7+(UO$5pQWO'#J`O$5{QWO,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQQ7+(Z7+(ZO$6uQ&jO'#GqOOQQ1G2v1G2vOITQWO1G2vO){QYO1G2vOITQWO1G2vO$6|QWO1G2vO$7[Q#tO1G2vO5iQ$I[O1G2yO#5YQWO1G2yO5_QWO1G2yO!,rQpO1G2yO!,zQ#tO1G2yO$7mQWO'#I[O$7xQWO,5?{O$8QQ&jO,5?{OOQ$IS1G2z1G2zOOQQ7+$U7+$UO$8YQWO7+$UO5iQ$I[O7+$UO$8_QWO7+$UO){QYO1G5jO){QYO1G5kO$8dQYO1G3RO$8kQWO1G3RO$8pQYO1G3RO$8wQ$I[O1G5jOOQQ7+(k7+(kO5iQ$I[O7+(uO`QYO7+(wOOQQ'#Jf'#JfOOQQ'#I_'#I_O$9RQYO,5=vOOQQ,5=v,5=vO){QYO'#H]O$9`QWO'#H_OOQQ,5=|,5=|O7VQWO,5=|OOQQ,5>O,5>OOOQQ7+)Q7+)QOOQQ7+)W7+)WOOQQ7+)[7+)[OOQQ7+)^7+)^OOQO1G5O1G5OO$9eQ7^O1G0gO$9oQWO1G0gOOQO1G/i1G/iO$9zQ7^O1G/iO:^QWO1G/iOLXQYO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!,rQpO1G/iO:^QWO,5:iOOQO,5:o,5:oO){QYO,5:oO$:UQ$I[O,5:oO$:aQ$I[O,5:oO!,rQpO,5:iOOQO-E;w-E;wOOQ$IU1G0S1G0SO!?{Q&jO,5:iO$:oQ&jO,5:iO$;QQ$ItO,5:oO$;lQ&jO,5:iO!?{Q&jO,5:oOOQO,5:t,5:tO$;sQ&jO,5:oO$<QQ$I[O,5:oOOQ$IU7+%k7+%kO#MdQWO7+%kO#MiQ`O7+%kOOQ$IU7+%{7+%{O:^QWO7+%{O!,rQpO7+%{O$<fQ$IfO7+*pO){QYO7+*pOOQO1G4S1G4SO7VQWO1G4SO$<vQWO7+*oO$=OQ$IfO1G2[O$?QQ$IfO1G2^O$ASQ$IfO1G1yO$C[Q#tO,5>cOOQO-E;u-E;uO$CfQbO,5>dO){QYO,5>dOOQO-E;v-E;vO$CpQWO1G5QO$CxQ7^O1G0bO$FPQ7^O1G0mO$FWQ7^O1G0mO$HXQ7^O1G0mO$H`Q7^O1G0mO$JTQ7^O1G0mO$JhQ7^O1G0mO$LuQ7^O1G0mO$L|Q7^O1G0mO$N}Q7^O1G0mO% UQ7^O1G0mO%!yQ7^O1G0mO%#^Q$IfO<<JTO%#}Q7^O1G0mO%&UQ7^O'#IqO%'nQ7^O1G1QOLXQYO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%'{QWO1G1aO%(QQ7^O,5>kOOOO7+'T7+'TOOOS1G/R1G/ROOQ$IU1G4X1G4XOJdQWO7+'zO%([QWO,5>lO5qQWO,5>lOOQO-E<O-E<OO%(jQWO1G5aO%(jQWO1G5aO%(rQWO1G5aO%(}Q`O,5>nO%)XQWO,5>nOITQWO,5>nOOQO-E<Q-E<QO%)^Q`O1G5bO%)hQWO1G5bOOQ$IS1G2T1G2TO$0hQWO1G2TOOQ$IS1G2S1G2SO%)pQWO1G2UOITQWO1G2UOOQ$IS1G2Y1G2YO!,rQpO1G2SO#5TQWO1G2TO%)uQWO1G2UO%)}QWO1G2TOJdQWO7+*bOOQ$IU1G/W1G/WO%*YQWO1G/WOOQ$IU7+'`7+'`O%*_Q#tO7+'gO%*oQ$IfO<<JsOOQ$IU<<Js<<JsOITQWO'#IVO%+`QWO,5?wOOQQ<<Kh<<KhOITQWO<<KhO#MdQWO<<KhO%+hQWO<<KhO%+pQ`O<<KhOITQWO1G2WOOQQ<<Gy<<GyO:^QWO<<GyO%+zQ$IfO<<IhOOQ$IU<<Ih<<IhOOQO,5>w,5>wO%,kQWO,5>wO%,pQWO,5>wOOQO-E<Z-E<ZO%,xQWO1G5iO%,xQWO1G5iO5qQWO1G5iO%-QQWO<<LTOOQQ<<LT<<LTO%-VQWO<<LTO5iQ$I[O<<LTO){QYO<<KhOITQWO<<KhOOQQ<<Ko<<KoO$5_Q$IdO<<KoOOQQ<<Kp<<KpO$5iQ`O<<KpO%-[Q&jO'#IXO%-gQWO,5?zOLXQYO,5?zOOQQ1G2n1G2nO#KdQ$ItO'#ETO!?{Q&jO'#GrOOQO'#IZ'#IZO%-oQ&jO,5=]OOQQ,5=],5=]O%-vQ&jO'#ETO%.RQ&jO'#ETO%.jQ&jO'#ETO%.tQ&jO'#GrO%/VQWO7+(bO%/[QWO7+(bO%/dQ`O7+(bOOQQ7+(b7+(bOITQWO7+(bO){QYO7+(bOITQWO7+(bO%/nQWO7+(bOOQQ7+(e7+(eO5iQ$I[O7+(eO#5YQWO7+(eO5_QWO7+(eO!,rQpO7+(eO%/|QWO,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%0XQWO1G5gO5iQ$I[O<<GpOOQQ<<Gp<<GpO%0aQWO<<GpO%0fQWO7++UO%0kQWO7++VOOQQ7+(m7+(mO%0pQWO7+(mO%0uQYO7+(mO%0|QWO7+(mO){QYO7++UO){QYO7++VOOQQ<<La<<LaOOQQ<<Lc<<LcOOQQ-E<]-E<]OOQQ1G3b1G3bO%1RQWO,5=wOOQQ,5=y,5=yO%1WQWO1G3hOLXQYO7+&ROOQO7+%T7+%TO%1]Q7^O1G5XO:^QWO7+%TOOQO1G0T1G0TO%1gQ$IfO1G0ZOOQO1G0Z1G0ZO){QYO1G0ZO%1qQ$I[O1G0ZO:^QWO1G0TO!,rQpO1G0TO!?{Q&jO1G0TO%1|Q$I[O1G0ZO%2[Q&jO1G0TO%2mQ$I[O1G0ZO%3RQ$ItO1G0ZO%3]Q&jO1G0TO!?{Q&jO1G0ZOOQ$IU<<IV<<IVOOQ$IU<<Ig<<IgO:^QWO<<IgO%3dQ$IfO<<N[OOQO7+)n7+)nO%3tQ$IfO7+'gO%5|QbO1G4OO%6WQ7^O7+%|O%6|Q7^O,59jO%8zQ7^O,5<UO%:{Q7^O,5<WO%<hQ7^O,5<fO%>WQ7^O7+'WO%>eQ7^O7+'XO%>rQWO,5;xOOQO7+&{7+&{O%>wQ#tO<<KfOOQO1G4W1G4WO%?XQWO1G4WO%?dQWO1G4WO%?rQWO7+*{O%?rQWO7+*{OITQWO1G4YO%?zQ`O1G4YO%@UQWO7+*|OOQ$IS7+'o7+'oO$0hQWO7+'pO%@^Q`O7+'pOOQ$IS7+'n7+'nO$0hQWO7+'oO%@eQWO7+'pOITQWO7+'pO#5TQWO7+'oO%@jQ#tO<<M|OOQ$IU7+$r7+$rO%@tQ`O,5>qOOQO-E<T-E<TO#MdQWOANASOOQQANASANASOITQWOANASO%AOQ$IdO7+'rOOQQAN=eAN=eO5qQWO1G4cOOQO1G4c1G4cO%A`QWO1G4cO%AeQWO7++TO%AeQWO7++TO5iQ$I[OANAoO%AmQWOANAoOOQQANAoANAoO%ArQWOANASO%AzQ`OANASOOQQANAZANAZOOQQANA[ANA[O%BUQWO,5>sOOQO-E<V-E<VO%BaQ7^O1G5fO#5YQWO,5=^O5_QWO,5=^O!,rQpO,5=^OOQO-E<X-E<XOOQQ1G2w1G2wO$;QQ$ItO,5:oO!?{Q&jO,5=^O%BkQ&jO,5=^O%B|Q&jO,5:oOOQQ<<K|<<K|OITQWO<<K|O%/VQWO<<K|O%CWQWO<<K|O%C`Q`O<<K|O){QYO<<K|OITQWO<<K|OOQQ<<LP<<LPO5iQ$I[O<<LPO#5YQWO<<LPO5_QWO<<LPO%CjQ&jO1G4bO%CrQWO7++ROOQQAN=[AN=[O5iQ$I[OAN=[OOQQ<<Np<<NpOOQQ<<Nq<<NqOOQQ<<LX<<LXO%CzQWO<<LXO%DPQYO<<LXO%DWQWO<<NpO%D]QWO<<NqOOQQ1G3c1G3cO:^QWO7+)SO%DbQ7^O<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%1gQ$IfO7+%uO){QYO7+%uOOQO7+%o7+%oO:^QWO7+%oO!,rQpO7+%oO%DlQ$I[O7+%uO!?{Q&jO7+%oO%DwQ$I[O7+%uO%EVQ&jO7+%oO%EhQ$I[O7+%uOOQ$IUAN?RAN?RO%E|Q$IfO<<KfO%HUQ7^O<<JTO%HcQ7^O1G1yO%JgQ7^O1G2[O%LhQ7^O1G2^O%NTQ7^O<<JsO%NbQ7^O<<IhOOQO1G1d1G1dOOQO7+)r7+)rO%NoQWO7+)rO%NzQWO<<NgO& SQ`O7+)tOOQ$IS<<K[<<K[O$0hQWO<<K[OOQ$IS<<KZ<<KZO& ^Q`O<<K[O$0hQWO<<KZOOQQG26nG26nO#MdQWOG26nOOQO7+)}7+)}O5qQWO7+)}O& eQWO<<NoOOQQG27ZG27ZO5iQ$I[OG27ZOITQWOG26nOLXQYO1G4_O& mQWO7++QO5iQ$I[O1G2xO#5YQWO1G2xO5_QWO1G2xO!,rQpO1G2xO!?{Q&jO1G2xO%3RQ$ItO1G0ZO& uQ&jO1G2xO%/VQWOANAhOOQQANAhANAhOITQWOANAhO&!WQWOANAhO&!`Q`OANAhOOQQANAkANAkO5iQ$I[OANAkO#5YQWOANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQQG22vG22vOOQQANAsANAsO&!jQWOANAsOOQQAND[AND[OOQQAND]AND]OOQQ<<Ln<<LnOOQO<<Ia<<IaO%1gQ$IfO<<IaOOQO<<IZ<<IZO:^QWO<<IZO){QYO<<IaO!,rQpO<<IZO&!oQ$I[O<<IaO!?{Q&jO<<IZO&!zQ$I[O<<IaO&#YQ7^O7+'gOOQO<<M^<<M^OOQ$ISAN@vAN@vO$0hQWOAN@vOOQ$ISAN@uAN@uOOQQLD,YLD,YOOQO<<Mi<<MiOOQQLD,uLD,uO#MdQWOLD,YO&$xQ7^O7+)yOOQO7+(d7+(dO5iQ$I[O7+(dO#5YQWO7+(dO5_QWO7+(dO!,rQpO7+(dO!?{Q&jO7+(dOOQQG27SG27SO%/VQWOG27SOITQWOG27SOOQQG27VG27VO5iQ$I[OG27VOOQQG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%1gQ$IfOAN>{O:^QWOAN>uO){QYOAN>{O!,rQpOAN>uO&%SQ$I[OAN>{O&%_Q7^O<<KfOOQ$ISG26bG26bOOQQ!$( t!$( tOOQO<<LO<<LOO5iQ$I[O<<LOO#5YQWO<<LOO5_QWO<<LOO!,rQpO<<LOOOQQLD,nLD,nO%/VQWOLD,nOOQQLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%1gQ$IfOG24gO:^QWOG24aO){QYOG24gO&&}QMhO,5:rO&'tQ!LQO'#IqOOQOANAjANAjO5iQ$I[OANAjO#5YQWOANAjO5_QWOANAjOOQQ!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%1gQ$IfOLD*RO&(hQMhO,59jO&)[QMhO,5<UO&*OQMhO,5<WO&*rQMhO,5<fOOQOG27UG27UO5iQ$I[OG27UO#5YQWOG27UOOQO!$'Mm!$'MmO&+iQMhO1G2[O&,]QMhO1G2^O&-PQMhO1G1yOOQOLD,pLD,pO5iQ$I[OLD,pO&-vQMhO7+'gOOQO!$(![!$(![O&.mQMhO<<KfOLXQYO'#DrO&/dQbO'#ItOLXQYO'#DjO&/kQ$IfO'#ChO&0UQbO'#ChO&0fQYO,5:vO&2fQWO'#EWOLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO'#IPO&3pQWO,5<TO&5SQWO,5;ROLXQYO,5;fO!(^QWO'#DOO!(^QWO'#DOO!(^QWO'#DOOITQWO'#FjO&2fQWO'#FjO&3xQWO'#FjOITQWO'#FlO&2fQWO'#FlO&3xQWO'#FlOITQWO'#FzO&2fQWO'#FzO&3xQWO'#FzOLXQYO,5?mO&0fQYO1G0bO&5ZQ7^O'#ChOLXQYO1G1lOITQWO,5<pO&2fQWO,5<pO&3xQWO,5<pOITQWO,5<rO&2fQWO,5<rO&3xQWO,5<rOITQWO,5<_O&2fQWO,5<_O&3xQWO,5<_O&0fQYO1G1mOLXQYO7+&iOITQWO1G1{O&2fQWO1G1{O&3xQWO1G1{O&0fQYO7+'XO&0fQYO7+%|OITQWO7+'zO&2fQWO7+'zO&3xQWO7+'zO&5eQWO7+'pO&5eQWO<<K[O&5eQWOAN@vO&5jQWO'#E[O&5oQWO'#E[O&5wQWO'#EzO&5|QWO'#EgO&6RQWO'#JRO&6^QWO'#JPO&6iQWO,5:vO&6nQ#tO,5<QO&6uQWO'#FsO&6zQWO'#FsO&7PQWO'#FsO&7UQWO,5<RO&7^QWO,5:vO&7fQ7^O1G0}O&7mQWO,5<aO&7rQWO,5<aO&7wQWO,5<aO&7|QWO1G1mO&8RQWO1G0bO&8WQ#tO1G2`O&8_Q#tO1G2`O&8fQ#tO1G2`O&8mQWO1G2UO&8rQ`O7+'pO&8yQWO7+'pO&9OQ`O<<K[O4QQWO'#FhO5_QWO'#FgOBwQWO'#EZOLXQYO,5;cO!(mQWO'#FuO!(mQWO'#FuO!(mQWO'#FuOJdQWO,5<tOJdQWO,5<tOJdQWO,5<tO&9VQWO,5<jOITQWO1G2UO&9_QWO1G2UOITQWO7+'pO!&tQ&jO'#GOO!&tQ&jO,5<j",stateData:"&:]~O'YOS'ZOSTOSUOS~OPTOQTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OP[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOR!WO'U!XO'V!ZO~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9WO'fQO'oYO'|aO~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9XO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOP'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$OOj#rOk#qOl#qOq$POs$QOx#xO!T#yO!_$VO!d#vO#V$WO#t$TO$_$RO$a$SO$d$UO']#pO'f#sO'a'cP~O!d$XO~O!]$ZO~O_$[O'W$[O~O']$`O~O!d$XO']$`O'^$bO'b$cO~Oc$iO!d$XO']$`O~O#c#TO~O]$rOu$nO!T$kO!d$mO%R$qO']$`O'^$bO^(UP~O!n$sO~Ox$tO!T$uO']$`O~Ox$tO!T$uO%Z$yO']$`O~O']$zO~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%TOc%SO!n%QO%P%RO%c%PO~P7uOb%WOcmO!T%VO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%ZO!{%^O%R%XO'^$bO~P8tO!d%_O!g%cO~O!d%dO~O!TSO~O_$[O'T%lO'W$[O~O_$[O'T%oO'W$[O~O_$[O'T%qO'W$[O~OR!WO'U!XO'V%uO~OP[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;aO!Q%wO!O&iX!O&nX!R&iX!R&nX~P'dO!R%yO!O'jX~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!R%yO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>^O!O&OO~Ox&RO!W&]O!X&UO!Y&UO'^$bO~O]&SOk&SO!Q&VO'g&PO!S'kP!S'vP~P@aO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PAYO!{&^O!O'uX!R'uX~O!R&_O!O'tX~O!O&bO~O!{#eO~PAYOS&fO!T&cO!o&eO']$`O~Oc&kO!d$XO']$`O~Ou$nO!d$mO~O!S&lO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOP!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCcO!c&mO~O!]!wO!{&oO'p&nO!R'rX_'rX'W'rX~O!c'rX~PE{O!R&sO!c'qX~O!c&uO~Ox$tO!T$uO#V&vO']$`O~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9WO'fQO'oYO'|aO~O]#qOh$OOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO']&zO'f#sO~O#W&|O~O]#qOh$OOj#rOk#qOl#qOq$POs$QOx#xO!T#yO!_$VO!d#vO#V$WO#t$TO$_$RO$a$SO$d$UO']&zO'f#sO~O'a'mP~PJdO!Q'QO!c'nP~P){O'g'SO'oYO~OP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!T!bO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O']'bO'fQO'oYO'|:}O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'iO~PITO!]'kO!T'yX#w'yX#z'yX$R'yX~Ou'lO~P! POu'lO!T'yX#w'yX#z'yX$R'yX~O!T'nO#w'rO#z'mO$R'sO~O!Q'vO~PLXO#z#fO$R'yO~Ou$eXx$eX!b$eX'p$eX'w$eX'x$eX~OSfX!RfX!{fX'afX'a$eX~P!!iOk'{O~OR'|O'U'}O'V(PO~Ou(ROx(SO'p#[O'w(UO'x(WO~O'a(QO~P!#rO'a(ZO~O]#qOh$OOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO'f#sO~O!Q(_O']([O!c'}P~P!$aO#W(aO~O!Q(eO'](bO!O(OP~P!$aOj(sOx(kO!W(qO!X(jO!Y(jO!d(hO!x(rO$w(mO'^$bO'g(gO~O!S(pO~P!&XO!b!yOu'eXx'eX'p'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'QOS(vO!{(uO!R'dX'a'dX~O!R(wO'a'cX~O'](yO~O!d)OO~O']&zO~O!d(hO~Ox$tO!Q!rO!T$uO#U!uO#V!rO']$`O!c'qP~O!]!wO#W)SO~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)cOS)[O!T&cO!o)ZO%Q)YO'b$cO~O']$zO'a'cP~O!])_O!T'`X_'`X!R'`X'W'`X~O!d$XO'b$cO~O!d$XO']$`O'b$cO~O!]!wO#W&|O~O])jO%R)kO'])gO!S(VP~O!R)lO^(UX~O'g'SO~OZ)pO~O^)qO~O!T$kO']$`O'^$bO^(UP~Ox$tO!Q)vO!R&_O!T$uO']$`O!O'tP~O]&YOk&YO!Q)wO'g'SO!S'vP~O!R)xO_(RX'W(RX~O!{)|O'b$cO~OS*PO!T#yO'b$cO~O!T*RO~Ou*TO!TSO~O!n*YO~Oc*_O~O'](yO!S(TP~Oc$iO~O%RtO']$zO~P8tOZ*eO^*dO~OPTOQTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9WO~P!1RO^*dO_$[O'W$[O~O_*iO#d*kO%T*kO%U*kO~P){O!d%_O~O%t*pO~O!T*rO~O&V*tO&X*uOP&SaQ&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*zO~On*}O~O!O&ia!R&ia~P!)cO!Q+RO!O&iX!R&iX~P){O!R%yO!O'ja~O!O'ja~P>^O!R&_O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+WO!{+VO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+YO!d$XO'b$cO!R!VX!S!VX~O]&QOk&QOx&RO'g(gO~OP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!T!bO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O'fQO'oYO'|:}O~O']9yO~P!;^O!R+^O!S'kX~O!S+`O~O!]+WO!{+VO!R#TX!S#TX~O!R+aO!S'vX~O!S+cO~O]&QOk&QOx&RO'^$bO'g(gO~O!X+dO!Y+dO~P!>[Ox$tO!Q+fO!T$uO']$`O!O&nX!R&nX~O_+jO!W+mO!X+iO!Y+iO!r+qO!s+oO!t+pO!u+nO!x+rO'^$bO'g(gO'o+gO~O!S+lO~P!?]OS+wO!T&cO!o+vO~O!{+}O!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@gO!R&sO!c'qa~Ox$tO!Q,QO!T$uO#U,SO#V,QO']$`O!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)cO#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!#rO#W'eXP'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'QO!R,]O'a'mX~P!#rO'a,_O~O!R,`O!c'nX~P!)cO!c,cO~O!O,dO~OP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!EtO#[#PO~P!EtOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!H`Oj#RO~P!H`OP#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!JzOZ#dO!a#TO#a#TO#b#TO#c#TO~P!JzOP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!MrO'w!}O~P!MrOP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P#!^O'x#OO~P#!^OP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#$xOP[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#']OP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO#i9eO#j9fO'fQO'p#[O'w!}O'x#OO~O#m,fO~P#)gOP'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9jO#o9jO#c'iX#m'iX!S'iX~P#+bO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)cOP#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!#rO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)cO#z,hO~O#z,iO~O!]'kO!{,jO!T$OX#w$OX#z$OX$R$OX~O!Q,kO~O!T'nO#w,mO#z'mO$R,nO~O!R9gO!S'hX~P#)gO!S,oO~O$R,qO~OR'|O'U'}O'V,tO~O],wOk,wO!O,xO~O!RdX!]dX!cdX!c$eX'pdX~P!!iO!c-OO~P!#rO!R-PO!]!wO'p&nO!c'}X~O!c-UO~O!O$eX!R$eX!]$lX~P!!iO!R-WO!O(OX~P!#rO!]-YO~O!O-[O~O!Q(_O']$`O!c'}P~Oj-`O!]!wO!d$XO'b$cO'p&nO~O!])_O~O_$[O!R-eO'W$[O~O!S-gO~P!&XO!X-hO!Y-hO'^$bO'g(gO~Ox-jO'g(gO~O!x-kO~O']$zO!R&xX'a&xX~O!R(wO'a'ca~Ou-pOv-pOx-qO'pra'wra'xra!Rra!{ra~O'ara#mra~P#6qOu(ROx(SO'p$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#7gOu(ROx(SO'p$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#8YO]-rO~O#W-sO~O'a$na!R$na#m$na!{$na~P!#rO#W-vO~OS.PO!T&cO!o.OO%Q-}O~O'a.QO~O]#qOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO'f#sO~Oh.SO'].RO~P#:PO!])_O!T'`a_'`a!R'`a'W'`a~O#W.YO~OZ[X!RdX!SdX~O!R.ZO!S(VX~O!S.]O~OZ.^O~O].`O'])gO~O!T$kO']$`O^'QX!R'QX~O!R)lO^(Ua~O!c.cO~P!)cO].eO~OZ.fO~O^.gO~OS.PO!T&cO!o.OO%Q-}O'b$cO~O!R)xO_(Ra'W(Ra~O!{.mO~OS.pO!T#yO~O'g'SO!S(SP~OS.zO!T.vO!o.yO%Q.xO'b$cO~OZ/UO!R/SO!S(TX~O!S/VO~O^/XO_$[O'W$[O~O]/YO~O]/ZO'](yO~O#c/[O%r/]O~P0zO!{#eO#c/[O%r/]O~O_/^O~P){O_/`O~O%{/dOP%yiQ%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/jO!S/hO&Q/iO~P`O!TSO!d/lO~O&X*uOP&SiQ&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)cO!R%yO!O'ji~O!R&_O!O'ti~O!O/rO~O!R!Va!S!Va~P#)gO]&QOk&QO!Q/xO'g(gO!R&jX!S&jX~P@aO!R+^O!S'ka~O]&YOk&YO!Q)wO'g'SO!R&oX!S&oX~O!R+aO!S'va~O!O'ui!R'ui~P!)cO_$[O!]!wO!d$XO!j0SO!{0QO'W$[O'b$cO'p&nO~O!S0VO~P!?]O!X0WO!Y0WO'^$bO'g(gO'o+gO~O!W0XO~P#LVO!TSO!W0XO!u0ZO!x0[O~P#LVO!W0XO!s0^O!t0^O!u0ZO!x0[O~P#LVO!T&cO~O!T&cO~P!#rO!R'ri!c'ri_'ri'W'ri~P!)cO!{0gO!R'ri!c'ri_'ri'W'ri~O!R&sO!c'qi~Ox$tO!T$uO#V0iO']$`O~O#WraPraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra!cra!Ora!Tranra%Qra!]ra~P#6qO#W$^aP$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#7gO#W$`aP$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#8YO#W$naP$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!#rO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)cO!R&kX'a&kX~PJdO!R,]O'a'ma~O!Q0qO!R&lX!c&lX~P){O!R,`O!c'na~O!R,`O!c'na~P!)cO#m!fa!S!fa~PCcO#m!^a!R!^a!S!^a~P#)gO!T1UO#x^O$P1VO~O!S1ZO~On1[O~P!#rO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)cO!O1]O~O],wOk,wO~Ou(ROx(SO'x(WO'p$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$,vOu(ROx(SO'p$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$-iO#m1^O~P!#rO!Q1`O']$`O!R&tX!c&tX~O!R-PO!c'}a~O!R-PO!]!wO!c'}a~O!R-PO!]!wO'p&nO!c'}a~O'a$gi!R$gi#m$gi!{$gi~P!#rO!Q1gO'](bO!O&vX!R&vX~P!$aO!R-WO!O(Oa~O!R-WO!O(Oa~P!#rO!]!wO~O!]!wO#c1oO~Oj1rO!]!wO'p&nO~O!R'di'a'di~P!#rO!{1uO!R'di'a'di~P!#rO!c1xO~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)cO!R1|O!T(PX~P!#rO!T&cO%Q2PO~O!T&cO%Q2PO~P!#rO!T$eX$u[X_$eX!R$eX'W$eX~P!!iO$u2TOugXxgX!TgX'pgX'wgX'xgX_gX!RgX'WgX~O$u2TO~O]2ZO%R2[O'])gO!R'PX!S'PX~O!R.ZO!S(Va~OZ2`O~O^2aO~O]2dO~OS2fO!T&cO!o2eO%Q2PO~O_$[O'W$[O~P!#rO!T#yO~P!#rO!R2kO!{2mO!S(SX~O!S2nO~Ox;]O!W2wO!X2pO!Y2pO!r2vO!s2uO!t2uO!x2tO'^$bO'g(gO'o+gO~O!S2sO~P$6QOS3OO!T.vO!o2}O%Q2|O~OS3OO!T.vO!o2}O%Q2|O'b$cO~O'](yO!R'OX!S'OX~O!R/SO!S(Ta~O]3YO'g3XO~O]3ZO~O^3]O~O!c3`O~P){O_3bO~O_3bO~P){O#c3dO%r3eO~PE{O`/jO!S3iO&Q/iO~P`O!]3kO~O!R#Ti!S#Ti~P#)gO!{3mO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#)gO_$[O!{3tO'W$[O~O_$[O!]!wO!{3tO'W$[O~O!X3xO!Y3xO'^$bO'g(gO'o+gO~O_$[O!]!wO!d$XO!j3yO!{3tO'W$[O'b$cO'p&nO~O!W3zO~P$:oO!W3zO!u3}O!x4OO~P$:oO_$[O!]!wO!j3yO!{3tO'W$[O'p&nO~O!R'rq!c'rq_'rq'W'rq~P!)cO!R&sO!c'qq~O#W$xiP$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$,vO#W$ziP$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$-iO#W$giP$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!#rO!R&ka'a&ka~P!#rO!R&la!c&la~P!)cO!R,`O!c'ni~O#m#Oi!R#Oi!S#Oi~P#)gOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$DVO#[9[O~P$DVOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$F_Oj9^O~P$F_OP#^Oj9^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$HgOZ9iO!a9`O#a9`O#b9`O#c9`O~P$HgOP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$J{O'w!}O~P$J{OP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$MTO'x#OO~P$MTOP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO#i9eO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P% ]O_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)cOP#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi!R#Zi!S#Zi~P!#rO!b!yOu'eXx'eX'p'eX'w'eX'x'eX!S'eX~OP'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX!R'eX~P%%mO#m#ni!R#ni!S#ni~P#)gO!S4`O~O!R&sa!S&sa~P#)gO!]!wO'p&nO!R&ta!c&ta~O!R-PO!c'}i~O!R-PO!]!wO!c'}i~O!O&va!R&va~P!#rO!]4gO~O!R-WO!O(Oi~P!#rO!R-WO!O(Oi~O!O4kO~O!]!wO#c4pO~Oj4qO!]!wO'p&nO~O!O4sO~O'a$iq!R$iq#m$iq!{$iq~P!#rO_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)cO!R1|O!T(Pa~O!T&cO%Q4xO~O!T&cO%Q4xO~P!#rO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)cOZ4{O~O]4}O'])gO~O!R.ZO!S(Vi~O]5QO~O^5RO~O'g'SO!R&{X!S&{X~O!R2kO!S(Sa~O!S5`O~P$6QOx;^O'g(gO'o+gO~O!W5cO!X5bO!Y5bO!x0[O'^$bO'g(gO'o+gO~O!s5dO!t5dO~P%.RO!X5bO!Y5bO'^$bO'g(gO'o+gO~O!T.vO~O!T.vO%Q5fO~O!T.vO%Q5fO~P!#rOS5kO!T.vO!o5jO%Q5fO~OZ5pO!R'Oa!S'Oa~O!R/SO!S(Ti~O]5sO~O!c5tO~O!c5uO~O!c5vO~O!c5vO~P){O_5xO~O!]5{O~O!c5|O~O!R'ui!S'ui~P#)gO_$[O'W$[O~P!)cO_$[O!{6RO'W$[O~O_$[O!]!wO!{6RO'W$[O~O!X6WO!Y6WO'^$bO'g(gO'o+gO~O_$[O!]!wO!j6XO!{6RO'W$[O'p&nO~O!d$XO'b$cO~P%2mO!W6YO~P%2[O!R'ry!c'ry_'ry'W'ry~P!)cO#W$iqP$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!#rO!R&li!c&li~P!)cO#m#Oq!R#Oq!S#Oq~P#)gOu-pOv-pOx-qO'pra'wra'xra!Sra~OPraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra!Rra~P%6eOu(ROx(SO'p$^a'w$^a'x$^a!S$^a~OP$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a!R$^a~P%8fOu(ROx(SO'p$`a'w$`a'x$`a!S$`a~OP$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a!R$`a~P%:gOP$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na!R$na!S$na~P!#rO#m$Yq!R$Yq!S$Yq~P#)gO#m$Zq!R$Zq!S$Zq~P#)gO!S6dO~O'a$|y!R$|y#m$|y!{$|y~P!#rO!]!wO!R&ti!c&ti~O!]!wO'p&nO!R&ti!c&ti~O!R-PO!c'}q~O!O&vi!R&vi~P!#rO!R-WO!O(Oq~O!O6jO~P!#rO!O6jO~O!R'dy'a'dy~P!#rO!R&ya!T&ya~P!#rO!T$tq_$tq!R$tq'W$tq~P!#rOZ6qO~O!R.ZO!S(Vq~O]6tO~O!T&cO%Q6uO~O!T&cO%Q6uO~P!#rO!{6vO!R&{a!S&{a~O!R2kO!S(Si~P#)gO!X6|O!Y6|O'^$bO'g(gO'o+gO~O!W7OO!x4OO~P%BkO!T.vO%Q7RO~O!T.vO%Q7RO~P!#rO]7YO'g7XO~O!R/SO!S(Tq~O!c7[O~O!c7[O~P){O!c7^O~O!c7_O~O!R#Ty!S#Ty~P#)gO_$[O!{7eO'W$[O~O_$[O!]!wO!{7eO'W$[O~O!X7hO!Y7hO'^$bO'g(gO'o+gO~O_$[O!]!wO!j7iO!{7eO'W$[O'p&nO~O#W$|yP$|yZ$|y_$|yj$|yv$|y!R$|y!a$|y!b$|y!d$|y!j$|y#[$|y#]$|y#^$|y#_$|y#`$|y#a$|y#b$|y#c$|y#e$|y#g$|y#i$|y#j$|y'W$|y'f$|y!c$|y!O$|y!T$|y!{$|yn$|y%Q$|y!]$|y~P!#rO#m#ky!R#ky!S#ky~P#)gOP$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi!R$gi!S$gi~P!#rOu(ROx(SO'x(WO'p$xi'w$xi!S$xi~OP$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi!R$xi~P%JROu(ROx(SO'p$zi'w$zi'x$zi!S$zi~OP$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi!R$zi~P%LSO#m$Zy!R$Zy!S$Zy~P#)gO#m#Oy!R#Oy!S#Oy~P#)gO!]!wO!R&tq!c&tq~O!R-PO!c'}y~O!O&vq!R&vq~P!#rO!O7mO~P!#rO!R.ZO!S(Vy~O!R2kO!S(Sq~O!X7yO!Y7yO'^$bO'g(gO'o+gO~O!T.vO%Q7|O~O!T.vO%Q7|O~P!#rO!c8PO~O_$[O!{8UO'W$[O~O_$[O!]!wO!{8UO'W$[O~OP$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq!R$iq!S$iq~P!#rO!R&{q!S&{q~P#)gO_$[O!{8hO'W$[O~OP$|yZ$|yj$|yv$|y!a$|y!b$|y!d$|y!j$|y#[$|y#]$|y#^$|y#_$|y#`$|y#a$|y#b$|y#c$|y#e$|y#g$|y#i$|y#j$|y#m$|y'f$|y!R$|y!S$|y~P!#rO!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P!#rO!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%%mO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%6eO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%8fO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%:gO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P!#rO!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%JRO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%LSO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P!#rO!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P!#rO!S$|y!W$|y!X$|y!Y$|y!r$|y!s$|y!t$|y!x$|y'^$|y'g$|y'o$|y~P!#rOn'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;aOP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!TSO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O']'bO'fQO'oYO'|:}O~O]#qOh$OOj#rOk#qOl#qOq$POs9lOx#xO!T#yO!_;SO!d#vO#V9uO#t$TO$_9oO$a9rO$d$UO']&zO'f#sO~O!R9gO!S$]a~O]#qOh$OOj#rOk#qOl#qOq$POs9mOx#xO!T#yO!_;TO!d#vO#V9vO#t$TO$_9pO$a9sO$d$UO']&zO'f#sO~O#d'iO~P&3xO!S[X!SdX~P;aO!]9ZO~O#W9YO~O!]!wO#W9YO~O!{9jO~O#c9`O~O!{9wO!R'uX!S'uX~O!{9jO!R'sX!S'sX~O#W9xO~O'a9zO~P!#rO#W:RO~O#W:SO~O#W:TO~O!]!wO#W:UO~O!]!wO#W9xO~O#m:VO~P#)gO#W:WO~O#W:XO~O#W:YO~O#W:ZO~O#W:[O~O#m:]O~P!#rO#m:^O~P!#rO#m:_O~P!#rO!O:`O~O!O:aO~P!#rO!O:aO~O!O:bO~P!#rO!]!wO#c;YO~O!]!wO#c;[O~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Hc(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s5g5zP5zPPP5zP7t5zP5zP7xPP8OP8d<uPPPP<yPPPP<y?kPPP?qBSP<yPDgPPPPF`<yPPPPPHX<yPPKYLVPPPPLZMsPM{N|PLV<y<y!$^!'X!+z!+z!/ZPPP!/b!2W<yPPPPPPPPPP!4}P!6`PP<y!7mP<yP<y<y<y<yP<y!:[PP!=TP!?x!@Q!@U!@UP!=QP!@Y!@YP!B}P!CR<y<y!CX!E{5zP5zP5z5zP!GO5z5z!IU5z!Ki5z!Mi5z5z!NV#!]#!]#!a#!]#!iP#!]P5z##e5z#$y5z5z-zPPP#&cPP#&{#&{P#&{P#'b#&{PP#'hP#'_P#'_#'zMw#'_#(i#(o#(r([#(u([P#(|#(|#(|P([P([P([P([PP([P#)S#)VP#)V([P#)ZP#)^P([P([P([P([P([P([([#)d#)n#)t#)z#*Y#*`#*f#*p#*v#+V#+]#+k#+q#+w#,V#,l#.[#.j#.p#.v#.|#/S#/^#/d#/j#/t#0W#0^PPPPPPPP#0dPP#1W#4`PP#5v#5}#6VPP#;X#=l#Ch#Ck#Cn#Cy#C|PP#DP#DT#Dr#Ei#Em#FRPP#FV#F]#FaP#Fd#Fh#Fk#GZ#Gq#Gv#Gy#G|#HS#HV#HZ#H_mhOSj}!n$Z%b%e%f%h*m*r/d/gQ$hmQ$opQ%YyS&U!b+^Q&j!jS(j#y(oQ)e$iQ)r$qQ*^%SQ+d&]S+i&c+kQ+{&kQ-h(qQ/R*_Y0W+m+n+o+p+qS2p.v2rU3x0X0Z0^U5b2u2v2wS6W3z3}S6|5c5dQ7h6YR7y7O$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!j'd#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ(z$QQ)j$kQ*`%VQ*g%_Q,V9kQ.T)_Q.`)kQ/Z*eQ2Z.ZQ3V/SQ4X9mQ4}2[R8s9lpeOSjy}!n$Z%X%b%e%f%h*m*r/d/gR*b%Z&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%y&R&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;P;Q[!cRU!]!`%w&VQ$alQ$gmS$lp$qv$vrs!r!u$X$t&_&s&v)v)w)x*k+W+f,Q,S/l0iQ%OwQ&g!iQ&i!jS(^#v(hS)d$h$iQ)h$kQ)u$sQ*X%QQ*]%SS+z&j&kQ-T(_Q.X)eQ._)kQ.a)lQ.d)pQ.|*YS/Q*^*_Q0e+{Q1_-PQ2Y.ZQ2^.^Q2c.fQ3U/RQ4d1`Q4|2[Q5P2`Q6p4{R7p6q!Y$em!j$g$h$i&T&i&j&k(i)d)e+Z+h+z+{-a.X/}0T0Y0e1q3w3|6U7f8VQ)]$aQ)}${Q*Q$|Q*[%SQ.h)uQ.{*XU/P*]*^*_Q3P.|S3T/Q/RQ5]2oQ5o3US6z5^5aS7w6{6}Q8_7xR8n8`W#|a$c(w:}S${t%XQ$|uQ$}vR){$y$o#{a!w!y#d#v#x$R$S$W&f'|(V(X(Y(a(e(u(v)Y)[)_)|*P+w,]-W-Y-s-}.P.m.p.x.z1^1g1o1u1|2P2T2f2|3O4g4p4x5f5k6u7R7|9Z9i9n9o9p9q9r9s9t9u9v9{9|9}:O:P:Q:R:S:T:W:X:Y:]:^:_:};U;V;W;Y;[T'}#s(OX({$Q9k9l9mU&Y!b$u+aQ'T!{Q)o$nQ.q*RQ1v-pR5X2k&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q$]#aZ!_!o$_%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,g,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pT!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ&W!bR/y+^Y&Q!b&U&]+^+dS(i#y(oS+h&c+kS-a(j(qQ-b(kQ-i(rQ.s*TU0T+i+m+nU0Y+o+p+qS0_+r2tQ1q-hQ1s-jQ1t-kS2o.v2rU3w0W0X0ZQ3{0[Q3|0^S5^2p2wS5a2u2vU6U3x3z3}Q6Z4OS6{5b5cQ6}5dS7f6W6YS7x6|7OQ8V7hQ8`7yQ;X;]R;Z;^lhOSj}!n$Z%b%e%f%h*m*r/d/gQ%j!QS&w!v9YQ)b$fQ*V%OQ*W%PQ+x&hS,Z&|9xS-u)S:UQ.V)cQ.u*UQ/k*tQ/m*uQ/u+XQ0]+oQ0c+yS1{-v:ZQ2U.WS2X.Y:[Q3n/wQ3q0OQ4Q0dQ4z2VQ6O3pQ6S3vQ6[4RQ7`5|Q7c6TQ8R7dQ8e8TR8q8g$W#`Z!_!o%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pW(t#z&{1S8jT)W$_,g$W#_Z!_!o%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pQ'e#`S)V$_,gR-w)W&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ%e{Q%f|Q%h!OQ%i!PR/c*pQ&d!iQ)X$aQ+u&gS-|)])uS0`+s+tW2O-y-z-{.hS4P0a0bU4w2Q2R2SU6n4v5T5UQ7o6oR8Z7rT+j&c+kS+h&c+kU0T+i+m+nU0Y+o+p+qS0_+r2tS2o.v2rU3w0W0X0ZQ3{0[Q3|0^S5^2p2wS5a2u2vU6U3x3z3}Q6Z4OS6{5b5cQ6}5dS7f6W6YS7x6|7OQ8V7hR8`7yS+j&c+kT2q.v2rS&q!q/aQ-S(^Q-_(iS0S+h2oQ1d-TS1l-`-iU3y0Y0_5aQ4c1_S4n1r1tU6X3{3|6}Q6f4dQ6m4qR7i6ZQ!xXS&p!q/aQ)T$YQ)`$dQ)f$jQ,O&qQ-R(^Q-^(iQ-c(lQ.U)aQ.}*ZS0R+h2oS1c-S-TS1k-_-iQ1n-bQ1p-dQ3R/OW3u0S0Y0_5aQ4b1_Q4f1dS4j1l1tQ4o1sQ5m3SW6V3y3{3|6}S6e4c4dS6i4k:`Q6k4nQ6x5[Q7V5nS7g6X6ZQ7k6fS7l6j:aQ7n6mQ7u6yQ8O7WQ8W7iS8Y7m:bQ8]7vQ8l8^Q8x8mQ9P8yQ:i:dQ:t:nQ:u:oQ:y;XR:{;Z$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hS!xn!k!j:c#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR:i;P$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hQ$Yb!Y$dm!j$g$h$i&T&i&j&k(i)d)e+Z+h+z+{-a.X/}0T0Y0e1q3w3|6U7f8VS$jn!kQ)a$eQ*Z%SW/O*[*]*^*_U3S/P/Q/RQ5[2oS5n3T3UU6y5]5^5aQ7W5oU7v6z6{6}S8^7w7xS8m8_8`Q8y8n!j:d#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ:n;OR:o;P$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hY!hRU!]!`%wv$vrs!r!u$X$t&_&s&v)v)w)x*k+W+f,Q,S/l0iQ*h%_!h:e#]#k'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR:h&VS&Z!b$uR/{+a$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!j'd#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR*g%_$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hQ'T!{!k:f#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q!h#VZ!_$_%v%|&x'P'^'_'`'a'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9U!R9b'c't+[,g/s/v0t0|0}1O1P1T1Y3o4W4]4^5Z5}6^6b6c7s:p!d#XZ!_$_%v%|&x'P'`'a'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9U}9d'c't+[,g/s/v0t1O1P1T1Y3o4W4]4^5Z5}6^6b6c7s:p!`#]Z!_$_%v%|&x'P'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9Un(Y#t&})R,}-V-l-m0n1y4a4r:j:v:w:xx;Q'c't+[,g/s/v0t1T1Y3o4W4]4^5Z5}6^6b6c7s:p!d;U&y'h(](c+t,Y,r-Z-x-{.l.n0b0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|Y;V8i8v8}9Q9SZ;W1R4[6_7j8X&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QS#l`#mR1V,j&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,j,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QS#g^#nT'm#i'qT#h^#nT'o#i'q&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,j,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QT#l`#mQ#o`R'x#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!k;O#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q#RdOSUj}!S!W!n!|#k$Z%Z%^%_%b%d%e%f%h%l&R&e'v)Z*i*m*r+v,k-q.O.y/[/]/^/`/d/g/i1U2e2}3b3d3e5j5xv#za!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;W#Q&{!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[Q)P$UQ,v(Rb1S9i9p9s9v9}:Q:T:Y:_c8j9Z9o9r9u9|:P:S:X:^v#wa!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;WS(l#y(oQ)Q$VQ-d(m#Q:k!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[b:l9Z9o9r9u9|:P:S:X:^b:m9i9p9s9v9}:Q:T:Y:_Q:q;RQ:r;SR:s;Tv#za!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;W#Q&{!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[b1S9i9p9s9v9}:Q:T:Y:_c8j9Z9o9r9u9|:P:S:X:^lfOSj}!n$Z%b%e%f%h*m*r/d/gQ(d#xQ*{%oQ*|%qR1f-W$n#{a!w!y#d#v#x$R$S$W&f'|(V(X(Y(a(e(u(v)Y)[)_)|*P+w,]-W-Y-s-}.P.m.p.x.z1^1g1o1u1|2P2T2f2|3O4g4p4x5f5k6u7R7|9Z9i9n9o9p9q9r9s9t9u9v9{9|9}:O:P:Q:R:S:T:W:X:Y:]:^:_:};U;V;W;Y;[Q*O$|Q.o*QQ2i.nR5W2jT(n#y(oS(n#y(oT2q.v2rQ)`$dQ-c(lQ.U)aQ.}*ZQ3R/OQ5m3SQ6x5[Q7V5nQ7u6yQ8O7WQ8]7vQ8l8^Q8x8mR9P8yn(V#t&})R,}-V-l-m0n1y4a4r:j:v:w:x!d9{&y'h(](c+t,Y,r-Z-x-{.l.n0b0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|Y9|8i8v8}9Q9SZ9}1R4[6_7j8Xp(X#t&})R,{,}-V-l-m0n1y4a4r:j:v:w:x!f:O&y'h(](c+t,Y,r-Z-x-{.l.n0b0k0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|[:P8i8v8{8}9Q9S]:Q1R4[6_6`7j8XpeOSjy}!n$Z%X%b%e%f%h*m*r/d/gQ%UxR*i%_peOSjy}!n$Z%X%b%e%f%h*m*r/d/gR%UxQ*S$}R.k){qeOSjy}!n$Z%X%b%e%f%h*m*r/d/gQ.w*XS2{.{.|W5e2x2y2z3PU7Q5g5h5iU7z7P7S7TQ8a7{R8o8bQ%]yR*c%XR3Y/UR7Y5pS$lp$qR.a)lQ%bzR*m%cR*s%iT/e*r/gR*w%jQ*v%jR/n*wQjOQ!nST$^j!nQ(O#sR,s(OQ!YQR%t!YQ!^RU%z!^%{+SQ%{!_R+S%|Q+_&WR/z+_Q,^&}R0o,^Q,a'PS0r,a0sR0s,bQ+k&cR0U+kS!eR$tU&`!e&a+TQ&a!fR+T%}Q+b&ZR/|+bQ&t!sQ,P&rU,T&t,P0jR0j,UQ'q#iR,l'qQ#m`R'w#mQ#cZU'g#c+O9hQ+O9UR9h'tQ-Q(^W1a-Q1b4e6gU1b-R-S-TS4e1c1dR6g4f$Z(T#t&y&}'h(](c(|(})R+t,W,X,Y,r,{,|,}-V-Z-l-m-x-{.l.n0b0k0l0m0n1R1e1i1y2S2h2j2z4U4Y4Z4[4a4h4l4r4t4y5U5i6]6_6`6a6h6l7T7j8X8i8t8u8v8{8|8}9Q9S:j:v:w:x:z:|Q-X(cU1h-X1j4iQ1j-ZR4i1iQ(o#yR-f(oQ(x#}R-o(xQ1}-xR4u1}Q)y$wR.j)yQ2l.qS5Y2l6wR6w5ZQ*U%OR.t*UQ2r.vR5_2rQ/T*`S3W/T5qR5q3YQ.[)hW2].[2_5O6rQ2_._Q5O2^R6r5PQ)m$lR.b)mQ/g*rR3h/gWiOSj!nQ%g}Q)U$ZQ*l%bQ*n%eQ*o%fQ*q%hQ/b*mS/e*r/gR3g/dQ$]gQ%k!RQ%n!TQ%p!UQ%r!VQ)t$rQ)z$xQ*b%]Q*y%mQ-e(nS/W*c*fQ/o*xQ/p*{Q/q*|S0P+h2oQ2b.eQ2g.lQ3Q.}Q3[/YQ3f/cY3s0R0S0Y0_5aQ5S2dQ5V2hQ5l3RQ5r3Z[6P3r3u3y3{3|6}Q6s5QQ7U5mQ7Z5sW7a6Q6V6X6ZQ7q6tQ7t6xQ7}7VU8Q7b7g7iQ8[7uQ8c8OS8d8S8WQ8k8]Q8p8fQ8w8lQ8z8rQ9O8xR9R9PQ$fmQ&h!jU)c$g$h$iQ+X&TU+y&i&j&kQ-](iS.W)d)eQ/w+ZQ0O+hS0d+z+{Q1m-aQ2V.XQ3p/}S3v0T0YQ4R0eQ4m1qS6T3w3|Q7d6UQ8T7fR8g8VS#ua:}R)^$cU#}a$c:}R-n(wQ#taS&y!w)_Q&}!yQ'h#dQ(]#vQ(c#xQ(|$RQ(}$SQ)R$WQ+t&fQ,W9nQ,X9qQ,Y9tQ,r'|Q,{(VQ,|(XQ,}(YQ-V(aQ-Z(eQ-l(uQ-m(vd-x)Y-}.x2P2|4x5f6u7R7|Q-{)[Q.l)|Q.n*PQ0b+wQ0k9{Q0l:OQ0m:RQ0n,]Q1R9iQ1e-WQ1i-YQ1y-sQ2S.PQ2h.mQ2j.pQ2z.zQ4U:WQ4Y9pQ4Z9sQ4[9vQ4a1^Q4h1gQ4l1oQ4r1uQ4t1|Q4y2TQ5U2fQ5i3OQ6]:]Q6_:TQ6`9}Q6a:QQ6h4gQ6l4pQ7T5kQ7j:YQ8X:_Q8i9ZQ8t9oQ8u9rQ8v9uQ8{9|Q8|:PQ8}:SQ9Q:XQ9S:^Q:j:}Q:v;UQ:w;VQ:x;WQ:z;YR:|;[lgOSj}!n$Z%b%e%f%h*m*r/d/gS!pU%dQ%m!SQ%s!WQ'U!|Q'u#kS*f%Z%^Q*j%_Q*x%lQ+U&RQ+s&eQ,p'vQ-z)ZQ/_*iQ0a+vQ1X,kQ1w-qQ2R.OQ2y.yQ3^/[Q3_/]Q3a/^Q3c/`Q3j/iQ4_1UQ5T2eQ5h2}Q5w3bQ5y3dQ5z3eQ7S5jR7]5x!vZOSUj}!S!n!|$Z%Z%^%_%b%d%e%f%h%l&R&e)Z*i*m*r+v-q.O.y/[/]/^/`/d/g/i2e2}3b3d3e5j5xQ!_RQ!oTQ$_kS%v!]%yQ%|!`Q&x!vQ'P!zQ'V#PQ'W#QQ'X#RQ'Y#SQ'Z#TQ'[#UQ']#VQ'^#WQ'_#XQ'`#YQ'a#ZQ'c#]Q'f#bQ'j#eW't#k'v,k1UQ)n$mS+P%w+RS+[&V/xQ+e&^Q+|&oQ,[&|Q,b'QQ,e9TQ,g9VQ,u(QQ-t)SQ/s+VQ/v+YQ0f+}Q0p,`Q0t9YQ0u9[Q0v9]Q0w9^Q0x9_Q0y9`Q0z9aQ0{9bQ0|9cQ0}9dQ1O9eQ1P9fQ1Q,fQ1T9jQ1Y9gQ1z-vQ2W.YQ3o9wQ3r0QQ4S0gQ4V0qQ4W9xQ4]9zQ4^:UQ5Z2mQ5}3mQ6Q3tQ6^:VQ6b:ZQ6c:[Q7b6RQ7s6vQ8S7eQ8f8UQ8r8hQ9U!WR:p;QR!aRR&X!bS&T!b+^S+Z&U&]R/}+dR'O!yR'R!zT!tU$XS!sU$XU$wrs*kS&r!r!uQ,R&sQ,U&vQ.i)xS0h,Q,SR4T0i`!dR!]!`$t%w&_)v+fh!qUrs!r!u$X&s&v)x,Q,S0iQ/a*kQ/t+WQ3l/lT:g&V)wT!gR$tS!fR$tS%x!]&_S%}!`)vS+Q%w+fT+]&V)wT&[!b$uQ#i^R'z#nT'p#i'qR1W,jT(`#v(hR(f#xQ-y)YQ2Q-}Q2x.xQ4v2PQ5g2|Q6o4xQ7P5fQ7r6uQ7{7RR8b7|lhOSj}!n$Z%b%e%f%h*m*r/d/gQ%[yR*b%XV$xrs*kR.r*RR*a%VQ$ppR)s$qR)i$kT%`z%cT%az%cT/f*r/g",nodeNames:"\u26A0 ArithOp ArithOp InterpolationStart extends LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:HQ,nodeProps:[["closedBy",3,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[rw],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T'u(rZ$UW]!ROY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j'u*{R$P&j$UW]!RO!^%T!_#o%T#p~%T'm+ZV]!ROY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U'm+wO$P&j]!R'm+zROr+Urs,Ts~+U'm,[U$P&j]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R,sU]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R-[O]!R!R-_PO~,n'u-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k'u.VZ$P&j$UW]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/PZ$UW]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/yR$UW]!RO!^%T!_#o%T#p~%T!Z0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x2k0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`2k1g]$UW'o2cOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']%k'g2bOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T6d5lU'x6[$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T'u6jZ$UW]!ROY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w'm8YV]!ROY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T'm8rROw8Twx8{x~8T'm9SU$P&j]!ROY9fZw9fwx-Vx#O9f#O#P9}#P~9f!R9kU]!ROY9fZw9fwx-Vx#O9f#O#P9}#P~9f!R:QPO~9f'u:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c'u:xZ$P&j$UW]!ROY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k!Z;rZ$UW]!ROY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k!Z<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k%V=QR!d$}$UWO!^%T!_#o%T#p~%TZ=bR!cR$UWO!^%T!_#o%T#p~%T5s=tU'^2s#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T$u>rSj$m$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu6`$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%Ty@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%Ty@iR!Qq$UWO!^%T!_#o%T#p~%Ty@yZ$UWkqO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%TyAqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%TyBiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%TyCVV$UWkqO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Duy!0cd$UWkqO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%Ty!1x_$UWkqO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%Ty!3OR$UWkqO!^%T!_#o%T#p~%Ty!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%Ty!3}Y$UWkqO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%Ty!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%Ty!5`X$UWkqO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%Ty!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%Ty!6z]$UWkqO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T%w!7|R!]V$UW#m%hO!^%T!_#o%T#p~%T!P!8^R_w$UWO!^%T!_#o%T#p~%T6i!8rR'bd!a0`#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v%w!9kT!{%o$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%w!:gT'a!s#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T6i!<YV'p6a$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T)z!<vRv)r$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%TZ!={R!OR$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$P!>pR$UW'f#wO!^%T!_#o%T#p~%T~!?OO!T~6d!?VT'w6[$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T5g!?oR!S5]nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']%k'g2bOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']%k'g2bOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[JQ,ew,tw,0,1,2,3,4,5,6,7,8,9,KQ],topRules:{Script:[0,7]},dialects:{jsx:11707,ts:11709},dynamicPrecedences:{"149":1,"176":1},specialized:[{term:289,get:(r,e)=>iw(r,e)<<1},{term:289,get:r=>nw[r]||-1},{term:299,get:r=>sw[r]||-1},{term:63,get:r=>lw[r]||-1}],tokenPrec:11730});function jO(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function aw(r){let e=Object.create(null),t=Object.create(null);for(let{label:n}of r){e[n[0]]=!0;for(let s=1;s<n.length;s++)t[n[s]]=!0}let i=jO(e)+jO(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function hw(r){let e=r.map(n=>typeof n=="string"?{label:n}:n),[t,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:aw(e);return n=>{let s=n.matchBefore(i);return s||n.explicit?{from:s?s.from:n.pos,options:e,validFor:t}:null}}function uw(r,e){return t=>{for(let i=ke(t.state).resolveInner(t.pos,-1);i;i=i.parent)if(r.indexOf(i.name)>-1)return null;return e(t)}}const fw=G.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class cw{constructor(e,t,i,n){this.field=e,this.line=t,this.from=i,this.to=n}}class qa{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,_e.TrackDel),i=e.mapPos(this.to,1,_e.TrackDel);return t==null||i==null?null:new qa(this.field,t,i)}}class Ya{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],n=[t],s=e.doc.lineAt(t),l=/^\s*/.exec(s.text)[0];for(let a of this.lines){if(i.length){let h=l,u=/^\t*/.exec(a)[0].length;for(let f=0;f<u;f++)h+=e.facet(co);n.push(t+h.length-u),a=h+a.slice(u)}i.push(a),t+=a.length+1}let o=this.fieldPositions.map(a=>new qa(a.field,n[a.line]+a.from,n[a.line]+a.to));return{text:i,ranges:o}}static parse(e){let t=[],i=[],n=[],s;for(let l of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(l);){let o=s[1]?+s[1]:null,a=s[2]||s[3]||"",h=-1;for(let u=0;u<t.length;u++)(o!=null?t[u].seq==o:a?t[u].name==a:!1)&&(h=u);if(h<0){let u=0;for(;u<t.length&&(o==null||t[u].seq!=null&&t[u].seq<o);)u++;t.splice(u,0,{seq:o,name:a}),h=u;for(let f of n)f.field>=h&&f.field++}n.push(new cw(h,i.length,s.index,s.index+a.length)),l=l.slice(0,s.index)+a+l.slice(s.index+s[0].length)}i.push(l)}return new Ya(i,n)}}let dw=V.widget({widget:new class extends Gi{toDOM(){let r=document.createElement("span");return r.className="cm-snippetFieldPosition",r}ignoreEvent(){return!1}}}),pw=V.mark({class:"cm-snippetField"});class fr{constructor(e,t){this.ranges=e,this.active=t,this.deco=V.set(e.map(i=>(i.from==i.to?dw:pw).range(i.from,i.to)))}map(e){let t=[];for(let i of this.ranges){let n=i.map(e);if(!n)return null;t.push(n)}return new fr(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(i=>i.field==this.active&&i.from<=t.from&&i.to>=t.to))}}const tn=he.define({map(r,e){return r&&r.map(e)}}),Ow=he.define(),rn=Wt.define({create(){return null},update(r,e){for(let t of e.effects){if(t.is(tn))return t.value;if(t.is(Ow)&&r)return new fr(r.ranges,t.value)}return r&&e.docChanged&&(r=r.map(e.changes)),r&&e.selection&&!r.selectionInsideField(e.selection)&&(r=null),r},provide:r=>G.decorations.from(r,e=>e?e.deco:V.none)});function Fa(r,e){return _.create(r.filter(t=>t.field==e).map(t=>_.range(t.from,t.to)))}function gw(r){let e=Ya.parse(r);return(t,i,n,s)=>{let{text:l,ranges:o}=e.instantiate(t.state,n),a={changes:{from:n,to:s,insert:Y.of(l)}};if(o.length&&(a.selection=Fa(o,0)),o.length>1){let h=new fr(o,0),u=a.effects=[tn.of(h)];t.state.field(rn,!1)===void 0&&u.push(he.appendConfig.of([rn,bw,kw,fw]))}t.dispatch(t.state.update(a))}}function VO(r){return({state:e,dispatch:t})=>{let i=e.field(rn,!1);if(!i||r<0&&i.active==0)return!1;let n=i.active+r,s=r>0&&!i.ranges.some(l=>l.field==n+r);return t(e.update({selection:Fa(i.ranges,n),effects:tn.of(s?null:new fr(i.ranges,n))})),!0}}const mw=[{key:"Tab",run:VO(1),shift:VO(-1)},{key:"Escape",run:({state:r,dispatch:e})=>r.field(rn,!1)?(e(r.update({effects:tn.of(null)})),!0):!1}],GO=U.define({combine(r){return r.length?r[0]:mw}}),bw=hn.highest(An.compute([GO],r=>r.facet(GO)));function Di(r,e){return Object.assign(Object.assign({},e),{apply:gw(r)})}const kw=G.domEventHandlers({mousedown(r,e){let t=e.state.field(rn,!1),i;if(!t||(i=e.posAtCoords({x:r.clientX,y:r.clientY}))==null)return!1;let n=t.ranges.find(s=>s.from<=i&&s.to>=i);return!n||n.field==t.active?!1:(e.dispatch({selection:Fa(t.ranges,n.field),effects:tn.of(t.ranges.some(s=>s.field>n.field)?new fr(t.ranges,n.field):null)}),!0)}}),qO=new class extends mi{};qO.startSide=1,qO.endSide=-1;const yw=[Di("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Di("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Di("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Di(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"block",type:"keyword"}),Di(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Di('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Di('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],Ni=Ji.define({parser:ow.configure({props:[Xr.add({IfStatement:Vn({except:/^\s*({|else\b)/}),TryStatement:Vn({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:o1,SwitchBody:r=>{let e=r.textAfter,t=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return r.baseIndent+(t?0:i?1:2)*r.unit},Block:l1({closing:"}"}),ArrowFunction:r=>r.baseIndent+r.unit,"TemplateString BlockComment":()=>-1,"Statement Property":Vn({except:/^{/}),JSXElement(r){let e=/^\s*<\//.test(r.textAfter);return r.lineIndent(r.node.from)+(e?0:r.unit)},JSXEscape(r){let e=/\s*\}/.test(r.textAfter);return r.lineIndent(r.node.from)+(e?0:r.unit)},"JSXOpenTag JSXSelfClosingTag"(r){return r.column(r.node.from)+r.unit}}),Gn.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":Lf,BlockComment(r){return{from:r.from+2,to:r.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),xw=Ni.configure({dialect:"ts"}),Qw=Ni.configure({dialect:"jsx"}),ww=Ni.configure({dialect:"jsx ts"});function Sw(r={}){let e=r.jsx?r.typescript?ww:Qw:r.typescript?xw:Ni;return new zr(e,[Ni.data.of({autocomplete:uw(["LineComment","BlockComment","String"],hw(yw))}),r.jsx?$w:[]])}function YO(r,e,t=r.length){if(!e)return"";let i=e.getChild("JSXIdentifier");return i?r.sliceString(i.from,Math.min(i.to,t)):""}const vw=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),$w=G.inputHandler.of((r,e,t,i)=>{if((vw?r.composing:r.compositionStarted)||r.state.readOnly||e!=t||i!=">"&&i!="/"||!Ni.isActiveAt(r.state,e,-1))return!1;let{state:n}=r,s=n.changeByRange(l=>{var o,a,h;let{head:u}=l,f=ke(n).resolveInner(u,-1),c;if(f.name=="JSXStartTag"&&(f=f.parent),i==">"&&f.name=="JSXFragmentTag")return{range:_.cursor(u+1),changes:{from:u,insert:"><>"}};if(i==">"&&f.name=="JSXIdentifier"){if(((a=(o=f.parent)===null||o===void 0?void 0:o.lastChild)===null||a===void 0?void 0:a.name)!="JSXEndTag"&&(c=YO(n.doc,f.parent,u)))return{range:_.cursor(u+1),changes:{from:u,insert:`></${c}>`}}}else if(i=="/"&&f.name=="JSXFragmentTag"){let d=f.parent,p=d==null?void 0:d.parent;if(d.from==u-1&&((h=p.lastChild)===null||h===void 0?void 0:h.name)!="JSXEndTag"&&(c=YO(n.doc,p==null?void 0:p.firstChild,u))){let k=`/${c}>`;return{range:_.cursor(u+k.length),changes:{from:u,insert:k}}}}return{range:l}});return s.changes.empty?!1:(r.dispatch(s,{userEvent:"input.type",scrollIntoView:!0}),!0)}),nn=["_blank","_self","_top","_parent"],Ha=["ascii","utf-8","utf-16","latin1","latin1"],Ka=["get","post","put","delete"],Ja=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],it=["true","false"],X={},nl={a:{attrs:{href:null,ping:null,type:null,media:null,target:nn,hreflang:null}},abbr:X,acronym:X,address:X,applet:X,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:X,aside:X,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:X,base:{attrs:{href:null,target:nn}},basefont:X,bdi:X,bdo:X,big:X,blockquote:{attrs:{cite:null}},body:X,br:X,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Ja,formmethod:Ka,formnovalidate:["novalidate"],formtarget:nn,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:X,center:X,cite:X,code:X,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:X,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:X,dir:X,div:X,dl:X,dt:X,em:X,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:X,figure:X,font:X,footer:X,form:{attrs:{action:null,name:null,"accept-charset":Ha,autocomplete:["on","off"],enctype:Ja,method:Ka,novalidate:["novalidate"],target:nn}},frame:X,frameset:X,h1:X,h2:X,h3:X,h4:X,h5:X,h6:X,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:X,hgroup:X,hr:X,html:{attrs:{manifest:null}},i:X,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Ja,formmethod:Ka,formnovalidate:["novalidate"],formtarget:nn,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:X,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:X,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:X,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Ha,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:X,noframes:X,noscript:X,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:X,param:{attrs:{name:null,value:null}},pre:X,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:X,rt:X,ruby:X,s:X,samp:X,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Ha}},section:X,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:X,source:{attrs:{src:null,type:null,media:null}},span:X,strike:X,strong:X,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:X,summary:X,sup:X,table:X,tbody:X,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:X,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:X,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:X,time:{attrs:{datetime:null}},title:X,tr:X,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},tt:X,u:X,ul:{children:["li","script","template","ul","ol"]},var:X,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:X},FO={accesskey:null,class:null,contenteditable:it,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:it,autocorrect:it,autocapitalize:it,style:null,tabindex:null,title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":it,"aria-autocomplete":["inline","list","both","none"],"aria-busy":it,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":it,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":it,"aria-hidden":it,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":it,"aria-multiselectable":it,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":it,"aria-relevant":null,"aria-required":it,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},Tw=Object.keys(nl),HO=Object.keys(FO);function cr(r,e,t=r.length){if(!e)return"";let i=e.firstChild,n=i&&i.getChild("TagName");return n?r.sliceString(n.from,Math.min(n.to,t)):""}function sl(r,e=!1){for(let t=r.parent;t;t=t.parent)if(t.name=="Element")if(e)e=!1;else return t;return null}function KO(r,e){let t=nl[cr(r,sl(e,!0))];return(t==null?void 0:t.children)||Tw}function eh(r,e){let t=[];for(let i=e;i=sl(i);){let n=cr(r,i);if(n&&i.lastChild.name=="CloseTag")break;n&&t.indexOf(n)<0&&(e.name=="EndTag"||e.from>=i.firstChild.to)&&t.push(n)}return t}const JO=/^[:\-\.\w\u00b7-\uffff]*$/;function eg(r,e,t,i){let n=/\s*>/.test(r.sliceDoc(i,i+5))?"":">";return{from:t,to:i,options:KO(r.doc,e).map(s=>({label:s,type:"type"})).concat(eh(r.doc,e).map((s,l)=>({label:"/"+s,apply:"/"+s+n,type:"type",boost:99-l}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function tg(r,e,t,i){let n=/\s*>/.test(r.sliceDoc(i,i+5))?"":">";return{from:t,to:i,options:eh(r.doc,e).map((s,l)=>({label:s,apply:s+n,type:"type",boost:99-l})),validFor:JO}}function Pw(r,e,t){let i=[],n=0;for(let s of KO(r.doc,e))i.push({label:"<"+s,type:"type"});for(let s of eh(r.doc,e))i.push({label:"</"+s+">",type:"type",boost:99-n++});return{from:t,to:t,options:i,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function Cw(r,e,t,i){let n=sl(e),s=n?nl[cr(r.doc,n)]:null,l=s&&s.attrs?Object.keys(s.attrs).concat(HO):HO;return{from:t,to:i,options:l.map(o=>({label:o,type:"property"})),validFor:JO}}function Aw(r,e,t,i){var n;let s=(n=e.parent)===null||n===void 0?void 0:n.getChild("AttributeName"),l=[],o;if(s){let a=r.sliceDoc(s.from,s.to),h=FO[a];if(!h){let u=sl(e),f=u?nl[cr(r.doc,u)]:null;h=(f==null?void 0:f.attrs)&&f.attrs[a]}if(h){let u=r.sliceDoc(t,i).toLowerCase(),f='"',c='"';/^['"]/.test(u)?(o=u[0]=='"'?/^[^"]*$/:/^[^']*$/,f="",c=r.sliceDoc(i,i+1)==u[0]?"":u[0],u=u.slice(1),t++):o=/^[^\s<>='"]*$/;for(let d of h)l.push({label:d,apply:f+d+c,type:"constant"})}}return{from:t,to:i,options:l,validFor:o}}function Rw(r){let{state:e,pos:t}=r,i=ke(e).resolveInner(t),n=i.resolve(t,-1);for(let s=t,l;i==n&&(l=n.childBefore(s));){let o=l.lastChild;if(!o||!o.type.isError||o.from<o.to)break;i=n=l,s=o.from}return n.name=="TagName"?n.parent&&/CloseTag$/.test(n.parent.name)?tg(e,n,n.from,t):eg(e,n,n.from,t):n.name=="StartTag"?eg(e,n,t,t):n.name=="StartCloseTag"||n.name=="IncompleteCloseTag"?tg(e,n,t,t):r.explicit&&(n.name=="OpenTag"||n.name=="SelfClosingTag")||n.name=="AttributeName"?Cw(e,n,n.name=="AttributeName"?n.from:t,t):n.name=="Is"||n.name=="AttributeValue"||n.name=="UnquotedAttributeValue"?Aw(e,n,n.name=="Is"?t:n.from,t):r.explicit&&(i.name=="Element"||i.name=="Text"||i.name=="Document")?Pw(e,n,t):null}const th=Ji.define({parser:Ix.configure({props:[Xr.add({Element(r){let e=/^(\s*)(<\/)?/.exec(r.textAfter);return r.node.to<=r.pos+e[0].length?r.continue():r.lineIndent(r.node.from)+(e[2]?0:r.unit)},"OpenTag CloseTag SelfClosingTag"(r){return r.column(r.node.from)+r.unit},Document(r){if(r.pos+/\s*/.exec(r.textAfter)[0].length<r.node.to)return r.continue();let e=null,t;for(let i=r.node;;){let n=i.lastChild;if(!n||n.name!="Element"||n.to!=i.to)break;e=i=n}return e&&!((t=e.lastChild)&&(t.name=="CloseTag"||t.name=="SelfClosingTag"))?r.lineIndent(e.from)+r.unit:null}}),Gn.add({Element(r){let e=r.firstChild,t=r.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:t.name=="CloseTag"?t.from:r.to}}})],wrap:Xx([{tag:"script",attrs(r){return!r.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(r.type)},parser:Ni.parser},{tag:"style",attrs(r){return(!r.lang||r.lang=="css")&&(!r.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(r.type))},parser:Ba.parser}])}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}});function Ww(r={}){let e=th;return r.matchClosingTags===!1&&(e=e.configure({dialect:"noMatch"})),new zr(e,[th.data.of({autocomplete:Rw}),r.autoCloseTags!==!1?_w:[],Sw().support,mQ().support])}const _w=G.inputHandler.of((r,e,t,i)=>{if(r.composing||r.state.readOnly||e!=t||i!=">"&&i!="/"||!th.isActiveAt(r.state,e,-1))return!1;let{state:n}=r,s=n.changeByRange(l=>{var o,a,h;let{head:u}=l,f=ke(n).resolveInner(u,-1),c;if((f.name=="TagName"||f.name=="StartTag")&&(f=f.parent),i==">"&&f.name=="OpenTag"){if(((a=(o=f.parent)===null||o===void 0?void 0:o.lastChild)===null||a===void 0?void 0:a.name)!="CloseTag"&&(c=cr(n.doc,f.parent,u)))return{range:_.cursor(u+1),changes:{from:u,insert:`></${c}>`}}}else if(i=="/"&&f.name=="OpenTag"){let d=f.parent,p=d==null?void 0:d.parent;if(d.from==u-1&&((h=p.lastChild)===null||h===void 0?void 0:h.name)!="CloseTag"&&(c=cr(n.doc,p,u))){let k=`/${c}>`;return{range:_.cursor(u+k.length),changes:{from:u,insert:k}}}}return{range:l}});return s.changes.empty?!1:(r.dispatch(s,{userEvent:"input.type",scrollIntoView:!0}),!0)}),ig=zf({block:{open:"<!--",close:"-->"}}),rg=wy.configure({props:[Gn.add(r=>{if(!(!r.is("Block")||r.is("Document")))return(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})}),Xr.add({Document:()=>null}),Ki.add({Document:ig})]});function ih(r){return new Je(ig,r)}const Iw=ih(rg),rh=ih(rg.configure([Ry,_y,Wy,Iy]));function zw(r,e){return t=>{if(t&&r){let i=null;if(typeof r=="function"?i=r(t):i=jn.matchLanguageName(r,t,!0),i instanceof jn)return i.support?i.support.language.parser:Ir.getSkippingParser(i.load());if(i)return i.parser}return e?e.parser:null}}function ng(r,e){return e.sliceString(r.from,r.from+50)}class nh{constructor(e,t,i,n,s,l,o){this.node=e,this.from=t,this.to=i,this.spaceBefore=n,this.spaceAfter=s,this.type=l,this.item=o}blank(e=!0){let t=this.spaceBefore;if(this.node.name=="Blockquote")t+=">";else for(let i=this.to-this.from-t.length-this.spaceAfter.length;i>0;i--)t+=" ";return t+(e?this.spaceAfter:"")}marker(e,t){let i=this.node.name=="OrderedList"?String(+lg(this.item,e)[2]+t):"";return this.spaceBefore+i+this.type+this.spaceAfter}}function sg(r,e,t){let i=[];for(let l=r;l&&l.name!="Document";l=l.parent)(l.name=="ListItem"||l.name=="Blockquote")&&i.push(l);let n=[],s=0;for(let l=i.length-1;l>=0;l--){let o=i[l],a,h=s;if(o.name=="Blockquote"&&(a=/^[ \t]*>( ?)/.exec(e.slice(s))))s+=a[0].length,n.push(new nh(o,h,s,"",a[1],">",null));else if(o.name=="ListItem"&&o.parent.name=="OrderedList"&&(a=/^([ \t]*)\d+([.)])([ \t]*)/.exec(ng(o,t)))){let u=a[3],f=a[0].length;u.length>=4&&(u=u.slice(0,u.length-4),f-=4),s+=f,n.push(new nh(o.parent,h,s,a[1],u,a[2],o))}else if(o.name=="ListItem"&&o.parent.name=="BulletList"&&(a=/^([ \t]*)([-+*])([ \t]{1,4}\[[ xX]\])?([ \t]+)/.exec(ng(o,t)))){let u=a[4],f=a[0].length;u.length>4&&(u=u.slice(0,u.length-4),f-=4);let c=a[2];a[3]&&(c+=a[3].replace(/[xX]/," ")),s+=f,n.push(new nh(o.parent,h,s,a[1],u,c,o))}}return n}function lg(r,e){return/^(\s*)(\d+)(?=[.)])/.exec(e.sliceString(r.from,r.from+10))}function sh(r,e,t,i=0){for(let n=-1,s=r;;){if(s.name=="ListItem"){let o=lg(s,e),a=+o[2];if(n>=0){if(a!=n+1)return;t.push({from:s.from+o[1].length,to:s.from+o[0].length,insert:String(n+2+i)})}n=a}let l=s.nextSibling;if(!l)break;s=l}}const Xw=({state:r,dispatch:e})=>{let t=ke(r),{doc:i}=r,n=null,s=r.changeByRange(l=>{if(!l.empty||!rh.isActiveAt(r,l.from))return n={range:l};let o=l.from,a=i.lineAt(o),h=sg(t.resolveInner(o,-1),a.text,i);for(;h.length&&h[h.length-1].from>o-a.from;)h.pop();if(!h.length)return n={range:l};let u=h[h.length-1];if(u.to-u.spaceAfter.length>o-a.from)return n={range:l};let f=o>=u.to-u.spaceAfter.length&&!/\S/.test(a.text.slice(u.to));if(u.item&&f)if(u.node.firstChild.to>=o||a.from>0&&!/[^\s>]/.test(i.lineAt(a.from-1).text)){let w=h.length>1?h[h.length-2]:null,S,P="";w&&w.item?(S=a.from+w.from,P=w.marker(i,1)):S=a.from+(w?w.to:0);let v=[{from:S,to:o,insert:P}];return u.node.name=="OrderedList"&&sh(u.item,i,v,-2),w&&w.node.name=="OrderedList"&&sh(w.item,i,v),{range:_.cursor(S+P.length),changes:v}}else{let w="";for(let S=0,P=h.length-2;S<=P;S++)w+=h[S].blank(S<P);return w+=r.lineBreak,{range:_.cursor(o+w.length),changes:{from:a.from,insert:w}}}if(u.node.name=="Blockquote"&&f&&a.from){let w=i.lineAt(a.from-1),S=/>\s*$/.exec(w.text);if(S&&S.index==u.from){let P=r.changes([{from:w.from+S.index,to:w.to},{from:a.from+u.from,to:a.to}]);return{range:l.map(P),changes:P}}}let c=[];u.node.name=="OrderedList"&&sh(u.item,i,c);let d=r.lineBreak,p=u.item&&u.item.from<a.from;if(!p||/^[\s\d.)\-+*>]*/.exec(a.text)[0].length>=u.to)for(let w=0,S=h.length-1;w<=S;w++)d+=w==S&&!p?h[w].marker(i,1):h[w].blank();let k=o;for(;k>a.from&&/\s/.test(a.text.charAt(k-a.from-1));)k--;return c.push({from:k,to:o,insert:d}),{range:_.cursor(k+d.length),changes:c}});return n?!1:(e(r.update(s,{scrollIntoView:!0,userEvent:"input"})),!0)};function og(r){return r.name=="QuoteMark"||r.name=="ListMark"}function Dw(r,e){let t=r.resolveInner(e,-1),i=e;og(t)&&(i=t.from,t=t.parent);for(let n;n=t.childBefore(i);)if(og(n))i=n.from;else if(n.name=="OrderedList"||n.name=="BulletList")t=n.lastChild,i=t.to;else break;return t}const ag=[{key:"Enter",run:Xw},{key:"Backspace",run:({state:r,dispatch:e})=>{let t=ke(r),i=null,n=r.changeByRange(s=>{let l=s.from,{doc:o}=r;if(s.empty&&rh.isActiveAt(r,s.from)){let a=o.lineAt(l),h=sg(Dw(t,l),a.text,o);if(h.length){let u=h[h.length-1],f=u.to-u.spaceAfter.length+(u.spaceAfter?1:0);if(l-a.from>f&&!/\S/.test(a.text.slice(f,l-a.from)))return{range:_.cursor(a.from+f),changes:{from:a.from+f,to:l}};if(l-a.from==f){let c=a.from+u.from;if(u.item&&u.node.from<u.item.from&&/\S/.test(a.text.slice(u.from,u.to)))return{range:s,changes:{from:c,to:a.from+u.to,insert:u.blank()}};if(c<l)return{range:_.cursor(c),changes:{from:c,to:l}}}}}return i={range:s}});return i?!1:(e(r.update(n,{scrollIntoView:!0,userEvent:"delete"})),!0)}}],hg=Ww({matchClosingTags:!1});function Nw(r={}){let{codeLanguages:e,defaultCodeLanguage:t,addKeymap:i=!0,base:{parser:n}=Iw}=r;if(!(n instanceof ks))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let s=r.extensions?[r.extensions]:[],l=[hg.support],o;t instanceof zr?(l.push(t.support),o=t.language):t&&(o=t);let a=e||o?zw(e,o):void 0;return s.push(vy({codeParser:a,htmlParser:hg.language.parser})),i&&l.push(hn.high(An.of(ag))),new zr(ih(n.configure(s)),l)}const dr={highlight:Le.define(),kirbytag:Le.define(),inlineCode:Le.define()};function Ew(r){const e=r.join("|");return{defineNodes:["Kirbytag"],parseInline:[{name:"Kirbytag",parse(t,i,n){if(i!=40)return-1;let s=t.slice(n,t.end),l=new RegExp(`(\\((?:${e}):)|(\\()|(\\))`,"gi"),o=0,a,h=!1;for(;a=l.exec(s);){if(!h&&!a[1])return-1;if(!h&&a[1])h=!0,o+=1;else if(h&&(a[1]||a[2]))o+=1;else if(h&&a[3]&&(o-=1,o===0))return t.addElement(t.elt("Kirbytag",n,n+a.index+a[0].length))}return-1},before:"Emphasis"}],props:[Dt({Kirbytag:dr.kirbytag})]}}const Bw={resolve:"Highlight",mark:"HighlightMark"},Mw={defineNodes:["Highlight","HighlightMark"],parseInline:[{name:"Highlight",parse(r,e,t){return e!=61||r.char(t+1)!=61?-1:r.addDelimiter(Bw,t,t+2,!0,!0)},after:"Emphasis"}],props:[Dt({HighlightMark:x.processingInstruction,"Highlight/...":dr.highlight})]},Lw={props:[Dt({"InlineCode/...":dr.inlineCode})]};class Zw extends tt{keys(){return ag}plugins(){return[Nw({base:rh,extensions:[this.input.kirbytext?Ew(this.input.knownKirbytags):null,Mw,Lw]})]}get syntax(){return[{token:"FencedCode",type:"block",class:"cm-codeblock"},{token:"Blockquote",type:"block",class:"cm-blockquote",mark:/^(\s*)(>+)(\s*)/,markToken:"QuoteMark",render:"> ",multiLine:!0},{token:"BulletList",type:"block",class:"cm-ol",mark:/^(\s*)([-+*])(\s+)/,markToken:"ListMark",render:"- ",multiLine:!0},{token:"OrderedList",type:"block",class:"cm-ol",mark:/^(\s*)(\d+\.)(\s+)/,markToken:"ListMark",render:e=>`${e}. `,multiLine:!0},{token:"ATXHeading1",type:"block",class:"cm-heading",mark:/^(\s{0,3})(#{1})(\s+)/,markToken:"HeaderMark",render:"# ",multiLine:!1},{token:"ATXHeading2",type:"block",class:"cm-heading",mark:/^(\s{0,3})(#{2})(\s+)/,markToken:"HeaderMark",render:"## ",multiLine:!1},{token:"ATXHeading3",type:"block",class:"cm-heading",mark:/^(\s{0,3})(#{3})(\s+)/,markToken:"HeaderMark",render:"### ",multiLine:!1},{token:"ATXHeading4",type:"block",class:"cm-heading",mark:/^(\s{0,3})(#{4})(\s+)/,markToken:"HeaderMark",render:"#### ",multiLine:!1},{token:"ATXHeading5",type:"block",class:"cm-heading",mark:/^(\s{0,3})(#{5})(\s+)/,markToken:"HeaderMark",render:"##### ",multiLine:!1},{token:"ATXHeading6",type:"block",class:"cm-heading",mark:/^(\s{0,3})(#{6})(\s+)/,markToken:"HeaderMark",render:"###### ",multiLine:!1},{token:"HorizontalRule",type:"block",class:"cm-hr",render:"***"},{token:"Emphasis",type:"inline",mark:"*",markToken:"EmphasisMark",escape:!0,mixable:!0,expelEnclosingWhitespace:!0},{token:"Highlight",type:"inline",mark:"==",markToken:"HighlightMark",escape:!0,mixable:!0,expelEnclosingWhitespace:!0},{token:"InlineCode",type:"inline",mark:"`",markToken:"CodeMark",escape:!1,mixable:!1,expelEnclosingWhitespace:!0},{token:"Strikethrough",type:"inline",mark:"~~",markToken:"StrikethroughMark",escape:!0,mixable:!0,expelEnclosingWhitespace:!0},{token:"StrongEmphasis",type:"inline",mark:"**",markToken:"EmphasisMark",escape:!0,mixable:!0,expelEnclosingWhitespace:!0},{token:"URL",type:"inline"},{token:"Kirbytag",type:"inline"}]}get type(){return"language"}}function ug(r,e){const t=new Gt;for(let{from:i,to:n}of r.visibleRanges){let s=null;for(let l=i;l<=n;){const o=r.state.doc.lineAt(l),a=Tk(r,e,l+o.text.match(/^\s*/)[0].length);let h=null;if(e.exists(a)){const u=e.get(a);if(!u.mark)t.add(o.from,o.from,V.line({attributes:{class:u.class}}));else if(u.mark){if(h=o.text.match(u.mark),h){const[,f,c,d]=h;t.add(o.from,o.from,V.line({attributes:{class:u.class,style:`--cm-indent: ${f.length}ch; --cm-mark: ${c.length+d.length}ch;`}}))}else if(h&&u.multiLine&&s){h=s.matches;const[,f,c,d]=h;t.add(o.from,o.from,V.line({attributes:{class:u.class,style:`--cm-indent: ${f.length+c.length+d.length}ch;`}}))}}}s={token:a,matches:h},l=o.to+1}}return t.finish()}class Uw extends tt{plugins(){const e=this.editor.blockFormats;return[Be.fromClass(class{constructor(t){this.decorations=ug(t,e)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=ug(t.view,e))}},{decorations:t=>t.decorations})]}get type(){return"language"}}class jw extends tt{plugins(){const e=this.input.kirbytext;return[Be.define(i=>({}),{eventHandlers:{paste(i,n){let s=i.clipboardData.getData("text");if(!ln(s))return;const{from:l,to:o}=n.state.selection.main;if(l===o)return;const a=n.state.doc.lineAt(l).number,h=n.state.doc.lineAt(o).number;if(a!==h)return;i.preventDefault(),e&&s.startsWith(window.panel.site)&&(s=s.substr(window.panel.site.length).replace(/^\//,""));let[,u,f,c]=n.state.sliceDoc(l,o).match(/^(\s*)(.*?)(\s*)$/),d=e?`(link: ${s} text: ${f})`:`[${f}](${s})`;return n.dispatch({changes:{insert:d,from:l+u.length,to:o-c.length},annotations:me.userEvent.of("paste"),scrollIntoView:!0}),!0}}})]}get type(){return"language"}}function fg(r){let e=new Gt;for(let{from:t,to:i}of r.visibleRanges)ke(r.state).iterate({enter:({name:n,from:s,to:l})=>{if(n!=="TaskMarker")return;const o=r.state.doc.sliceString(s,l)==="[x]";e.add(s,l,V.mark({class:"cm-taskmarker is-"+(o?"checked":"unchecked")}))},from:t,to:i});return e.finish()}function Vw(r,e){let t=r.state.doc.sliceString(e,Math.min(e+3,r.state.doc.length)),i;if(t=="[ ]")i="[x]";else if(t==="[x]")i="[ ]";else return!1;return r.dispatch({changes:{from:e,to:e+3,insert:i}}),!0}function Gw(r){const e=r.state.doc.lineAt(r.state.selection.main.from),t=r.state.doc.lineAt(r.state.selection.main.to);let i=[];ke(r.state).iterate({enter:({name:s,from:l,to:o})=>{s==="TaskMarker"&&i.push({from:l,to:o,checked:r.state.doc.sliceString(l,o)==="[x]"})},from:e.from,to:t.to});const n=i.filter(s=>!s.checked).length===0;i.forEach(({from:s,to:l})=>{const o=n?"[ ]":"[x]";r.dispatch({changes:{from:s,to:l,insert:o}})})}class qw extends tt{keys(){return[{key:"Cmd-.",run:Gw,preventDefault:!0}]}plugins(){return[Be.fromClass(class{constructor(t){this.decorations=fg(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=fg(t.view))}},{decorations:t=>t.decorations,eventHandlers:{mousedown:({target:t},i)=>{if(t.classList&&t.classList.contains("cm-taskmarker")||t.closest(".cm-taskmarker"))return Vw(i,i.posAtDOM(t))}}})]}get token(){return"TaskMarker"}get tokenType(){return"inline"}get type(){return"language"}}function Yw(){return mo.define([{tag:x.contentSeparator,color:"currentColor",fontWeight:"700"},{tag:[x.heading1,x.heading2,x.heading3,x.heading4,x.heading5,x.heading6],fontWeight:"700",color:"currentColor"},{tag:dr.highlight,backgroundColor:"var(--cm-color-highlight-background)",color:"var(--color-text) !important"},{tag:x.strong,fontWeight:"700",color:"currentColor"},{tag:x.emphasis,fontStyle:"italic",color:"currentColor"},{tag:[x.name,x.angleBracket,x.operator,x.meta,x.comment,x.processingInstruction,x.string,x.inserted],color:"var(--cm-color-meta)"},{tag:x.atom,color:"currentColor"},{tag:x.heading,fontWeight:"700"},{tag:x.strikethrough,textDecoration:"line-through"},{tag:x.url,color:"var(--cm-color-meta)"},{tag:x.character,color:"currentColor"},{tag:dr.inlineCode,backgroundColor:"var(--cm-code-background)",padding:".1em 0",margin:"-.1em 0"},{tag:[x.labelName],fontWeight:"400"},{tag:[dr.kirbytag],background:"var(--cm-kirbytag-background)",color:"var(--color-text)",fontWeight:"400",margin:"-0.125em 0",padding:"0.0625em 0"}])}class Fw extends tt{plugins(){return[Yw(),G.lineWrapping]}get type(){return"theme"}}const Hw=(Ri.safari||Ri.chrome||Ri.gecko)&&!Ri.android&&!Ri.ios;class Kw extends $k{constructor(e,t={}){super();this.activeTokens=[],this.preventUpdate=!1,this.metaKeyDown=!1,this.invisibles=new br,this.defaults={editable:!0,element:null,events:{},extensions:[],input:null,placeholder:null,invisibles:!1,spellcheck:!0,value:""},this.options=mt(mt({},this.defaults),t),this.events=this.createEvents(),this.extensions=this.createExtensions(),this.inlineFormats=this.extensions.getFormats("inline"),this.blockFormats=this.extensions.getFormats("block"),this.buttons=this.extensions.getButtons(),this.dialogs=this.extensions.getDialogs(),this.view=this.createView(e)}keymap(){const e=this.extensions.getKeymap();return An.of([Y1,R1,e])}createEvents(){const e=this.options.events||{};return Object.entries(e).forEach(([t,i])=>{this.on(t,i)}),e}createExtensions(){return new Uk([new Zw,new Uw,new qk,new Ek,new jw,new qw,new Mk,new Fw,...this.options.extensions],this,this.options.input)}createState(e){const t=[this.keymap(),this.invisibles.of([]),Hw&&v0(),this.options.placeholder&&W0(this.options.placeholder),this.extensions.getPluginsByType("theme")].filter(i=>i);return F.create({doc:e,selection:this.state?this.state.selection:null,extensions:t,tabSize:4})}createView(e){const t=kd(()=>{this.activeTokens=Jo(this.view,this.blockFormats,this.inlineFormats),this.emit("active",this.activeTokens)},50),i=new G({state:this.createState(e),parent:this.options.element,dispatch:(...n)=>{if(this.view.update(n),this.preventUpdate){this.preventUpdate=!1;return}const s=this.view.state.doc.toString();this.emit("update",s),t()}});return this.options.spellcheck&&i.contentDOM.setAttribute("spellcheck","true"),i}destroy(){!this.view||this.view.destroy()}dispatch(e,t=!0){t===!1&&(this.emitUpdate=!1),this.view.dispatch(e)}focus(){this.view.hasFocus||this.options.editable===!1||this.view.focus()}getSelection(){return this.state.sliceDoc(this.state.selection.main.from,this.state.selection.main.to)}insert(e,t=!0){t?this.dispatch(Ei(mt({},this.state.replaceSelection(e)),{scrollIntoView:!0})):this.dispatch(this.state.replaceSelection(e))}isActiveToken(...e){for(let t of e)if(this.activeTokens.includes(t))return!0;return!1}get state(){return this.view?this.view.state:null}setValue(e){this.view.dispatch({changes:{from:0,to:this.view.state.doc.length,insert:e}})}toggleBlockFormat(e){return _k(this.view,this.blockFormats,e)}toggleInlineFormat(e){return Dk(this.view,this.blockFormats,this.inlineFormats,e)}toggleInvisibles(e=null){if(e===this.options.invisibles)return;this.options.invisibles=typeof e=="boolean"?e:!this.options.invisibles;const t=this.invisibles.reconfigure(this.options.invisibles?this.extensions.getPluginsByType("invisibles"):[]);this.dispatch({effects:t}),this.emit("invisibles",this.options.invisibles)}updateActiveTokens(){this.activeTokens=Jo(this.view,this.blockFormats,this.inlineFormats)}get value(){return this.view?this.view.state.doc.toString():""}}class Jw extends tt{get defaults(){return{name:"highlight",regex:"",flags:"g",class:"cm-highlight"}}get type(){return"highlight"}plugins(){const e=V.mark({class:this.options.class});let t=this.options.flags||"";t+=t.includes("g")?"":"g";const i=new Qf({regexp:new RegExp(this.options.regex,t),decoration:()=>e});return[Be.define(n=>({decorations:i.createDeco(n),update(s){this.decorations=i.updateDeco(s,this.decorations)}}),{decorations:n=>n.decorations})]}}class re extends tt{constructor(e={}){super(e)}get button(){return null}get dialog(){return null}get token(){return null}get tokenType(){return null}get type(){return"button"}get isActive(){return this.token!==null?()=>this.editor.isActiveToken(this.token):()=>!1}get isDisabled(){return this.tokenType==="block"?()=>!1:()=>this.editor.isActiveToken("Kirbytag","FencedCode","Link","URL")}static factory(e){const t=new re;return jd(t,e),t}}class eS extends re{get button(){return{icon:"quote",label:this.input.$t("markdown.toolbar.button.blockquote")+this.formatKeyName(this.keys()[0]),command:this.command}}get command(){return()=>this.editor.toggleBlockFormat(this.token)}keys(){return[{mac:"Ctrl-Alt-q",key:"Alt-Shift-q",run:this.command,preventDefault:!0}]}get name(){return"blockquote"}get token(){return"Blockquote"}get tokenType(){return"block"}}class tS extends re{get button(){return{icon:"list-bullet",label:this.input.$t("toolbar.button.ul")+this.formatKeyName(this.keys()[0]),command:this.command}}get command(){return()=>this.editor.toggleBlockFormat(this.token)}configure(e){if(typeof e=="string"&&(e={mark:e}),re.prototype.configure.call(this,e),!["-","*","+"].includes(this.options.mark))throw"Bullet list mark must be either `-`, `*` or `+`."}get defaults(){return{mark:"-"}}keys(){return[{mac:"Ctrl-Alt-u",key:"Alt-Shift-u",run:this.command,preventDefault:!0}]}get name(){return"ul"}get syntax(){return{token:this.token,type:this.tokenType,render:this.options.mark+" "}}get token(){return"BulletList"}get tokenType(){return"block"}}class iS extends re{get button(){return{divider:!0}}get name(){return"divider"}}class rS extends re{get button(){return{icon:"italic",label:this.input.$t("toolbar.button.italic")+this.formatKeyName(this.keys()[0]),command:this.command}}get command(){return()=>!this.isDisabled()&&this.editor.toggleInlineFormat(this.token)}configure(e){if(typeof e=="string"&&(e={mark:e}),re.prototype.configure.call(this,e),!["*","_"].includes(this.options.mark))throw"Italic mark must be either `*` or `_`."}get defaults(){return{mark:"*"}}keys(){return[{key:"Mod-i",run:this.command,preventDefault:!0}]}get name(){return"italic"}get syntax(){return{token:this.token,type:this.tokenType,mark:this.options.mark}}get token(){return"Emphasis"}get tokenType(){return"inline"}}class nS extends re{get button(){const e={icon:"attachment",label:this.input.$t("toolbar.button.file")};return this.input.uploads?Ei(mt({},e),{dropdown:[{label:this.input.$t("toolbar.button.file.select"),icon:"check",command:this.openSelectDialog},{label:this.input.$t("toolbar.button.file.upload"),icon:"upload",command:()=>this.input.uploadFile()}]}):Ei(mt({},e),{command:this.openSelectDialog})}get openSelectDialog(){return()=>this.editor.emit("dialog",this,{endpoint:this.input.endpoints.field+"/files",multiple:!1,selected:[]})}get command(){return e=>{this.isDisabled()||!e||!e.length||this.editor.insert(e.map(t=>t.dragText).join(`

`))}}get dialog(){return"k-files-dialog"}get name(){return"file"}}class sS extends re{get button(){return{icon:"footnote",label:this.input.$t("markdown.toolbar.button.footnote")+this.formatKeyName(this.keys()[0]),command:this.command}}keys(){return[{mac:"Ctrl-Alt-f",key:"Alt-Shift-f",run:this.command,preventDefault:!0}]}get command(){return()=>this.editor.dispatch(this.editor.state.changeByRange(e=>({changes:[{from:e.from,insert:"[^"},{from:e.to,insert:"]"}],range:_.range(e.from+2,e.to+2)})))}get name(){return"footnote"}}class lS extends re{constructor(e={}){super(e)}get button(){return{icon:"title",label:this.input.$t("toolbar.button.headings"),dropdown:this.dropdownItems().filter(e=>this.options.levels.includes(e.name))}}configure(e){Array.isArray(e)&&(e={levels:e}),re.prototype.configure.call(this,e)}get defaults(){return{levels:["h1","h2","h3"]}}dropdownItems(){return[{name:"h1",icon:"h1",label:this.input.$t("markdown.toolbar.button.heading.1")+this.formatKeyName({mac:"Ctrl-Alt-1",key:"Alt-Shift-1"},"<kbd>","</kbd>"),command:()=>this.editor.toggleBlockFormat("ATXHeading1"),token:"ATXHeading1",tokenType:"block"},{name:"h2",icon:"h2",label:this.input.$t("markdown.toolbar.button.heading.2")+this.formatKeyName({mac:"Ctrl-Alt-2",key:"Alt-Shift-2"},"<kbd>","</kbd>"),command:()=>this.editor.toggleBlockFormat("ATXHeading2"),token:"ATXHeading2",tokenType:"block"},{name:"h3",icon:"h3",label:this.input.$t("markdown.toolbar.button.heading.3")+this.formatKeyName({mac:"Ctrl-Alt-3",key:"Alt-Shift-3"},"<kbd>","</kbd>"),command:()=>this.editor.toggleBlockFormat("ATXHeading3"),token:"ATXHeading3",tokenType:"block"},{name:"h4",icon:"h4",label:this.input.$t("markdown.toolbar.button.heading.4")+this.formatKeyName({mac:"Ctrl-Alt-4",key:"Alt-Shift-4"},"<kbd>","</kbd>"),command:()=>this.editor.toggleBlockFormat("ATXHeading4"),token:"ATXHeading4",tokenType:"block"},{name:"h5",icon:"h5",label:this.input.$t("markdown.toolbar.button.heading.5")+this.formatKeyName({mac:"Ctrl-Alt-5",key:"Alt-Shift-5"},"<kbd>","</kbd>"),command:()=>this.editor.toggleBlockFormat("ATXHeading5"),token:"ATXHeading5",tokenType:"block"},{name:"h6",icon:"h6",label:this.input.$t("markdown.toolbar.button.heading.6")+this.formatKeyName({mac:"Ctrl-Alt-6",key:"Alt-Shift-6"},"<kbd>","</kbd>"),command:()=>this.editor.toggleBlockFormat("ATXHeading6"),token:"ATXHeading6",tokenType:"block"}]}get isDisabled(){return()=>!1}keys(){return this.options.levels.reduce((e,t)=>(t=t.replace(/^h/,""),[...e,{mac:`Ctrl-Alt-${t}`,key:`Alt-Shift-${t}`,run:()=>this.editor.toggleBlockFormat(`ATXHeading${t}`),preventDefault:!0}]),[])}get name(){return"headlines"}}class oS extends re{get button(){return{icon:"highlight",label:this.input.$t("toolbar.button.highlight")+this.formatKeyName(this.keys()[0]),command:this.command}}get command(){return()=>!this.isDisabled()&&this.editor.toggleInlineFormat(this.token)}keys(){return[{mac:"Ctrl-Alt-y",key:"Alt-Shift-y",run:this.command,preventDefault:!0}]}get name(){return"highlight"}get token(){return"Highlight"}get tokenType(){return"inline"}}class aS extends re{get button(){return{icon:"horizontal-rule",label:this.input.$t("markdown.toolbar.button.hr"),command:this.command}}get command(){return()=>{const{view:e}=this.editor,{state:t}=e,i=t.selection.main;let n=Wg(t.doc.slice(0,i.from).toString()),s=Rg(t.doc.slice(i.to).toString());n=n+(n.length>0?`

`:"")+this.syntax.render(),s=`

`+s,e.dispatch({changes:{from:0,to:t.doc.length,insert:n+s},selection:_.cursor(n.length),scrollIntoView:!0})}}configure(e){if(typeof e=="string"&&(e={mark:e}),re.prototype.configure.call(this,e),!["***","---","___"].includes(this.options.mark))throw"Horizontal rule mark must be either `***`, `---` or `___`."}get defaults(){return{mark:"***"}}get name(){return"hr"}get syntax(){return{token:this.token,type:this.tokenType,render:()=>this.options.mark}}get token(){return"HorizontalRule"}get tokenType(){return"block"}get isActive(){return()=>!1}get isDisabled(){return()=>this.editor.isActiveToken("Kirbytag","Link")}}class hS extends re{get button(){return{icon:"code",label:this.input.$t("toolbar.button.code")+this.formatKeyName(this.keys()[0]),command:this.command}}get command(){return()=>!this.isDisabled()&&this.editor.toggleInlineFormat(this.token)}keys(){return[{mac:"Ctrl-Alt-x",key:"Alt-Shift-x",run:this.command,preventDefault:!0}]}get name(){return"code"}get token(){return"InlineCode"}get tokenType(){return"inline"}}class uS extends re{get button(){return{align:"right",icon:"preview",label:this.input.$t("markdown.toolbar.button.invisibles")+this.formatKeyName(this.keys()[0]),command:this.command}}get command(){return()=>this.editor.toggleInvisibles()}keys(){return[{mac:"Ctrl-Alt-i",key:"Alt-Shift-i",run:this.command,preventDefault:!0}]}get name(){return"invisibles"}get tokenType(){return"setting"}get isDisabled(){return()=>!1}}class fS extends re{get button(){return{icon:"url",label:this.input.$t("toolbar.button.link")+this.formatKeyName(this.keys()[0]),command:()=>this.editor.emit("dialog",this)}}get defaults(){return{blank:!0}}get command(){return e=>{if(!this.isDisabled())if(e.type==="email"){const t=e.email!==null?e.email:"";if(this.input.kirbytext){const i=e.text?` text: ${e.text}`:"";this.editor.insert(`(email: ${t}${i})`)}else e.text?this.editor.insert(`[${e.text}](mailto:${t})`):this.editor.insert(`<${t}>`)}else{const t=e.url!==null?e.url:"";if(this.input.kirbytext){const i=e.text?` text: ${e.text}`:"",n=e.blank?" target: _blank":"";this.editor.insert(`(link: ${t}${i}${n})`)}else e.text?this.editor.insert(`[${e.text}](${t})`):this.editor.insert(`<${t}>`)}}}get dialog(){return"k-markdown-link-dialog"}keys(){return[{key:"Mod-k",run:()=>this.editor.emit("dialog",this)}]}get name(){return"link"}}class cS extends re{get button(){return{icon:"list-numbers",label:this.input.$t("toolbar.button.ol")+this.formatKeyName(this.keys()[0]),command:this.command}}get command(){return()=>this.editor.toggleBlockFormat(this.token)}keys(){return[{mac:"Ctrl-Alt-o",key:"Alt-Shift-o",run:this.command,preventDefault:!0}]}get name(){return"ol"}get token(){return"OrderedList"}get tokenType(){return"block"}}class dS extends re{get button(){return{icon:"pagelink",label:this.input.$t("markdown.toolbar.button.pagelink"),command:()=>{this.editor.emit("dialog",this,{endpoint:this.input.endpoints.field+"/pages",multiple:!1,selected:[]})}}}get command(){return e=>{if(this.isDisabled()||!e||!e.length)return;const t=e[0],i=this.editor.getSelection(),n=i.length>0?i:t.text||t.title,s=this.input.currentLanguage&&!this.input.currentLanguage.default?` lang: ${this.input.currentLanguage.code}`:"",l=`(link: ${t.id} text: ${n}${s})`;this.editor.insert(l)}}get dialog(){return"k-pages-dialog"}get name(){return"pagelink"}}class pS extends re{get button(){return{icon:"special-chars",label:this.input.$t("toolbar.button.headings"),dropdown:[{label:"No-Break Space"+this.formatKeyName({mac:"Alt-Space"},"<kbd>","</kbd>"),command:()=>this.editor.insert("\xA0")},{label:"Thin Space",command:()=>this.editor.insert("\u2009")},{label:"Thin No-Break Space",command:()=>this.editor.insert("\u202F")},{label:"Soft Hyphen",command:()=>this.editor.insert("\xAD")},{label:"Zero-Width Space",command:()=>this.editor.insert("\u200B")}]}}get isDisabled(){return()=>!1}get name(){return"chars"}}class OS extends re{get button(){return{icon:"strikethrough",label:this.input.$t("markdown.toolbar.button.strikethrough")+this.formatKeyName(this.keys()[0]),command:this.command}}get command(){return()=>!this.isDisabled()&&this.editor.toggleInlineFormat(this.token)}keys(){return[{mac:"Ctrl-Alt-d",key:"Alt-Shift-d",run:this.command,preventDefault:!0}]}get name(){return"strikethrough"}get token(){return"Strikethrough"}get tokenType(){return"inline"}}class gS extends re{get button(){return{icon:"bold",label:this.input.$t("toolbar.button.bold")+this.formatKeyName(this.keys()[0]),command:this.command}}get command(){return()=>!this.isDisabled()&&this.editor.toggleInlineFormat(this.token)}configure(e){if(typeof e=="string"&&(e={mark:e}),re.prototype.configure.call(this,e),!["**","__"].includes(this.options.mark))throw"Bold mark must be either `**` or `__`."}get defaults(){return{mark:"**"}}keys(){return[{key:"Mod-b",run:this.command,preventDefault:!0}]}get name(){return"bold"}get syntax(){return{token:this.token,type:this.tokenType,mark:this.options.mark}}get token(){return"StrongEmphasis"}get tokenType(){return"inline"}}var mS=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"k-markdown-input-wrap",attrs:{"data-theme":r.theme,"data-font-family":r.font,"data-font-size":r.fontSize,"data-layout":r.layout,"data-dragover":!!r.isDragOver,"data-size":r.size,"data-invisibles":r.invisibles}},[r.buttons&&!r.disabled&&!r.hideToolbar?t("k-markdown-toolbar",{ref:"toolbar",attrs:{buttons:r.toolbarButtons,active:r.active,invisibles:r.invisibles},nativeOn:{mousedown:function(i){i.preventDefault()}}}):r._e(),t("div",{ref:"input",staticClass:"k-markdown-input",on:{dragenter:r.onDragEnter,dragover:r.onDragOver,dragleave:r.onDragLeave,drop:r.onDrop,keydown:[function(i){return!i.type.indexOf("key")&&r._k(i.keyCode,"enter",13,i.key,"Enter")||!i.metaKey?null:r.onSubmit.apply(null,arguments)},function(i){return!i.type.indexOf("key")&&r._k(i.keyCode,"enter",13,i.key,"Enter")||!i.ctrlKey?null:r.onSubmit.apply(null,arguments)}]}}),r._l(this.dialogs,function(i){return t(i.dialog,r._b({key:i.name,ref:"dialog-"+i.name,refInFor:!0,tag:"component",attrs:{extension:i},on:{cancel:r.cancel,close:r.cancel,submit:function(n){for(var s=arguments.length,l=Array(s);s--;)l[s]=arguments[s];return r.submitDialog.apply(void 0,[i].concat(l))}}},"component",r.$props,!1))}),r.uploads?t("k-upload",{ref:"fileUpload",on:{success:r.insertUpload}}):r._e()],2)},bS=[],zS="";let sn;window.ResizeObserver&&(sn=new ResizeObserver(r=>{for(let{target:e,contentRect:t}of r)e._component.layout=t.width>=450?"wide":"narrow"}));const kS={components:{"k-markdown-toolbar":Ag,"k-markdown-link-dialog":Eg},data(){return{editor:Object,skipNextChangeEvent:!1,currentDialog:null,activeMarks:[],isDragOver:!1,invisibles:!1,toolbarButtons:[],active:[],dialogs:[],layout:"narrow"}},props:Ei(mt({},ah.props),{hideToolbar:{type:Boolean,default:!1},forceLayout:{type:[String,Boolean],default:!1},fontSize:{type:String,default:"normal"}}),computed:{currentLanguage(){return this.$language}},watch:{value(r,e){r!==void 0&&r!==this.editor.value&&this.editor.setValue(r)}},mounted(){this.editor=new Kw(this.value,{editable:!this.disabled,element:this.$refs.input,input:this,placeholder:this.placeholder,invisibles:this.invisibles,spellcheck:this.spellcheck,extensions:[...this.createHighlights(),...this.createToolbarButtons(),...this.createCustomExtensions()],events:{active:r=>{this.active=r},dialog:(r,...e)=>{this.openDialog(r,...e)},update:r=>{this.$refs.toolbar&&this.$refs.toolbar.closeDropdowns(),this.$emit("input",r)},invisibles:r=>{this.invisibles=r}}}),this.toolbarButtons=this.editor.buttons,this.dialogs=this.editor.dialogs,this.autofocus&&!this.disabled&&this.focus().then(()=>{this.editor.view.dispatch({scrollIntoView:!0,selection:{head:this.editor.state.doc.length,anchor:this.editor.state.doc.length}})}),this.forceLayout?this.layout=this.forceLayout:sn&&(this.$refs.input._component=this,sn.observe(this.$refs.input))},beforeDestroy(){!this.forceLayout&&sn&&this.$refs.input&&sn.unobserve(this.$refs.input),this.editor.destroy()},methods:{focus(){this.editor.focus()},onSubmit(r){return this.$emit("submit",r)},createButtons(){return window.markdownEditorButtons?window.markdownEditorButtons.reduce((r,e)=>[...r,re.factory(e)],[]):[]},createCustomExtensions(){return window.markdownEditorExtensions?window.markdownEditorExtensions.reduce((r,e)=>[...r,tt.factory(e)],[]):[]},createToolbarButtons(){const r=[new eS,new tS,new iS,new rS,new nS,new sS,new lS,new oS,new aS,new hS,new uS,new fS,new cS,new pS,new OS,new gS,...this.createButtons()];this.kirbytext&&r.push(new dS);const e=r.reduce((i,n)=>Ei(mt({},i),{[n.name]:n}),{});this.buttons===!0&&(this.buttons={headlines:["h1","h2","h3"],bold:{},italic:{},divider__0:{},link:{},file:{},image:{},code:{},divider__1:{},ul:{},ol:{},invisibles:{}});const t=[];for(let i of Object.keys(this.buttons))i=i.replace(/__.*$/,""),e[i]&&(e[i].configure(this.buttons[i]),t.push(e[i]));return t},createHighlights(){return this.highlights===!1?[]:this.customHighlights.filter(e=>this.highlights===!0||Array.isArray(this.highlights)&&this.highlights.includes(e.name)).map(e=>new Jw(e))},openDialog(r,...e){const t=`dialog-${r.name}`,i=this.$refs[t][0];i.open(...e),this.currentDialog=i},cancel(){this.currentDialog=null,setTimeout(()=>this.focus())},submitDialog(r,...e){this.currentDialog=null,this.focus(),r.command(...e)},insertUpload(r,e){this.editor.insert(e.map(t=>t.dragText).join(`

`)),this.$events.$emit("file.create"),this.$events.$emit("model.update"),this.$store.dispatch("notification/success",":)")},selectFile(){this.$refs.fileDialog.open({endpoint:this.endpoints.field+"/files",multiple:!1})},uploadFile(){this.$refs.fileUpload.open({url:"/api/"+this.endpoints.field+"/upload",multiple:!1})},onDrop(r){if(this.isDragOver=!1,this.uploads&&this.$helper.isUploadEvent(r))return this.$refs.fileUpload.drop(r.dataTransfer.files,{url:"/api/"+this.endpoints.field+"/upload",multiple:!1});const e=this.$store.state.drag;e&&e.type==="text"&&(this.editor.insert(e.data,!0),this.focus())},onDragLeave(){this.$refs.input.blur(),this.isDragOver=!1},onDragOver(){this.isDragOver=!0},onDragEnter(r){if(this.uploads&&this.$helper.isUploadEvent(r)){r.dataTransfer.dropEffect="copy",this.focus(),this.isDragOver=!0;return}const e=this.$store.state.drag;e&&e.type==="text"&&(r.dataTransfer.dropEffect="copy",this.focus(),this.isDragOver=!0)}}},cg={};var yS=pr(kS,mS,bS,!1,xS,null,null,null);function xS(r){for(let e in cg)this[e]=cg[e]}var QS=function(){return yS.exports}();window.panel.plugin("community/markdown-field",{components:{"k-markdown-input":QS},blocks:{markdown:kg},fields:{markdown:ah},icons:{"horizontal-rule":'<path d="M1.7 6.71h12.6V9.3H1.7z"/>',"special-chars":'<path d="M.8829 11.7674h.3756c.0271.4686.1693.7954.4265.9802.2572.1848.6667.2773 1.2285.2773h2.7717l-.0203-.6635c-1.0762-.2112-2.0577-.7953-2.9444-1.7524-.8866-.9571-1.33-2.165-1.33-3.6238 0-1.6172.6177-2.9967 1.853-4.1387 1.2352-1.1419 2.8478-1.7128 4.8377-1.7129 1.929 0 3.5062.5397 4.7312 1.6189 1.2252 1.0792 1.8377 2.4604 1.8377 4.1436 0 1.3663-.3807 2.5264-1.1421 3.4802-.7616.9538-1.792 1.6155-3.0916 1.9851l-.1015.6635h2.8225c.643 0 1.0677-.119 1.2741-.3565.2065-.2376.3164-.538.33-.901h.3756v3.099H9.4316l.264-2.9901c1.7462-.5346 2.6193-2.109 2.6193-4.7228 0-1.7096-.4281-3.0198-1.2843-3.9307-.8562-.911-1.8596-1.3664-3.0103-1.3664-1.225 0-2.2387.4835-3.0407 1.4505-.8021.967-1.2032 2.203-1.2032 3.708 0 1.089.1794 2.0808.5381 2.9752.3588.8945 1.0458 1.5232 2.061 1.8862l.193 2.99H.8829v-3.0989z" fill-rule="nonzero"></path>',pagelink:'<path d="M15,15V5l-5-5H2C1.4,0,1,0.4,1,1v14c0,0.6,0.4,1,1,1h12C14.6,16,15,15.6,15,15z M3,2h6v4h4v8H3V2z"></path>',h1:'<path d="M13.32 11.98c-.19 0-.2-.04-.2-.25V5.88H10.5l-.14 1.03 1.09.22c.12.04.16.11.16.25v4.36c0 .19-.03.23-.2.25l-.98.08v.99h3.82v-.99l-.93-.09zm-7.71 1.08v-.96l1.09-.54v-2.6H2.69v2.6l1.08.54v.96H0v-.96l1.09-.54V4.76L0 4.24v-.96h3.77v.96l-1.08.54v2.59H6.7V4.78l-1.09-.55v-.96H9.4v.96l-1.1.54v6.79l1.1.54v.96H5.6z" fill-rule="nonzero"/>',h2:'<path d="M14.93 10.98l-.15.88a.3.3 0 01-.35.27h-1.86a.15.15 0 01-.1-.25l1.43-1.38c.91-.87 1.7-1.62 1.7-2.75 0-1.25-.82-1.88-2.5-1.88-1.8 0-2.66.66-2.72 2.06l1.42.13c.04-.81.36-1.12 1.13-1.12.68 0 1.05.34 1.05.96 0 .75-.55 1.3-1.75 2.46l-1.75 1.72v.97H16v-2.07h-1.07zm-9.32 2.08v-.96l1.09-.54v-2.6H2.69v2.6l1.08.54v.96H0v-.96l1.09-.54V4.76L0 4.24v-.96h3.77v.96l-1.08.54v2.59H6.7V4.78l-1.09-.55v-.96H9.4v.96l-1.1.54v6.79l1.1.54v.96H5.6z" fill-rule="nonzero"/>',h3:'<path d="M13.87 9.35v-.04c.74-.2 1.25-.9 1.22-1.66 0-1.14-.63-1.77-2.27-1.77-1.11 0-2.38.29-2.38 1.97l1.46.13c0-.75.28-.95.85-.95s.78.33.78.74c0 .68-.42 1.05-1.19 1.15l-.52.06v1.07c.26-.05.52-.08.79-.08.66 0 1.06.27 1.06.92 0 .75-.5.96-1.1.96-.61 0-1.2-.26-1.6-.7l-.86.93c.55.6 1.5.98 2.58.98 1.52 0 2.58-.66 2.58-2.07 0-.96-.5-1.49-1.4-1.64zm-8.25 3.7v-.95l1.08-.54v-2.6H2.7v2.6l1.08.54v.96H0v-.96l1.09-.54V4.76L0 4.24v-.96h3.77v.96l-1.08.54v2.59H6.7V4.78l-1.09-.55v-.96H9.4v.96l-1.1.54v6.79l1.1.54v.96H5.62z" fill-rule="nonzero"/>',h4:'<path d="M5.61 13.06v-.96l1.09-.54v-2.6H2.69v2.6l1.08.54v.96H0v-.96l1.09-.54V4.76L0 4.24v-.96h3.77v.96l-1.08.54v2.59H6.7V4.78l-1.09-.55v-.96H9.4v.96l-1.1.54v6.79l1.1.54v.96H5.6zm8.62-.12l-.05-1.9h1l.1-1.25H14.2V5.96L13 5.88l-3.27 4.25.11.91h2.89l.04 1.9h1.46zM12.7 7.95l.05 1.85-1.34.02 1.3-1.87z" fill-rule="nonzero"/>',h5:'<path d="M5.61 13.06v-.96l1.09-.54v-2.6H2.69v2.6l1.08.54v.96H0v-.96l1.09-.54V4.76L0 4.24v-.96h3.77v.96l-1.08.54v2.59H6.7V4.78l-1.09-.55v-.96H9.4v.96l-1.1.54v6.79l1.1.54v.96H5.6zm8.21-.21c.57-.25.99-.74 1.15-1.34.08-.28.12-.57.13-.87 0-.3-.05-.58-.14-.87-.1-.26-.23-.5-.42-.71a1.94 1.94 0 00-1.51-.68c-.27-.01-.54.02-.8.08l-.14.05.18-1.42h2.28l.21-1.22h-3.78l-.39 3.58.62.46.05-.02.15-.07.24-.1a3.21 3.21 0 01.92-.13c.26-.01.51.08.7.25.18.22.27.5.25.78.02.34-.07.67-.25.95a.95.95 0 01-.77.3c-.24 0-.49-.05-.71-.14-.25-.1-.54-.22-.86-.37l-.12-.05-.46 1.12.11.05c.36.16.74.3 1.12.41.38.12.77.17 1.16.17.37.01.74-.06 1.08-.21z" fill-rule="nonzero"/>',h6:'<path d="M5.61 13.06v-.96l1.09-.54v-2.6H2.69v2.6l1.08.54v.96H0v-.96l1.09-.54V4.76L0 4.24v-.96h3.77v.96l-1.08.54v2.59H6.7V4.78l-1.09-.55v-.96H9.4v.96l-1.1.54v6.79l1.1.54v.96H5.6zm7.91-.18a2.16 2.16 0 001.27-1.25c.1-.3.16-.62.16-.94a2.47 2.47 0 00-.57-1.73c-.4-.43-.98-.65-1.57-.63a1.84 1.84 0 00-.97.26c-.12.07-.23.15-.33.23l.06-.5c.04-.22.12-.44.23-.65.1-.18.25-.34.42-.45.22-.1.47-.16.71-.15a2.83 2.83 0 011.04.19l.1.04.43-1.07-.11-.05a4.4 4.4 0 00-.64-.2c-.25-.07-.51-.1-.77-.1-.48-.01-.96.1-1.4.3-.36.19-.69.46-.94.8-.24.34-.42.72-.53 1.13-.1.44-.16.9-.16 1.35 0 .48.04.95.13 1.42.07.4.2.79.41 1.14a2.13 2.13 0 001.97 1.03c.36 0 .72-.05 1.06-.17zm-1.93-3.03l.26-.16c.1-.06.22-.11.34-.15.13-.04.26-.06.38-.05.27-.03.53.09.68.31.14.27.21.58.2.88.02.32-.05.63-.2.9a.75.75 0 01-.69.32.79.79 0 01-.76-.46 4 4 0 01-.3-1.52l.09-.07z" fill-rule="nonzero"/>',footnote:'<path d="M10.15 5.74H8.81l-.06-.49.63-.13V1.37h-.65L8.67.85l1.55-.31h.65l.03.88L12.53.39c.27 0 .54.02.8.08.2.04.37.14.52.27.14.14.24.32.29.51.06.27.09.54.08.81v3.05l.67.13-.06.5h-2.55l-.05-.5.44-.13V2.13c0-.42-.19-.63-.57-.63a1 1 0 00-.48.13 3.9 3.9 0 00-.47.29l-.25.16v3.03l.46.13-.05.5h-1.16zM7.7 2.46v-1H1.69v1l2 1v10.51l-2 1v1h6v-1l-2-1V3.47l2-1.01z" fill-rule="nonzero"/>',highlight:'<path d="M15.7,4.3l-4-4c-0.4-0.4-1-0.4-1.4,0l-8,8c-0.4,0.4-0.4,1,0,1.4l1,1L0,14l3,1l2.3-2.3l1,1 c0.3,0.3,0.8,0.6,1.4,0l8-8C16.1,5.3,16.1,4.7,15.7,4.3z"></path>',eraser:'<rect y="14" width="16" height="2"></rect><path d="M4.6,12h4.8l5.3-5.3c0.4-0.4,0.4-1,0-1.4l-5-5c-0.4-0.4-1-0.4-1.4,0l-7,7c-0.4,0.4-0.4,1,0,1.4L4.6,12z"></path>'}})})();
